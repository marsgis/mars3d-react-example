/**
 * Mars3D平台插件,支持气象 风向图 功能插件  mars3d-wind
 *
 * 版本信息：v3.9.2
 * 编译日期：2025-03-09 14:16
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：火星科技免费公开版 ，2025-02-01
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-wind"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';(function(_0x20d444,_0x1a391e){const _0x21d573=_0x20d444();function _0x143b34(_0x3131c0,_0x363d3a){return _0x5768(_0x363d3a- -0x321,_0x3131c0);}function _0x181e6c(_0x454bce,_0x4465a2){return _0x5768(_0x4465a2-0x2d4,_0x454bce);}while(!![]){try{const _0x4e0428=parseInt(_0x181e6c(0x38e,0x39a))/0x1+parseInt(_0x143b34(-0x1e0,-0x1e6))/0x2+parseInt(_0x143b34(-0x166,-0x1e8))/0x3+-parseInt(_0x143b34(-0x207,-0x207))/0x4*(parseInt(_0x143b34(-0x268,-0x1eb))/0x5)+parseInt(_0x143b34(-0x200,-0x20a))/0x6+-parseInt(_0x143b34(-0x254,-0x20b))/0x7*(parseInt(_0x181e6c(0x496,0x42b))/0x8)+-parseInt(_0x143b34(-0x25c,-0x22b))/0x9;if(_0x4e0428===_0x1a391e)break;else _0x21d573['push'](_0x21d573['shift']());}catch(_0x29d999){_0x21d573['push'](_0x21d573['shift']());}}}(_0x1a82,0xaef34));function _interopNamespace(_0x595515){if(_0x595515&&_0x595515['__esModule'])return _0x595515;var _0x120d10=Object[_0x119a53(-0x258,-0x27c)](null);_0x595515&&Object['keys'](_0x595515)[_0xd3473e(0x4d,0x22)](function(_0x5a5e4e){function _0x5d0b4b(_0x6bb6d7,_0x4c46d0){return _0x119a53(_0x4c46d0,_0x6bb6d7-0x435);}function _0x293d76(_0x50e692,_0x8642ba){return _0xd3473e(_0x50e692-0x47e,_0x8642ba);}if(_0x5a5e4e!==_0x293d76(0x4a3,0x49d)){var _0x4b47b1=Object['getOwnPropertyDescriptor'](_0x595515,_0x5a5e4e);Object[_0x5d0b4b(0x217,0x1ac)](_0x120d10,_0x5a5e4e,_0x4b47b1['get']?_0x4b47b1:{'enumerable':!![],'get':function(){return _0x595515[_0x5a5e4e];}});}});function _0xd3473e(_0x25361a,_0x35bbc7){return _0x5768(_0x25361a- -0x127,_0x35bbc7);}function _0x119a53(_0x161436,_0x27be86){return _0x5768(_0x27be86- -0x3db,_0x161436);}return _0x120d10[_0xd3473e(0x25,-0x60)]=_0x595515,_0x120d10;}var mars3d__namespace=_interopNamespace(mars3d);const Cesium$2=mars3d__namespace['Cesium'];function getU(_0x590a61,_0x2b2d2b){function _0x597ef9(_0x233615,_0x378567){return _0x5768(_0x378567-0x225,_0x233615);}const _0x226ee3=_0x590a61*Math['cos'](Cesium$2['Math'][_0x597ef9(0x3ec,0x3af)](_0x2b2d2b));return _0x226ee3;}function getV(_0x56aa26,_0x49093a){const _0x239b4b=_0x56aa26*Math['sin'](Cesium$2[_0x2219a9(0x2a5,0x28a)]['toRadians'](_0x49093a));function _0x2219a9(_0x3f4413,_0xc5e9a7){return _0x5768(_0xc5e9a7-0x16c,_0x3f4413);}return _0x239b4b;}function getSpeed(_0x3593e0,_0x19ed30){const _0x58a5d5=Math[_0x55cc33(-0xb5,-0x6d)](Math['pow'](_0x3593e0,0x2)+Math['pow'](_0x19ed30,0x2));function _0x55cc33(_0x1ef2e5,_0x489eba){return _0x5768(_0x1ef2e5- -0x1a9,_0x489eba);}return _0x58a5d5;}function _0x1a82(){const _0x566c9e=['computing','north','bindEvent','getUVByPoint','age','latitude','data','NEAREST','getUVByXY','container','auto','scene','_map','attributeLocations','Cartesian2','segmentsDepth','off','onmessage','xmax','fillRect','fromDegrees','windTextures','nextParticlesPosition','OPAQUE','14bybVIz','3443004yyzauy','ColorRamp','frameRateMonitor','356448fydaPa','removeEventListener','rawRenderState','push','Math','ymin','createPrimitives','tlat','ONE_MINUS_SRC_ALPHA','onColorTableChange','call','min','globe','removeChild','reCreateWindTextures','resize','_canvasParticles','getV','getDefaultRenderState','abs','clearCommand','createWindTextures','_tomap','WindUtil','getParticles','canvasContext','vdata','east','15MygSVn','getDataAtLonLat','height','3499827NKbyGo','sceneMode','1517302xmigyq','primitiveType','updatePosition','DEPTH_COMPONENT','preExecute','wrapS','primitives','commandList','none','componentDatatype','shaderProgram','cols','particlesTextureSize','array','previousParticlesPosition','color','lastFramesPerSecond','default','south','redraw','RGBA','_colorRamp','depthTest','createComputingPrimitives','mouseMove','viewport','postProcessingPosition','changed','1409008qOgOuV','IDENTITY','changeOptions','createParticlesTextures','style','getRandomLatLng','cancelAnimationFrame','xmin','create','lineTo','_pointerEvents','worker','Compute','framebuffers','outputTexture','maxAge','reverse','viewerParameters','frameTime','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec4\x20speed;\x0ain\x20float\x20v_segmentPosition;\x0ain\x20vec2\x20textureCoordinate;\x0a\x0auniform\x20vec2\x20domain;\x0auniform\x20vec2\x20displayRange;\x0auniform\x20sampler2D\x20colorTable;\x0auniform\x20sampler2D\x20segmentsDepthTexture;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20const\x20float\x20zero\x20=\x200.0f;\x0a\x20\x20if(speed.a\x20>\x20zero\x20&&\x20speed.b\x20>\x20displayRange.x\x20&&\x20speed.b\x20<\x20displayRange.y)\x20{\x0a\x20\x20\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x20\x20\x20\x20vec4\x20baseColor\x20=\x20texture(colorTable,\x20vec2(normalizedSpeed,\x20zero));\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用更平滑的渐变效果\x0a\x20\x20\x20\x20float\x20alpha\x20=\x20smoothstep(0.0f,\x201.0f,\x20v_segmentPosition);\x0a\x20\x20\x20\x20alpha\x20=\x20pow(alpha,\x201.5f);\x20//\x20调整透明度渐变曲线\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20根据速度调整透明度\x0a\x20\x20\x20\x20float\x20speedAlpha\x20=\x20mix(0.3f,\x201.0f,\x20speed.a);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20组合颜色和透明度\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(baseColor.rgb,\x20baseColor.a\x20*\x20alpha\x20*\x20speedAlpha);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a\x0a\x20\x20float\x20segmentsDepth\x20=\x20texture(segmentsDepthTexture,\x20textureCoordinate).r;\x0a\x20\x20float\x20globeDepth\x20=\x20czm_unpackDepth(texture(czm_globeDepthTexture,\x20textureCoordinate));\x0a\x20\x20if(segmentsDepth\x20<\x20globeDepth)\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(zero);\x0a\x20\x20}\x0a}\x0a','canvas','colorTable','min\x20is\x20undefined,\x20calculate\x20min','LayerUtil','width','addEventListener','pickEllipsoid','particlesSpeed','refreshTimer','forEach','getDirection','sources','particlesNumber','_onMouseMoveEvent','red','fixedHeight','canvasWidth','tlng','Unknown\x20command\x20type','_showHook','useViewerBounds','stroke','_createCanvas','vertexShaderSource','particleSystem','pointer-events','setData','blendFuncSource','destroy','_animateFrame','EventType','toRadians','mouse_move','createColorTableTexture','#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20nextParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x20//\x20(u,\x20v,\x20norm)\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20lonRange;\x0auniform\x20vec2\x20latRange;\x0a\x0a//\x20range\x20(min,\x20max)\x0auniform\x20vec2\x20dataLonRange;\x0auniform\x20vec2\x20dataLatRange;\x0a\x0auniform\x20float\x20randomCoefficient;\x0auniform\x20float\x20dropRate;\x0auniform\x20float\x20dropRateBump;\x0a\x0a//\x20添加新的\x20uniform\x20变量\x0auniform\x20bool\x20useViewerBounds;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0a//\x20pseudo-random\x20generator\x0aconst\x20vec3\x20randomConstants\x20=\x20vec3(12.9898f,\x2078.233f,\x204375.85453f);\x0aconst\x20vec2\x20normalRange\x20=\x20vec2(0.0f,\x201.0f);\x0afloat\x20rand(vec2\x20seed,\x20vec2\x20range)\x20{\x0a\x20\x20vec2\x20randomSeed\x20=\x20randomCoefficient\x20*\x20seed;\x0a\x20\x20float\x20temp\x20=\x20dot(randomConstants.xy,\x20randomSeed);\x0a\x20\x20temp\x20=\x20fract(sin(temp)\x20*\x20(randomConstants.z\x20+\x20temp));\x0a\x20\x20return\x20temp\x20*\x20(range.y\x20-\x20range.x)\x20+\x20range.x;\x0a}\x0a\x0avec2\x20generateRandomParticle(vec2\x20seed)\x20{\x0a\x20\x20vec2\x20range;\x0a\x20\x20float\x20randomLon,\x20randomLat;\x0a\x0a\x20\x20if(useViewerBounds)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在当前视域范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20lonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20latRange);\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20在数据范围内生成粒子\x0a\x20\x20\x20\x20randomLon\x20=\x20rand(seed,\x20dataLonRange);\x0a\x20\x20\x20\x20randomLat\x20=\x20rand(-seed,\x20dataLatRange);\x0a\x20\x20}\x0a\x0a\x20\x20return\x20vec2(randomLon,\x20randomLat);\x0a}\x0a\x0abool\x20particleOutbound(vec2\x20particle)\x20{\x0a\x20\x20return\x20particle.y\x20<\x20dataLatRange.x\x20||\x20particle.y\x20>\x20dataLatRange.y\x20||\x20particle.x\x20<\x20dataLonRange.x\x20||\x20particle.x\x20>\x20dataLonRange.y;\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20vec2\x20nextParticle\x20=\x20texture(nextParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec4\x20nextSpeed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates);\x0a\x20\x20float\x20speedNorm\x20=\x20nextSpeed.a;\x0a\x20\x20float\x20particleDropRate\x20=\x20dropRate\x20+\x20dropRateBump\x20*\x20speedNorm;\x0a\x0a\x20\x20vec2\x20seed1\x20=\x20nextParticle.xy\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20seed2\x20=\x20nextSpeed.rg\x20+\x20v_textureCoordinates;\x0a\x20\x20vec2\x20randomParticle\x20=\x20generateRandomParticle(seed1);\x0a\x20\x20float\x20randomNumber\x20=\x20rand(seed2,\x20normalRange);\x0a\x0a\x20\x20if(randomNumber\x20<\x20particleDropRate\x20||\x20particleOutbound(nextParticle))\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(randomParticle,\x200.0f,\x201.0f);\x20//\x201.0\x20means\x20this\x20is\x20a\x20random\x20particle\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20fragColor\x20=\x20vec4(nextParticle,\x200.0f,\x200.0f);\x0a\x20\x20}\x0a}\x0a','rows','isPointVisible','applyViewerParameters','domain','magnificationFilter','createSegmentsGeometry','blendFuncDestination','clientWidth','flipY','vmin','createRawRenderState','drawingBufferWidth','Rectangle','frameRate','isDestroy','context','random','length','mode','setOptions','dynamic','windData','windField','mouseHidden','fromGeometry','vertexArray','uniformMap','WindLayer','bounds','persists','commandType','destoryRenderingFramebuffers','options','destination-in','now','particles','layer','speed','CanvasWindField','normal','grid','updateWindData','#ffffff','depthTexture','MIN_VALUE','lineLength','register','defineProperty','calculateSpeed','isDestroyed','lonRange','speedFactor','segmentsColor','PointTrans','show','updateOptions','lineWidth','lat','zIndex','talt','_onMouseDownEvent','segments','wrapT','values','frameState.commandList\x20is\x20undefined','_canrefresh','wheel','EllipsoidalOccluder','_onMouseUpEvent','atan2','minificationFilter','730548nDbdnn','_updateIng','clear','_onMapWhellEvent','bind','type','camera','_updateIng2','update','processWindData','particlesTextures','hidden','BaseLayer','updateViewerParameters','colors','floor','_maxAge','ellipsoid','enabled','max','rendering','pixelSize','onParticlesTextureSizeChange','setDate','_drawLines','owner','globalAlpha','geometry','dropRateBump','SCENE3D','_calcUV','_removedHook','moveTo','lng','toGridXY','frameRateAdjustment','drawingBufferHeight','Cesium','alt','ymax','_randomParticle','toDegrees','_setOptionsHook','clientHeight','execute','strokeStyle','sqrt','isInExtent','17041122pCjFeT','west','speedRate','framebuffer','getPostProcessingPositionShader','initFrameRate','FLOAT','commandToExecute'];_0x1a82=function(){return _0x566c9e;};return _0x1a82();}function getDirection(_0x383761,_0x49378f){function _0x33e481(_0x45ff82,_0x39b99a){return _0x5768(_0x39b99a- -0x340,_0x45ff82);}let _0x17d962=Cesium$2['Math']['toDegrees'](Math[_0x33e481(-0x240,-0x27c)](_0x49378f,_0x383761));return _0x17d962+=_0x17d962<0x0?0x168:0x0,_0x17d962;}const _0x59b750={};_0x59b750['__proto__']=null,_0x59b750['getU']=getU,_0x59b750[_0x2a7d15(0x4c6,0x4a5)]=getV,_0x59b750['getSpeed']=getSpeed,_0x59b750[_0x2a7d15(0x4ff,0x4ef)]=getDirection;var WindUtil=_0x59b750,updatePositionShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20获取当前粒子的位置\x0a\x20\x20vec2\x20currentPos\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20获取粒子的速度\x0a\x20\x20vec2\x20speed\x20=\x20texture(particlesSpeed,\x20v_textureCoordinates).rg;\x0a\x20\x20\x20\x20//\x20计算下一个位置\x0a\x20\x20vec2\x20nextPos\x20=\x20currentPos\x20+\x20speed;\x0a\x0a\x20\x20\x20\x20//\x20将新的位置写入\x20fragColor\x0a\x20\x20fragColor\x20=\x20vec4(nextPos,\x200.0f,\x201.0f);\x0a}\x0a',calculateSpeedShader='#version\x20300\x20es\x0a\x0a//\x20the\x20size\x20of\x20UV\x20textures:\x20width\x20=\x20lon,\x20height\x20=\x20lat\x0auniform\x20sampler2D\x20U;\x20//\x20eastward\x20wind\x0auniform\x20sampler2D\x20V;\x20//\x20northward\x20wind\x0auniform\x20sampler2D\x20currentParticlesPosition;\x20//\x20(lon,\x20lat,\x20lev)\x0a\x0auniform\x20vec2\x20uRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20vRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20speedRange;\x20//\x20(min,\x20max)\x0auniform\x20vec2\x20dimension;\x20//\x20(lon,\x20lat)\x0auniform\x20vec2\x20minimum;\x20//\x20minimum\x20of\x20each\x20dimension\x0auniform\x20vec2\x20maximum;\x20//\x20maximum\x20of\x20each\x20dimension\x0a\x0auniform\x20float\x20speedScaleFactor;\x0auniform\x20float\x20frameRateAdjustment;\x0a\x0ain\x20vec2\x20v_textureCoordinates;\x0a\x0avec2\x20getInterval(vec2\x20maximum,\x20vec2\x20minimum,\x20vec2\x20dimension)\x20{\x0a\x20\x20return\x20(maximum\x20-\x20minimum)\x20/\x20(dimension\x20-\x201.0f);\x0a}\x0a\x0avec2\x20mapPositionToNormalizedIndex2D(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20ensure\x20the\x20range\x20of\x20longitude\x20and\x20latitude\x0a\x20\x20lonLat.x\x20=\x20clamp(lonLat.x,\x20minimum.x,\x20maximum.x);\x0a\x20\x20lonLat.y\x20=\x20clamp(lonLat.y,\x20minimum.y,\x20maximum.y);\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20vec2\x20index2D\x20=\x20vec2(0.0f);\x0a\x20\x20index2D.x\x20=\x20(lonLat.x\x20-\x20minimum.x)\x20/\x20interval.x;\x0a\x20\x20index2D.y\x20=\x20(lonLat.y\x20-\x20minimum.y)\x20/\x20interval.y;\x0a\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20vec2(index2D.x\x20/\x20dimension.x,\x20index2D.y\x20/\x20dimension.y);\x0a\x20\x20return\x20normalizedIndex2D;\x0a}\x0a\x0afloat\x20getWindComponent(sampler2D\x20componentTexture,\x20vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20result\x20=\x20texture(componentTexture,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20result;\x0a}\x0a\x0avec2\x20getWindComponents(vec2\x20lonLat)\x20{\x0a\x20\x20vec2\x20normalizedIndex2D\x20=\x20mapPositionToNormalizedIndex2D(lonLat);\x0a\x20\x20float\x20u\x20=\x20texture(U,\x20normalizedIndex2D).r;\x0a\x20\x20float\x20v\x20=\x20texture(V,\x20normalizedIndex2D).r;\x0a\x20\x20return\x20vec2(u,\x20v);\x0a}\x0a\x0avec2\x20bilinearInterpolation(vec2\x20lonLat)\x20{\x0a\x20\x20float\x20lon\x20=\x20lonLat.x;\x0a\x20\x20float\x20lat\x20=\x20lonLat.y;\x0a\x0a\x20\x20vec2\x20interval\x20=\x20getInterval(maximum,\x20minimum,\x20dimension);\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20grid\x20cell\x20coordinates\x0a\x20\x20float\x20lon0\x20=\x20floor(lon\x20/\x20interval.x)\x20*\x20interval.x;\x0a\x20\x20float\x20lon1\x20=\x20lon0\x20+\x20interval.x;\x0a\x20\x20float\x20lat0\x20=\x20floor(lat\x20/\x20interval.y)\x20*\x20interval.y;\x0a\x20\x20float\x20lat1\x20=\x20lat0\x20+\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Get\x20wind\x20vectors\x20at\x20four\x20corners\x0a\x20\x20vec2\x20v00\x20=\x20getWindComponents(vec2(lon0,\x20lat0));\x0a\x20\x20vec2\x20v10\x20=\x20getWindComponents(vec2(lon1,\x20lat0));\x0a\x20\x20vec2\x20v01\x20=\x20getWindComponents(vec2(lon0,\x20lat1));\x0a\x20\x20vec2\x20v11\x20=\x20getWindComponents(vec2(lon1,\x20lat1));\x0a\x0a\x20\x20\x20\x20//\x20Check\x20if\x20all\x20wind\x20vectors\x20are\x20zero\x0a\x20\x20if(length(v00)\x20==\x200.0f\x20&&\x20length(v10)\x20==\x200.0f\x20&&\x20length(v01)\x20==\x200.0f\x20&&\x20length(v11)\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f,\x200.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20interpolation\x20weights\x0a\x20\x20float\x20s\x20=\x20(lon\x20-\x20lon0)\x20/\x20interval.x;\x0a\x20\x20float\x20t\x20=\x20(lat\x20-\x20lat0)\x20/\x20interval.y;\x0a\x0a\x20\x20\x20\x20//\x20Perform\x20bilinear\x20interpolation\x20on\x20vector\x20components\x0a\x20\x20vec2\x20v0\x20=\x20mix(v00,\x20v10,\x20s);\x0a\x20\x20vec2\x20v1\x20=\x20mix(v01,\x20v11,\x20s);\x0a\x20\x20return\x20mix(v0,\x20v1,\x20t);\x0a}\x0a\x0avec2\x20lengthOfLonLat(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20unit\x20conversion:\x20meters\x20->\x20longitude\x20latitude\x20degrees\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20the\x20length\x20of\x20a\x20degree\x20of\x20latitude\x20and\x20longitude\x20in\x20meters\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x0a\x20\x20float\x20term1\x20=\x20111132.92f;\x0a\x20\x20float\x20term2\x20=\x20559.82f\x20*\x20cos(2.0f\x20*\x20latitude);\x0a\x20\x20float\x20term3\x20=\x201.175f\x20*\x20cos(4.0f\x20*\x20latitude);\x0a\x20\x20float\x20term4\x20=\x200.0023f\x20*\x20cos(6.0f\x20*\x20latitude);\x0a\x20\x20float\x20latLength\x20=\x20term1\x20-\x20term2\x20+\x20term3\x20-\x20term4;\x0a\x0a\x20\x20float\x20term5\x20=\x20111412.84f\x20*\x20cos(latitude);\x0a\x20\x20float\x20term6\x20=\x2093.5f\x20*\x20cos(3.0f\x20*\x20latitude);\x0a\x20\x20float\x20term7\x20=\x200.118f\x20*\x20cos(5.0f\x20*\x20latitude);\x0a\x20\x20float\x20longLength\x20=\x20term5\x20-\x20term6\x20+\x20term7;\x0a\x0a\x20\x20return\x20vec2(longLength,\x20latLength);\x0a}\x0a\x0avec2\x20convertSpeedUnitToLonLat(vec2\x20lonLat,\x20vec2\x20speed)\x20{\x0a\x20\x20vec2\x20lonLatLength\x20=\x20lengthOfLonLat(lonLat);\x0a\x20\x20float\x20u\x20=\x20speed.x\x20/\x20lonLatLength.x;\x0a\x20\x20float\x20v\x20=\x20speed.y\x20/\x20lonLatLength.y;\x0a\x20\x20vec2\x20windVectorInLonLat\x20=\x20vec2(u,\x20v);\x0a\x0a\x20\x20return\x20windVectorInLonLat;\x0a}\x0a\x0avec2\x20calculateSpeedByRungeKutta2(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20see\x20https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages\x20for\x20detail\x0a\x20\x20const\x20float\x20h\x20=\x200.5f;\x0a\x0a\x20\x20vec2\x20y_n\x20=\x20lonLat;\x0a\x20\x20vec2\x20f_n\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20midpoint\x20=\x20y_n\x20+\x200.5f\x20*\x20h\x20*\x20convertSpeedUnitToLonLat(y_n,\x20f_n)\x20*\x20speedScaleFactor;\x0a\x20\x20vec2\x20speed\x20=\x20h\x20*\x20bilinearInterpolation(midpoint)\x20*\x20speedScaleFactor;\x0a\x0a\x20\x20return\x20speed;\x0a}\x0a\x0avec2\x20calculateWindNorm(vec2\x20speed)\x20{\x0a\x20\x20float\x20speedLength\x20=\x20length(speed.xy);\x0a\x20\x20if(speedLength\x20==\x200.0f)\x20{\x0a\x20\x20\x20\x20return\x20vec2(0.0f);\x0a\x20\x20}\x0a\x0a\x20\x20\x20\x20//\x20Clamp\x20speedLength\x20to\x20range\x0a\x20\x20float\x20clampedSpeed\x20=\x20clamp(speedLength,\x20speedRange.x,\x20speedRange.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(clampedSpeed\x20-\x20speedRange.x)\x20/\x20(speedRange.y\x20-\x20speedRange.x);\x0a\x20\x20return\x20vec2(speedLength,\x20normalizedSpeed);\x0a}\x0a\x0aout\x20vec4\x20fragColor;\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20texture\x20coordinate\x20must\x20be\x20normalized\x0a\x20\x20vec2\x20lonLat\x20=\x20texture(currentParticlesPosition,\x20v_textureCoordinates).rg;\x0a\x20\x20vec2\x20speedOrigin\x20=\x20bilinearInterpolation(lonLat);\x0a\x20\x20vec2\x20speed\x20=\x20calculateSpeedByRungeKutta2(lonLat)\x20*\x20frameRateAdjustment;\x0a\x20\x20vec2\x20speedInLonLat\x20=\x20convertSpeedUnitToLonLat(lonLat,\x20speed);\x0a\x0a\x20\x20fragColor\x20=\x20vec4(speedInLonLat,\x20calculateWindNorm(speedOrigin));\x0a}\x0a',postProcessingPositionFragmentShader=_0x2a7d15(0x4ee,0x507);function _0x2a7d15(_0x45db19,_0x114131){return _0x5768(_0x114131-0x37a,_0x45db19);}var renderParticlesFragmentShader=_0x5c10d5(0x2de,0x269),renderParticlesVertexShader='#version\x20300\x20es\x0aprecision\x20highp\x20float;\x0a\x0ain\x20vec2\x20st;\x0ain\x20vec3\x20normal;\x0a\x0auniform\x20sampler2D\x20previousParticlesPosition;\x0auniform\x20sampler2D\x20currentParticlesPosition;\x0auniform\x20sampler2D\x20postProcessingPosition;\x0auniform\x20sampler2D\x20particlesSpeed;\x0a\x0auniform\x20float\x20frameRateAdjustment;\x0auniform\x20float\x20particleHeight;\x0auniform\x20float\x20aspect;\x0auniform\x20float\x20pixelSize;\x0auniform\x20vec2\x20lineWidth;\x0auniform\x20vec2\x20lineLength;\x0auniform\x20vec2\x20domain;\x0auniform\x20bool\x20is3D;\x0a\x0a//\x20添加输出变量传递给片元着色器\x0aout\x20vec4\x20speed;\x0aout\x20float\x20v_segmentPosition;\x0aout\x20vec2\x20textureCoordinate;\x0a\x0a//\x20添加结构体定义\x0astruct\x20adjacentPoints\x20{\x0a\x20\x20vec4\x20previous;\x0a\x20\x20vec4\x20current;\x0a\x20\x20vec4\x20next;\x0a};\x0a\x0avec3\x20convertCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20\x20\x20//\x20WGS84\x20(lon,\x20lat,\x20lev)\x20->\x20ECEF\x20(x,\x20y,\x20z)\x0a\x20\x20\x20\x20//\x20read\x20https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates\x20for\x20detail\x0a\x0a\x20\x20\x20\x20//\x20WGS\x2084\x20geometric\x20constants\x0a\x20\x20float\x20a\x20=\x206378137.0f;\x20//\x20Semi-major\x20axis\x0a\x20\x20float\x20b\x20=\x206356752.3142f;\x20//\x20Semi-minor\x20axis\x0a\x20\x20float\x20e2\x20=\x206.69437999014e-3f;\x20//\x20First\x20eccentricity\x20squared\x0a\x0a\x20\x20float\x20latitude\x20=\x20radians(lonLat.y);\x0a\x20\x20float\x20longitude\x20=\x20radians(lonLat.x);\x0a\x0a\x20\x20float\x20cosLat\x20=\x20cos(latitude);\x0a\x20\x20float\x20sinLat\x20=\x20sin(latitude);\x0a\x20\x20float\x20cosLon\x20=\x20cos(longitude);\x0a\x20\x20float\x20sinLon\x20=\x20sin(longitude);\x0a\x0a\x20\x20float\x20N_Phi\x20=\x20a\x20/\x20sqrt(1.0f\x20-\x20e2\x20*\x20sinLat\x20*\x20sinLat);\x0a\x20\x20float\x20h\x20=\x20particleHeight;\x20//\x20it\x20should\x20be\x20high\x20enough\x20otherwise\x20the\x20particle\x20may\x20not\x20pass\x20the\x20terrain\x20depth\x20test\x0a\x20\x20vec3\x20cartesian\x20=\x20vec3(0.0f);\x0a\x20\x20cartesian.x\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20cosLon;\x0a\x20\x20cartesian.y\x20=\x20(N_Phi\x20+\x20h)\x20*\x20cosLat\x20*\x20sinLon;\x0a\x20\x20cartesian.z\x20=\x20((b\x20*\x20b)\x20/\x20(a\x20*\x20a)\x20*\x20N_Phi\x20+\x20h)\x20*\x20sinLat;\x0a\x20\x20return\x20cartesian;\x0a}\x0a\x0avec4\x20calculateProjectedCoordinate(vec2\x20lonLat)\x20{\x0a\x20\x20if(is3D)\x20{\x0a\x20\x20\x20\x20vec3\x20particlePosition\x20=\x20convertCoordinate(lonLat);\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20使用\x20modelViewProjection\x20矩阵进行投影变换\x0a\x20\x20\x20\x20vec4\x20projectedPosition\x20=\x20czm_modelViewProjection\x20*\x20vec4(particlePosition,\x201.0f);\x0a\x20\x20\x20\x20return\x20projectedPosition;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20vec3\x20position2D\x20=\x20vec3(radians(lonLat.x),\x20radians(lonLat.y),\x200.0f);\x0a\x20\x20\x20\x20return\x20czm_modelViewProjection\x20*\x20vec4(position2D,\x201.0f);\x0a\x20\x20}\x0a}\x0a\x0avec4\x20calculateOffsetOnNormalDirection(vec4\x20pointA,\x20vec4\x20pointB,\x20float\x20offsetSign,\x20float\x20widthFactor)\x20{\x0a\x20\x20vec2\x20aspectVec2\x20=\x20vec2(aspect,\x201.0f);\x0a\x20\x20vec2\x20pointA_XY\x20=\x20(pointA.xy\x20/\x20pointA.w)\x20*\x20aspectVec2;\x0a\x20\x20vec2\x20pointB_XY\x20=\x20(pointB.xy\x20/\x20pointB.w)\x20*\x20aspectVec2;\x0a\x0a\x20\x20\x20\x20//\x20计算方向向量\x0a\x20\x20vec2\x20direction\x20=\x20normalize(pointB_XY\x20-\x20pointA_XY);\x0a\x0a\x20\x20\x20\x20//\x20计算法向量\x0a\x20\x20vec2\x20normalVector\x20=\x20vec2(-direction.y,\x20direction.x);\x0a\x20\x20normalVector.x\x20=\x20normalVector.x\x20/\x20aspect;\x0a\x0a\x20\x20\x20\x20//\x20使用\x20widthFactor\x20调整宽度\x0a\x20\x20float\x20offsetLength\x20=\x20widthFactor\x20*\x20lineWidth.y;\x0a\x20\x20normalVector\x20=\x20offsetLength\x20*\x20normalVector;\x0a\x0a\x20\x20vec4\x20offset\x20=\x20vec4(offsetSign\x20*\x20normalVector,\x200.0f,\x200.0f);\x0a\x20\x20return\x20offset;\x0a}\x0a\x0avoid\x20main()\x20{\x0a\x20\x20\x20\x20//\x20翻转\x20Y\x20轴坐标\x0a\x20\x20vec2\x20flippedIndex\x20=\x20vec2(st.x,\x201.0f\x20-\x20st.y);\x0a\x0a\x20\x20vec2\x20particleIndex\x20=\x20flippedIndex;\x0a\x20\x20speed\x20=\x20texture(particlesSpeed,\x20particleIndex);\x0a\x0a\x20\x20vec2\x20previousPosition\x20=\x20texture(previousParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20currentPosition\x20=\x20texture(currentParticlesPosition,\x20particleIndex).rg;\x0a\x20\x20vec2\x20nextPosition\x20=\x20texture(postProcessingPosition,\x20particleIndex).rg;\x0a\x0a\x20\x20float\x20isAnyRandomPointUsed\x20=\x20texture(postProcessingPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(currentParticlesPosition,\x20particleIndex).a\x20+\x0a\x20\x20\x20\x20texture(previousParticlesPosition,\x20particleIndex).a;\x0a\x0a\x20\x20adjacentPoints\x20projectedCoordinates;\x0a\x20\x20if(isAnyRandomPointUsed\x20>\x200.0f)\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20projectedCoordinates.previous;\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20projectedCoordinates.previous;\x0a\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20projectedCoordinates.previous\x20=\x20calculateProjectedCoordinate(previousPosition);\x0a\x20\x20\x20\x20projectedCoordinates.current\x20=\x20calculateProjectedCoordinate(currentPosition);\x0a\x20\x20\x20\x20projectedCoordinates.next\x20=\x20calculateProjectedCoordinate(nextPosition);\x0a\x20\x20}\x0a\x0a\x20\x20int\x20pointToUse\x20=\x20int(normal.x);\x0a\x20\x20float\x20offsetSign\x20=\x20normal.y;\x0a\x20\x20vec4\x20offset\x20=\x20vec4(0.0f);\x0a\x0a\x20\x20\x20\x20//\x20计算速度相关的宽度和长度因子\x0a\x20\x20float\x20speedLength\x20=\x20clamp(speed.b,\x20domain.x,\x20domain.y);\x0a\x20\x20float\x20normalizedSpeed\x20=\x20(speedLength\x20-\x20domain.x)\x20/\x20(domain.y\x20-\x20domain.x);\x0a\x0a\x20\x20\x20\x20//\x20根据速度计算宽度\x0a\x20\x20float\x20widthFactor\x20=\x20mix(lineWidth.x,\x20lineWidth.y,\x20normalizedSpeed);\x0a\x20\x20widthFactor\x20*=\x20(pointToUse\x20<\x200\x20?\x201.0f\x20:\x200.5f);\x20//\x20头部更宽，尾部更窄\x0a\x0a\x20\x20\x20\x20//\x20Calculate\x20length\x20based\x20on\x20speed\x0a\x20\x20float\x20lengthFactor\x20=\x20mix(lineLength.x,\x20lineLength.y,\x20normalizedSpeed)\x20*\x20pixelSize;\x0a\x0a\x20\x20if(pointToUse\x20==\x201)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20头部位置\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.previous,\x20projectedCoordinates.current,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20projectedCoordinates.previous\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x200.0f;\x20//\x20头部\x0a\x20\x20}\x20else\x20if(pointToUse\x20==\x20-1)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20//\x20Get\x20direction\x20and\x20normalize\x20it\x20to\x20length\x201.0\x0a\x20\x20\x20\x20vec4\x20direction\x20=\x20normalize(projectedCoordinates.next\x20-\x20projectedCoordinates.current);\x0a\x20\x20\x20\x20vec4\x20extendedPosition\x20=\x20projectedCoordinates.current\x20+\x20direction\x20*\x20lengthFactor;\x0a\x0a\x20\x20\x20\x20offset\x20=\x20pixelSize\x20*\x20calculateOffsetOnNormalDirection(projectedCoordinates.current,\x20extendedPosition,\x20offsetSign,\x20widthFactor);\x0a\x20\x20\x20\x20gl_Position\x20=\x20extendedPosition\x20+\x20offset;\x0a\x20\x20\x20\x20v_segmentPosition\x20=\x201.0f;\x20//\x20尾部\x0a\x20\x20}\x0a\x0a\x20\x20textureCoordinate\x20=\x20st;\x0a}\x0a';const {ShaderSource:ShaderSource$1}=mars3d__namespace[_0x5c10d5(0x1ac,0x1ea)];class ShaderManager{static['getCalculateSpeedShader'](){const _0x51b5e2={};function _0xe80323(_0x399f86,_0x412942){return _0x5c10d5(_0x412942,_0x399f86- -0x356);}return _0x51b5e2[_0xe80323(-0xe1,-0x8e)]=[calculateSpeedShader],new ShaderSource$1(_0x51b5e2);}static['getUpdatePositionShader'](){const _0x529260={};return _0x529260['sources']=[updatePositionShader],new ShaderSource$1(_0x529260);}static['getSegmentDrawVertexShader'](){const _0x2888cd={};return _0x2888cd['sources']=[renderParticlesVertexShader],new ShaderSource$1(_0x2888cd);}static['getSegmentDrawFragmentShader'](){const _0x23e8e0={};function _0x156061(_0x10ae9e,_0x24161d){return _0x2a7d15(_0x10ae9e,_0x24161d- -0x134);}return _0x23e8e0[_0x156061(0x429,0x3bc)]=[renderParticlesFragmentShader],new ShaderSource$1(_0x23e8e0);}static[_0x2a7d15(0x49d,0x474)](){const _0x5afef1={};return _0x5afef1['sources']=[postProcessingPositionFragmentShader],new ShaderSource$1(_0x5afef1);}}const {BufferUsage:BufferUsage$1,ClearCommand:ClearCommand$1,Color:Color$2,ComputeCommand,DrawCommand,Geometry:Geometry$1,Matrix4,Pass:Pass$1,PrimitiveType:PrimitiveType$1,RenderState,ShaderProgram,ShaderSource,VertexArray:VertexArray$1,defaultValue,defined,destroyObject}=mars3d__namespace[_0x5c10d5(0x1ce,0x1ea)];class CustomPrimitive{constructor(_0x5bd720){this['commandType']=_0x5bd720['commandType'],this['geometry']=_0x5bd720['geometry'],this['attributeLocations']=_0x5bd720[_0x42918c(0x201,0x17b)],this['primitiveType']=_0x5bd720['primitiveType'],this['uniformMap']=_0x5bd720['uniformMap']||{},this[_0x42918c(0x278,0x217)]=_0x5bd720[_0xf6973c(-0x7b,-0xb1)];function _0xf6973c(_0x47bc58,_0x411ef7){return _0x5c10d5(_0x411ef7,_0x47bc58- -0x2fc);}this['fragmentShaderSource']=_0x5bd720['fragmentShaderSource'],this['rawRenderState']=_0x5bd720[_0xf6973c(-0xe1,-0x15b)],this['framebuffer']=_0x5bd720['framebuffer'],this[_0x42918c(0x25b,0x254)]=_0x5bd720['outputTexture'],this['autoClear']=defaultValue(_0x5bd720['autoClear'],![]),this['preExecute']=_0x5bd720[_0xf6973c(-0xbe,-0x113)],this['show']=!![];function _0x42918c(_0x2cc9c6,_0x4da72e){return _0x2a7d15(_0x4da72e,_0x2cc9c6- -0x284);}this['commandToExecute']=undefined,this[_0x42918c(0x224,0x2ac)]=undefined,this['isDynamic']=_0x5bd720['isDynamic']??(()=>!![]),this['autoClear']&&(this[_0xf6973c(-0xcf,-0xe5)]=new ClearCommand$1({'color':new Color$2(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':this['framebuffer'],'pass':Pass$1['OPAQUE']}));}['createCommand'](_0x2777d8){function _0xb982bf(_0x2f07ac,_0x420099){return _0x2a7d15(_0x420099,_0x2f07ac- -0x29a);}function _0x1d9c47(_0x506fdf,_0x82ee77){return _0x2a7d15(_0x82ee77,_0x506fdf- -0x554);}if(this[_0x1d9c47(-0x2e,-0xb2)]==='Draw'){const _0x1312ca={};_0x1312ca[_0x1d9c47(-0x3d,-0x34)]=_0x2777d8,_0x1312ca[_0x1d9c47(-0xf9,-0xf9)]=this[_0xb982bf(0x1c1,0x1a9)],_0x1312ca[_0xb982bf(0x1eb,0x1b9)]=this['attributeLocations'],_0x1312ca['bufferUsage']=BufferUsage$1['STATIC_DRAW'];const _0x54864a=VertexArray$1['fromGeometry'](_0x1312ca),_0x24bd17={};_0x24bd17['context']=_0x2777d8,_0x24bd17['vertexShaderSource']=this[_0xb982bf(0x262,0x2c6)],_0x24bd17['fragmentShaderSource']=this['fragmentShaderSource'],_0x24bd17[_0xb982bf(0x1eb,0x210)]=this[_0x1d9c47(-0xcf,-0x10f)];const _0x458af4=ShaderProgram['fromCache'](_0x24bd17),_0x4956c0=RenderState['fromCache'](this['rawRenderState']),_0x31306a={};return _0x31306a['owner']=this,_0x31306a[_0x1d9c47(-0x33,-0xa6)]=_0x54864a,_0x31306a[_0xb982bf(0x21c,0x1bc)]=this[_0x1d9c47(-0x9e,-0x3e)],_0x31306a['modelMatrix']=Matrix4[_0xb982bf(0x238,0x2b5)],_0x31306a['renderState']=_0x4956c0,_0x31306a[_0x1d9c47(-0x95,-0xd5)]=_0x458af4,_0x31306a[_0x1d9c47(-0xe1,-0x8f)]=this[_0xb982bf(0x1d9,0x246)],_0x31306a[_0x1d9c47(-0x32,0x24)]=this[_0xb982bf(0x288,0x262)],_0x31306a['pass']=Pass$1[_0x1d9c47(-0xc5,-0xe4)],new DrawCommand(_0x31306a);}else{if(this['commandType']===_0xb982bf(0x243,0x1d9)){const _0x525fcb={};return _0x525fcb[_0x1d9c47(-0xfb,-0x170)]=this,_0x525fcb['fragmentShaderSource']=this['fragmentShaderSource'],_0x525fcb['uniformMap']=this['uniformMap'],_0x525fcb['outputTexture']=this['outputTexture'],_0x525fcb[_0x1d9c47(-0x2f,-0x8d)]=!![],new ComputeCommand(_0x525fcb);}else throw new Error(_0x1d9c47(-0x5d,-0x1a));}}['setGeometry'](_0x31b4f8,_0x553a6d){this[_0xa50743(-0x88,-0xa6)]=_0x553a6d;function _0x583606(_0x558da0,_0x573455){return _0x2a7d15(_0x558da0,_0x573455- -0x455);}function _0xa50743(_0x12ec36,_0x4d5ba2){return _0x5c10d5(_0x4d5ba2,_0x12ec36- -0x268);}defined(this['commandToExecute'])&&(this['commandToExecute'][_0xa50743(0x3e,0x17)]=VertexArray$1[_0x583606(0xed,0xcb)]({'context':_0x31b4f8,'geometry':this[_0x583606(-0x67,0x6)],'attributeLocations':this['attributeLocations'],'bufferUsage':BufferUsage$1['STATIC_DRAW']}));}['update'](_0x1c2b4c){if(!this['isDynamic']())return;if(!this['show']||!defined(_0x1c2b4c))return;!defined(this[_0x16a3ce(-0x2d0,-0x26a)])&&(this['commandToExecute']=this['createCommand'](_0x1c2b4c['context']));defined(this['preExecute'])&&this['preExecute']();if(!_0x1c2b4c[_0x26117(0x4d,0x29)]){console['warn'](_0x16a3ce(-0x30e,-0x340));return;}function _0x16a3ce(_0x910689,_0x46427f){return _0x2a7d15(_0x46427f,_0x910689- -0x747);}defined(this[_0x26117(-0x4d,0x15)])&&_0x1c2b4c['commandList']['push'](this[_0x16a3ce(-0x29f,-0x323)]);function _0x26117(_0x47b53d,_0x4b2c8b){return _0x2a7d15(_0x47b53d,_0x4b2c8b- -0x493);}defined(this['commandToExecute'])&&_0x1c2b4c[_0x16a3ce(-0x28b,-0x233)]['push'](this[_0x16a3ce(-0x2d0,-0x2e1)]);}[_0x5c10d5(0x31a,0x2be)](){return![];}[_0x5c10d5(0x230,0x286)](){function _0x304ebd(_0x2127bb,_0x3ac713){return _0x5c10d5(_0x3ac713,_0x2127bb-0x2cd);}function _0x58eee2(_0x1481fb,_0x3c3e21){return _0x5c10d5(_0x3c3e21,_0x1481fb- -0x33d);}if(defined(this['commandToExecute'])){var _0x5909cd;(_0x5909cd=this['commandToExecute']['shaderProgram'])===null||_0x5909cd===void 0x0||_0x5909cd[_0x304ebd(0x553,0x518)](),this[_0x58eee2(-0x141,-0x137)][_0x304ebd(0x511,0x501)]=undefined;}return destroyObject(this);}}function deepMerge(_0x43d5d5,_0x433eda){if(!_0x43d5d5)return _0x433eda;if(!_0x433eda)return _0x43d5d5;const _0x5882e1={..._0x433eda},_0x1fb32d=_0x5882e1;function _0x239063(_0x9be154,_0x3dbcb8){return _0x2a7d15(_0x9be154,_0x3dbcb8- -0x141);}for(const _0x146fbd in _0x43d5d5){if(Object['prototype']['hasOwnProperty'][_0x239063(0x3a0,0x35d)](_0x43d5d5,_0x146fbd)){const _0x10ce20=_0x43d5d5[_0x146fbd],_0x3cf249=_0x433eda[_0x146fbd];if(Array['isArray'](_0x10ce20)){_0x1fb32d[_0x146fbd]=_0x10ce20['slice']();continue;}if(_0x10ce20&&typeof _0x10ce20==='object'){_0x1fb32d[_0x146fbd]=deepMerge(_0x10ce20,_0x3cf249||{});continue;}_0x10ce20!==undefined&&(_0x1fb32d[_0x146fbd]=_0x10ce20);}}return _0x1fb32d;}const {Cartesian2:Cartesian2$1,FrameRateMonitor,PixelDatatype:PixelDatatype$1,PixelFormat:PixelFormat$1,Sampler:Sampler$1,Texture:Texture$1,TextureMagnificationFilter:TextureMagnificationFilter$1,TextureMinificationFilter:TextureMinificationFilter$1}=mars3d__namespace['Cesium'];class WindParticlesComputing{constructor(_0x194729,_0x3e4262,_0x23b133,_0x1d65c6,_0xc32aa4){this['context']=_0x194729,this[_0x5f130f(0x224,0x26a)]=_0x23b133,this['viewerParameters']=_0x1d65c6,this['windData']=_0x3e4262;function _0x4a652e(_0x5068ec,_0x27fa5f){return _0x5c10d5(_0x5068ec,_0x27fa5f- -0x20e);}this[_0x5f130f(0x25f,0x257)]=0x3c,this['frameRateAdjustment']=0x1;function _0x5f130f(_0x25ce20,_0x2926a6){return _0x2a7d15(_0x25ce20,_0x2926a6- -0x2be);}const _0x11f4f6={};_0x11f4f6[_0x4a652e(0x56,-0x6)]=_0xc32aa4,_0x11f4f6['samplingWindow']=0x1,_0x11f4f6['quietPeriod']=0x0,this[_0x5f130f(0x243,0x1d5)]=new FrameRateMonitor(_0x11f4f6),this[_0x5f130f(0x1d0,0x1b7)](),this['createWindTextures'](),this[_0x4a652e(0x36,0x4b)](),this['createComputingPrimitives']();}['initFrameRate'](){const _0x171c2a=()=>{function _0x41c82d(_0x37b130,_0x392a03){return _0x5768(_0x37b130- -0x14e,_0x392a03);}function _0x3d7c23(_0x2674cd,_0x2350d5){return _0x5768(_0x2674cd- -0x3c2,_0x2350d5);}this[_0x41c82d(-0x35,-0x5f)][_0x3d7c23(-0x277,-0x29e)]>0x14&&(this[_0x3d7c23(-0x227,-0x235)]=this[_0x3d7c23(-0x2a9,-0x28b)]['lastFramesPerSecond'],this['frameRateAdjustment']=0x3c/Math[_0x3d7c23(-0x2e9,-0x34f)](this[_0x41c82d(0x4d,0xe)],0x1));};function _0x3cec70(_0x45564a,_0x1c641c){return _0x5c10d5(_0x45564a,_0x1c641c-0x285);}_0x171c2a();const _0x4dc635=setInterval(_0x171c2a,0x3e8),_0x3e2633=this['destroy'][_0x3cec70(0x4cb,0x44e)](this);function _0xa0e5df(_0x59c4c7,_0x4e11c0){return _0x2a7d15(_0x4e11c0,_0x59c4c7- -0x2cf);}this[_0xa0e5df(0x232,0x268)]=()=>{clearInterval(_0x4dc635),_0x3e2633();};}[_0x2a7d15(0x44f,0x4a9)](){const _0x5dad32={};_0x5dad32[_0x1681bf(0x207,0x253)]=TextureMinificationFilter$1['LINEAR'],_0x5dad32[_0x1681bf(0x2b0,0x320)]=TextureMagnificationFilter$1['LINEAR'];function _0x2b443f(_0x59d8eb,_0x210ef4){return _0x2a7d15(_0x210ef4,_0x59d8eb- -0x512);}function _0x1681bf(_0x152e2e,_0x2b2785){return _0x5c10d5(_0x152e2e,_0x2b2785-0x8f);}const _0x383f6f={'context':this[_0x1681bf(0x336,0x32b)],'width':this['windData']['width'],'height':this[_0x1681bf(0x2b3,0x331)]['height'],'pixelFormat':PixelFormat$1['RED'],'pixelDatatype':PixelDatatype$1['FLOAT'],'flipY':this['options'][_0x2b443f(-0x2,-0x84)]??![],'sampler':new Sampler$1(_0x5dad32)};this[_0x1681bf(0x319,0x2a1)]={'U':new Texture$1({..._0x383f6f,'source':{'arrayBufferView':new Float32Array(this['windData']['u']['array'])}}),'V':new Texture$1({..._0x383f6f,'source':{'arrayBufferView':new Float32Array(this['windData']['v'][_0x2b443f(-0x50,-0xd2)])}})};}[_0x2a7d15(0x49f,0x4d4)](){const _0x509a27={};function _0x5ebbc9(_0x3b2a4c,_0x29bd41){return _0x2a7d15(_0x3b2a4c,_0x29bd41- -0x133);}_0x509a27['minificationFilter']=TextureMinificationFilter$1[_0x44adaa(0x3e8,0x3e8)],_0x509a27[_0x44adaa(0x475,0x430)]=TextureMagnificationFilter$1['NEAREST'];const _0x35ecb9={'context':this[_0x44adaa(0x480,0x4b6)],'width':this[_0x44adaa(0x491,0x46f)][_0x5ebbc9(0x391,0x38e)],'height':this['options'][_0x44adaa(0x42a,0x42a)],'pixelFormat':PixelFormat$1['RGBA'],'pixelDatatype':PixelDatatype$1[_0x44adaa(0x3df,0x3e9)],'flipY':![],'source':{'arrayBufferView':new Float32Array(this[_0x5ebbc9(0x3e6,0x3f5)][_0x44adaa(0x42a,0x41a)]*this['options']['particlesTextureSize']*0x4)['fill'](0x0)},'sampler':new Sampler$1(_0x509a27)};function _0x44adaa(_0x187cc3,_0x3cec46){return _0x2a7d15(_0x3cec46,_0x187cc3- -0x97);}this['particlesTextures']={'previousParticlesPosition':new Texture$1(_0x35ecb9),'currentParticlesPosition':new Texture$1(_0x35ecb9),'nextParticlesPosition':new Texture$1(_0x35ecb9),'postProcessingPosition':new Texture$1(_0x35ecb9),'particlesSpeed':new Texture$1(_0x35ecb9)};}['destroyParticlesTextures'](){Object['values'](this['particlesTextures'])['forEach'](_0x35efa4=>_0x35efa4['destroy']());}[_0x2a7d15(0x4b7,0x4cc)](){function _0x538f1f(_0x4063c7,_0x5ba030){return _0x2a7d15(_0x5ba030,_0x4063c7- -0x579);}function _0xa9ce5a(_0x43b8e9,_0x222ef6){return _0x2a7d15(_0x43b8e9,_0x222ef6- -0x540);}this['primitives']={'calculateSpeed':new CustomPrimitive({'commandType':_0x538f1f(-0x9c,-0xf8),'uniformMap':{'U':()=>this['windTextures']['U'],'V':()=>this['windTextures']['V'],'uRange':()=>new Cartesian2$1(this[_0x538f1f(-0x5c,-0x97)]['u']['min'],this[_0xa9ce5a(0x57,-0x23)]['u']['max']),'vRange':()=>new Cartesian2$1(this[_0x538f1f(-0x5c,-0xaf)]['v']['min'],this[_0x538f1f(-0x5c,-0x1f)]['v']['max']),'speedRange':()=>new Cartesian2$1(this['windData']['speed'][_0x538f1f(-0xda,-0xa3)],this['windData'][_0xa9ce5a(0x43,-0x13)]['max']),'currentParticlesPosition':()=>this['particlesTextures']['currentParticlesPosition'],'speedScaleFactor':()=>{function _0x143ea2(_0x5247fc,_0x2c8e9f){return _0xa9ce5a(_0x5247fc,_0x2c8e9f- -0x28);}function _0x293b7f(_0xd1ccd9,_0x351a54){return _0xa9ce5a(_0x351a54,_0xd1ccd9-0x30f);}return(this['viewerParameters']['pixelSize']+0x32)*this[_0x143ea2(-0x9e,-0x40)][_0x143ea2(-0x1b,-0x2d)];},'frameRateAdjustment':()=>this['frameRateAdjustment'],'dimension':()=>new Cartesian2$1(this[_0xa9ce5a(-0x75,-0x23)]['width'],this['windData'][_0x538f1f(-0xc7,-0xc8)]),'minimum':()=>new Cartesian2$1(this['windData']['bounds']['west'],this[_0x538f1f(-0x5c,-0x1f)][_0xa9ce5a(-0x98,-0x1c)]['south']),'maximum':()=>new Cartesian2$1(this['windData'][_0xa9ce5a(-0x54,-0x1c)]['east'],this[_0xa9ce5a(-0x27,-0x23)]['bounds'][_0x538f1f(-0x100,-0x176)])},'fragmentShaderSource':ShaderManager['getCalculateSpeedShader'](),'outputTexture':this[_0x538f1f(-0x12f,-0x19f)]['particlesSpeed'],'preExecute':()=>{const _0x4e7d5f=this[_0x4e25ad(0x3b2,0x38e)][_0x2a8cbb(0x10f,0x99)];this[_0x4e25ad(0x3c8,0x38e)]['previousParticlesPosition']=this[_0x4e25ad(0x358,0x38e)]['currentParticlesPosition'],this['particlesTextures']['currentParticlesPosition']=this['particlesTextures']['postProcessingPosition'],this[_0x4e25ad(0x3ee,0x38e)]['postProcessingPosition']=_0x4e7d5f;function _0x4e25ad(_0x223285,_0xdeba05){return _0x538f1f(_0xdeba05-0x4bd,_0x223285);}function _0x2a8cbb(_0x5c9891,_0x5ca20b){return _0x538f1f(_0x5c9891-0x1c5,_0x5ca20b);}this['primitives']['calculateSpeed'][_0x2a8cbb(0xc3,0x70)]&&(this['primitives'][_0x2a8cbb(0x184,0x175)]['commandToExecute'][_0x2a8cbb(0x12b,0xc2)]=this['particlesTextures']['particlesSpeed']);},'isDynamic':()=>this['options']['dynamic']}),'updatePosition':new CustomPrimitive({'commandType':_0xa9ce5a(-0x42,-0x63),'uniformMap':{'currentParticlesPosition':()=>this[_0x538f1f(-0x12f,-0x18e)]['currentParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0xa9ce5a(-0x8f,-0x54)]},'fragmentShaderSource':ShaderManager['getUpdatePositionShader'](),'outputTexture':this[_0x538f1f(-0x12f,-0xdb)][_0x538f1f(-0xeb,-0xac)],'preExecute':()=>{function _0x1a7403(_0x15ca71,_0x4706cf){return _0x538f1f(_0x15ca71- -0xf0,_0x4706cf);}function _0x140c4c(_0x404baa,_0x12e51e){return _0x538f1f(_0x404baa-0x3fa,_0x12e51e);}this['primitives']['updatePosition'][_0x140c4c(0x2f8,0x2fe)]&&(this[_0x140c4c(0x33c,0x329)]['updatePosition']['commandToExecute'][_0x140c4c(0x360,0x398)]=this[_0x140c4c(0x2cb,0x28e)][_0x1a7403(-0x1db,-0x214)]);},'isDynamic':()=>this[_0x538f1f(-0x51,-0x6e)][_0x538f1f(-0x5d,-0x81)]}),'postProcessingPosition':new CustomPrimitive({'commandType':_0x538f1f(-0x9c,-0x10a),'uniformMap':{'nextParticlesPosition':()=>this[_0xa9ce5a(-0xd2,-0xf6)]['nextParticlesPosition'],'particlesSpeed':()=>this['particlesTextures'][_0x538f1f(-0x8d,-0x56)],'lonRange':()=>this[_0xa9ce5a(-0x14,-0x5e)][_0xa9ce5a(-0x4c,-0x6)],'latRange':()=>this['viewerParameters']['latRange'],'dataLonRange':()=>new Cartesian2$1(this[_0xa9ce5a(-0xa7,-0x23)]['bounds']['west'],this['windData']['bounds']['east']),'dataLatRange':()=>new Cartesian2$1(this['windData']['bounds'][_0x538f1f(-0xb2,-0xa1)],this[_0x538f1f(-0x5c,-0x64)][_0xa9ce5a(0x1d,-0x1c)]['north']),'randomCoefficient':function(){return Math['random']();},'dropRate':()=>this['options']['dropRate'],'dropRateBump':()=>this['options'][_0xa9ce5a(-0xd3,-0xe4)],'useViewerBounds':()=>this[_0x538f1f(-0x51,-0xd6)][_0xa9ce5a(0x33,-0x47)]},'fragmentShaderSource':ShaderManager['getPostProcessingPositionShader'](),'outputTexture':this[_0xa9ce5a(-0xc7,-0xf6)]['postProcessingPosition'],'preExecute':()=>{function _0x4a33be(_0xe3e5d1,_0xec4049){return _0x538f1f(_0xe3e5d1-0x518,_0xec4049);}function _0x2be163(_0xb031a8,_0x449d74){return _0x538f1f(_0xb031a8- -0x1e9,_0x449d74);}this[_0x2be163(-0x2a7,-0x304)]['postProcessingPosition'][_0x4a33be(0x416,0x3b3)]&&(this[_0x2be163(-0x2a7,-0x26b)][_0x2be163(-0x293,-0x2bc)]['commandToExecute']['outputTexture']=this['particlesTextures'][_0x2be163(-0x293,-0x27b)]);},'isDynamic':()=>this['options'][_0x538f1f(-0x5d,-0xd4)]})};}['reCreateWindTextures'](){this[_0x9e8c75(0x148,0x1b3)]['U'][_0x9e8c75(0x1d5,0x227)]();function _0x281992(_0x138c13,_0x59ace1){return _0x2a7d15(_0x138c13,_0x59ace1- -0x31a);}function _0x9e8c75(_0x2d0ee3,_0x48d280){return _0x2a7d15(_0x2d0ee3,_0x48d280- -0x2da);}this['windTextures']['V']['destroy'](),this[_0x9e8c75(0x15b,0x1cf)]();}[_0x2a7d15(0x4e3,0x531)](_0x3416a0){this['windData']=_0x3416a0,this['reCreateWindTextures']();}[_0x5c10d5(0x339,0x2c4)](_0xdc1e39){const _0xa64e5a=_0xdc1e39['flipY']!==undefined&&_0xdc1e39['flipY']!==this['options']['flipY'];this['options']=deepMerge(_0xdc1e39,this[_0x3bfe4f(-0xda,-0x61)]);function _0x3bfe4f(_0x311296,_0x110097){return _0x2a7d15(_0x311296,_0x110097- -0x589);}function _0xd6899a(_0x33553d,_0x356705){return _0x5c10d5(_0x356705,_0x33553d- -0x496);}_0xa64e5a&&this[_0xd6899a(-0x26f,-0x25d)]();}[_0x5c10d5(0x1fc,0x1ce)](_0x499a63){function _0x435aa6(_0x565dc6,_0xe5b6a3){return _0x2a7d15(_0xe5b6a3,_0x565dc6-0x44);}const {array:_0x3c7cee}=_0x499a63;let {min:_0x51b6d1,max:_0xac23fd}=_0x499a63;const _0x220806=new Float32Array(_0x3c7cee[_0x174d69(0x31c,0x2bd)]);function _0x174d69(_0x3b86cf,_0x800b72){return _0x5c10d5(_0x800b72,_0x3b86cf-0x7e);}_0x51b6d1===undefined&&(console['warn'](_0x174d69(0x2ea,0x300)),_0x51b6d1=Math['min'](..._0x3c7cee));_0xac23fd===undefined&&(console['warn']('max\x20is\x20undefined,\x20calculate\x20max'),_0xac23fd=Math['max'](..._0x3c7cee));const _0x5b49a4=Math['max'](Math[_0x174d69(0x2aa,0x289)](_0x51b6d1),Math['abs'](_0xac23fd));for(let _0x64a425=0x0;_0x64a425<_0x3c7cee[_0x174d69(0x31c,0x2c4)];_0x64a425++){const _0x2975e1=_0x3c7cee[_0x64a425]/_0x5b49a4;_0x220806[_0x64a425]=_0x2975e1;}return _0x220806;}['destroy'](){Object['values'](this[_0x37897f(-0x10,-0x8f)])['forEach'](_0x289783=>_0x289783['destroy']()),Object['values'](this['particlesTextures'])['forEach'](_0x35a20d=>_0x35a20d['destroy']()),Object['values'](this[_0x18409f(0x372,0x3ef)])[_0x18409f(0x3a5,0x31f)](_0x157ad5=>_0x157ad5['destroy']());function _0x37897f(_0x59bdf7,_0x110131){return _0x2a7d15(_0x110131,_0x59bdf7- -0x49d);}function _0x18409f(_0x2d2a15,_0x1af565){return _0x2a7d15(_0x1af565,_0x2d2a15- -0x149);}this['frameRateMonitor']['destroy']();}}const {Appearance,BufferUsage,Cartesian2,Color:Color$1,ComponentDatatype,Framebuffer,Geometry,GeometryAttribute,GeometryAttributes,PixelDatatype,PixelFormat,PrimitiveType,Sampler,SceneMode,Texture,TextureMagnificationFilter,TextureMinificationFilter,TextureWrap,VertexArray}=mars3d__namespace['Cesium'];class WindParticlesRendering{constructor(_0x5e677b,_0x20421d,_0x6ac33,_0x1f97af){this['context']=_0x5e677b,this['options']=_0x20421d,this['viewerParameters']=_0x6ac33,this['computing']=_0x1f97af;(typeof this[_0x5c84df(0x93,0x7d)][_0x2c5622(-0x2c,-0x77)]!=='number'||this[_0x5c84df(0x93,0x91)][_0x5c84df(0x2c,0x63)]<=0x0)&&(console['error']('Invalid\x20particlesTextureSize.\x20Using\x20default\x20value\x20of\x20256.'),this[_0x2c5622(-0x7,-0x10)]['particlesTextureSize']=0x100);function _0x2c5622(_0xadb985,_0x33e2a7){return _0x2a7d15(_0xadb985,_0x33e2a7- -0x538);}this[_0x2c5622(-0xd5,-0x52)]=this['createColorTableTexture'](),this['textures']=this['createRenderingTextures'](),this[_0x2c5622(-0x1,-0x5a)]=this['createRenderingFramebuffers']();function _0x5c84df(_0x1ca495,_0xa50d30){return _0x2a7d15(_0xa50d30,_0x1ca495- -0x495);}this['primitives']=this[_0x5c84df(0x5,-0x5d)]();}['createRenderingTextures'](){const _0x2c7f4e={};_0x2c7f4e[_0x38e636(0x3ec,0x3e4)]=this['context'],_0x2c7f4e['width']=this[_0x38e636(0x362,0x3e4)]['drawingBufferWidth'],_0x2c7f4e[_0x38e636(0x3eb,0x37f)]=this[_0x38e636(0x3e0,0x3e4)][_0x3e5023(-0x5,-0x53)],_0x2c7f4e['pixelFormat']=PixelFormat[_0x38e636(0x31c,0x396)];function _0x38e636(_0x5303c2,_0x25311e){return _0x2a7d15(_0x5303c2,_0x25311e- -0x133);}_0x2c7f4e['pixelDatatype']=PixelDatatype['UNSIGNED_BYTE'];const _0x312a0e=_0x2c7f4e;function _0x3e5023(_0x5e9b4f,_0x7515e1){return _0x2a7d15(_0x5e9b4f,_0x7515e1- -0x4b7);}const _0x3ec0b1={};_0x3ec0b1['context']=this['context'],_0x3ec0b1['width']=this[_0x3e5023(0xba,0x60)][_0x3e5023(-0x1c,0x5c)],_0x3ec0b1['height']=this[_0x38e636(0x37a,0x3e4)][_0x3e5023(-0x18,-0x53)],_0x3ec0b1['pixelFormat']=PixelFormat[_0x3e5023(0x83,0x1)],_0x3ec0b1['pixelDatatype']=PixelDatatype['UNSIGNED_INT'];const _0xab4d8e=_0x3ec0b1;return{'segmentsColor':new Texture(_0x312a0e),'segmentsDepth':new Texture(_0xab4d8e)};}['createRenderingFramebuffers'](){function _0x35c836(_0x319828,_0x457683){return _0x2a7d15(_0x319828,_0x457683- -0x10);}const _0x198523={};_0x198523['context']=this[_0x50446d(0x373,0x332)];function _0x50446d(_0x44f443,_0x102773){return _0x5c10d5(_0x44f443,_0x102773-0x96);}return _0x198523['colorTextures']=[this['textures'][_0x35c836(0x568,0x52c)]],_0x198523[_0x50446d(0x3a2,0x34e)]=this['textures']['segmentsDepth'],{'segments':new Framebuffer(_0x198523)};}[_0x5c10d5(0x2f0,0x2ac)](){function _0x1ba292(_0x3cfc8d,_0x3077cc){return _0x5c10d5(_0x3cfc8d,_0x3077cc- -0x19f);}function _0x52f202(_0x1a5fca,_0x1448ac){return _0x5c10d5(_0x1a5fca,_0x1448ac- -0x2b8);}Object[_0x1ba292(0x57,0x1e)](this[_0x1ba292(0x65,0xc4)])['forEach'](_0x58d034=>{_0x58d034['destroy']();});}[_0x2a7d15(0x4ce,0x506)](){const _0x2d11fa=new Float32Array(this[_0x582e72(-0x9b,-0x8b)][_0x4a532d(-0x24a,-0x1f2)]['flatMap'](_0x151ccd=>{const _0x2335a0=Color$1['fromCssColorString'](_0x151ccd);function _0x37010b(_0x3d669e,_0x317dbc){return _0x582e72(_0x3d669e-0x4fc,_0x317dbc);}return[_0x2335a0[_0x37010b(0x42c,0x48d)],_0x2335a0['green'],_0x2335a0['blue'],_0x2335a0['alpha']];})),_0x41af71={};_0x41af71[_0x4a532d(-0x25f,-0x201)]=TextureMinificationFilter['LINEAR'],_0x41af71[_0x582e72(-0xb7,-0xb4)]=TextureMagnificationFilter['LINEAR'],_0x41af71[_0x582e72(-0x109,-0x13f)]=TextureWrap['CLAMP_TO_EDGE'],_0x41af71[_0x582e72(-0x7d,-0xfd)]=TextureWrap['CLAMP_TO_EDGE'];function _0x582e72(_0x59ab3a,_0x400830){return _0x5c10d5(_0x400830,_0x59ab3a- -0x348);}function _0x4a532d(_0x3ca71b,_0x638126){return _0x5c10d5(_0x3ca71b,_0x638126- -0x3c5);}return new Texture({'context':this[_0x4a532d(-0xcd,-0x129)],'width':this['options'][_0x582e72(-0x175,-0x1fc)]['length'],'height':0x1,'pixelFormat':PixelFormat[_0x4a532d(-0x11e,-0x177)],'pixelDatatype':PixelDatatype['FLOAT'],'sampler':new Sampler(_0x41af71),'source':{'width':this['options'][_0x4a532d(-0x190,-0x1f2)][_0x582e72(-0xaa,-0x120)],'height':0x1,'arrayBufferView':_0x2d11fa}});}[_0x5c10d5(0x243,0x292)](){const _0x31a9ed=0x4,_0x28d238=this['options']['particlesTextureSize'];let _0x32a2cb=[];for(let _0x54148e=0x0;_0x54148e<_0x28d238;_0x54148e++){for(let _0x55bbc0=0x0;_0x55bbc0<_0x28d238;_0x55bbc0++){for(let _0x5e9da1=0x0;_0x5e9da1<_0x31a9ed;_0x5e9da1++){_0x32a2cb['push'](_0x54148e/_0x28d238),_0x32a2cb['push'](_0x55bbc0/_0x28d238);}}}_0x32a2cb=new Float32Array(_0x32a2cb);const _0x8854cf=this[_0x5d530f(0x2a4,0x294)][_0x5d530f(0x23d,0x1e0)]**0x2;let _0x14dd77=[];for(let _0x9ad60c=0x0;_0x9ad60c<_0x8854cf;_0x9ad60c++){_0x14dd77['push'](-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0);}_0x14dd77=new Float32Array(_0x14dd77);let _0x228c13=[];for(let _0x13c243=0x0,_0x554f82=0x0;_0x13c243<_0x8854cf;_0x13c243++){_0x228c13['push'](_0x554f82+0x0,_0x554f82+0x1,_0x554f82+0x2,_0x554f82+0x2,_0x554f82+0x1,_0x554f82+0x3),_0x554f82+=_0x31a9ed;}_0x228c13=new Uint32Array(_0x228c13);const _0x122958={};_0x122958['componentDatatype']=ComponentDatatype[_0x26cf9e(-0x1ba,-0x1c0)],_0x122958['componentsPerAttribute']=0x2,_0x122958[_0x5d530f(0x1b4,0x208)]=_0x32a2cb;function _0x5d530f(_0x3f22b7,_0x465023){return _0x5c10d5(_0x465023,_0x3f22b7- -0x9);}function _0x26cf9e(_0x13b439,_0x7fd9df){return _0x2a7d15(_0x13b439,_0x7fd9df- -0x636);}const _0xd76d5d={};_0xd76d5d[_0x26cf9e(-0x1d9,-0x178)]=ComponentDatatype[_0x5d530f(0x1f2,0x259)],_0xd76d5d['componentsPerAttribute']=0x3,_0xd76d5d['values']=_0x14dd77;const _0x13b447=new Geometry({'attributes':new GeometryAttributes({'st':new GeometryAttribute(_0x122958),'normal':new GeometryAttribute(_0xd76d5d)}),'indices':_0x228c13});return _0x13b447;}[_0x5c10d5(0x2eb,0x297)](_0x671548){function _0x4dcca1(_0x188035,_0xcaa9c4){return _0x2a7d15(_0xcaa9c4,_0x188035- -0x11d);}const _0x23e1cb={'viewport':undefined,'depthTest':undefined,'depthMask':undefined,'blending':undefined,..._0x671548};return Appearance[_0x4dcca1(0x389,0x38e)](!![],![],_0x23e1cb);}['createPrimitives'](){const _0x477674={};_0x477674['st']=0x0,_0x477674[_0x3b6614(0x1aa,0x228)]=0x1;const _0x1e549a={};function _0x318944(_0xf72c56,_0x50901e){return _0x2a7d15(_0x50901e,_0xf72c56- -0x212);}_0x1e549a['enabled']=!![];const _0x42bd62={};_0x42bd62[_0x318944(0x240,0x1bd)]=!![],_0x42bd62['blendEquation']=WebGLRenderingContext['FUNC_ADD'],_0x42bd62[_0x318944(0x2ee,0x2d6)]=WebGLRenderingContext['SRC_ALPHA'],_0x42bd62[_0x318944(0x2fc,0x34c)]=WebGLRenderingContext[_0x3b6614(0x117,0xd7)];const _0x104c05={};_0x104c05[_0x318944(0x2bc,0x2d2)]=undefined,_0x104c05[_0x318944(0x2b9,0x249)]=_0x1e549a,_0x104c05['depthMask']=!![],_0x104c05['blending']=_0x42bd62;const _0x1deb19=new CustomPrimitive({'commandType':'Draw','attributeLocations':_0x477674,'geometry':this[_0x3b6614(0x188,0x1b2)](),'primitiveType':PrimitiveType['TRIANGLES'],'uniformMap':{'previousParticlesPosition':()=>this['computing']['particlesTextures']['previousParticlesPosition'],'currentParticlesPosition':()=>this[_0x3b6614(0xf3,0xcc)][_0x3b6614(0xc5,0xf2)]['currentParticlesPosition'],'postProcessingPosition':()=>this[_0x3b6614(0xf3,0xca)][_0x3b6614(0xc5,0xd1)][_0x3b6614(0x14a,0x194)],'particlesSpeed':()=>this[_0x3b6614(0xf3,0x97)][_0x318944(0x238,0x28d)][_0x318944(0x2da,0x27f)],'frameRateAdjustment':()=>this[_0x318944(0x266,0x29e)][_0x3b6614(0xde,0x98)],'colorTable':()=>this['colorTable'],'domain':()=>{function _0xaede7e(_0x451349,_0x4dd32a){return _0x318944(_0x451349- -0x127,_0x4dd32a);}function _0x4542f4(_0x483eca,_0xe57923){return _0x3b6614(_0xe57923- -0x2b7,_0x483eca);}var _0x96f9,_0xf4cb3b;const _0xdaf832=new Cartesian2(((_0x96f9=this['options'][_0xaede7e(0x1d2,0x1f7)])===null||_0x96f9===void 0x0?void 0x0:_0x96f9['min'])??this['computing'][_0x4542f4(-0x123,-0x11f)]['speed']['min'],((_0xf4cb3b=this['options']['domain'])===null||_0xf4cb3b===void 0x0?void 0x0:_0xf4cb3b['max'])??this['computing']['windData']['speed']['max']);return _0xdaf832;},'displayRange':()=>{function _0x3915ef(_0x36bbe6,_0x1a66a2){return _0x318944(_0x1a66a2- -0x4fc,_0x36bbe6);}function _0x3b501e(_0x1c7bde,_0x4653b9){return _0x318944(_0x4653b9-0xd1,_0x1c7bde);}var _0x4befbc,_0x15da1e;const _0xd57c0e=new Cartesian2(((_0x4befbc=this['options']['displayRange'])===null||_0x4befbc===void 0x0?void 0x0:_0x4befbc[_0x3915ef(-0x234,-0x26f)])??this[_0x3b501e(0x2b7,0x337)]['windData']['speed']['min'],((_0x15da1e=this[_0x3915ef(-0x1a5,-0x1e6)]['displayRange'])===null||_0x15da1e===void 0x0?void 0x0:_0x15da1e['max'])??this['computing']['windData']['speed'][_0x3915ef(-0x274,-0x2bb)]);return _0xd57c0e;},'particleHeight':()=>this['options']['fixedHeight']||0x0,'aspect':()=>this['context'][_0x3b6614(0x18e,0x162)]/this['context']['drawingBufferHeight'],'pixelSize':()=>this['viewerParameters']['pixelSize'],'lineWidth':()=>{function _0x340d96(_0x99052c,_0x27e915){return _0x318944(_0x27e915- -0x2a5,_0x99052c);}const _0x19caa6={};_0x19caa6['min']=0x1,_0x19caa6['max']=0x2;const _0x1b00b8=this[_0x38a9d8(-0xeb,-0xa7)]['lineWidth']||_0x19caa6;function _0x38a9d8(_0x486264,_0x35db69){return _0x3b6614(_0x35db69- -0x24a,_0x486264);}return new Cartesian2(_0x1b00b8[_0x340d96(-0x77,-0x18)],_0x1b00b8['max']);},'lineLength':()=>{const _0x2f6517={};_0x2f6517['min']=0x14,_0x2f6517['max']=0x64;const _0x18169a=this['options']['lineLength']||_0x2f6517;function _0x390c4a(_0x2d14b6,_0x113a24){return _0x3b6614(_0x113a24- -0x35f,_0x2d14b6);}return new Cartesian2(_0x18169a['min'],_0x18169a[_0x390c4a(-0x2c9,-0x291)]);},'is3D':()=>this[_0x318944(0x2d0,0x337)]['sceneMode']===SceneMode[_0x318944(0x24b,0x1e7)],'segmentsDepthTexture':()=>this['textures'][_0x318944(0x275,0x20a)]},'vertexShaderSource':ShaderManager['getSegmentDrawVertexShader'](),'fragmentShaderSource':ShaderManager['getSegmentDrawFragmentShader'](),'rawRenderState':this['createRawRenderState'](_0x104c05)});function _0x3b6614(_0x3d2f62,_0x436d77){return _0x5c10d5(_0x436d77,_0x3d2f62- -0x10a);}const _0x35a996={};return _0x35a996[_0x3b6614(0x1c0,0x1ee)]=_0x1deb19,_0x35a996;}[_0x2a7d15(0x4d0,0x456)](){const _0x26b6e3=this['createSegmentsGeometry']();this[_0x2fbcf1(0x8c,0xc6)]['segments'][_0x119145(0x407,0x3b5)]=_0x26b6e3;const _0x59d8b4={};_0x59d8b4['context']=this['context'],_0x59d8b4['geometry']=_0x26b6e3,_0x59d8b4['attributeLocations']=this[_0x2fbcf1(0x136,0xc6)][_0x2fbcf1(0x1b0,0x150)]['attributeLocations'],_0x59d8b4['bufferUsage']=BufferUsage['STATIC_DRAW'];function _0x119145(_0x1c665f,_0x1a7c47){return _0x5c10d5(_0x1a7c47,_0x1c665f-0x227);}const _0x30e2ee=VertexArray['fromGeometry'](_0x59d8b4);function _0x2fbcf1(_0x1429a4,_0x39213e){return _0x2a7d15(_0x1429a4,_0x39213e- -0x3f5);}this['primitives']['segments'][_0x119145(0x423,0x3d4)]&&(this[_0x2fbcf1(0x13e,0xc6)]['segments']['commandToExecute']['vertexArray']=_0x30e2ee);}['onColorTableChange'](){this['colorTable']['destroy']();function _0x1084da(_0x166be0,_0x30f15f){return _0x2a7d15(_0x30f15f,_0x166be0- -0x16d);}this['colorTable']=this[_0x1084da(0x399,0x38f)]();}['updateOptions'](_0x1f895f){const _0x79be5a=_0x1f895f[_0x111b2b(0x1d2,0x22a)]&&JSON['stringify'](_0x1f895f[_0x48af87(0x314,0x2fa)])!==JSON['stringify'](this['options'][_0x48af87(0x314,0x362)]);this['options']=deepMerge(_0x1f895f,this['options']);function _0x111b2b(_0x446aa5,_0x2ea73b){return _0x5c10d5(_0x2ea73b,_0x446aa5- -0x1);}function _0x48af87(_0x44680c,_0x4fd912){return _0x2a7d15(_0x4fd912,_0x44680c- -0x13a);}_0x79be5a&&this[_0x111b2b(0x221,0x24a)]();}['destroy'](){Object['values'](this['framebuffers'])['forEach'](_0xe0ca1c=>{_0xe0ca1c['destroy']();}),Object['values'](this['primitives'])['forEach'](_0x222395=>{_0x222395['destroy']();}),this['colorTable']['destroy']();}}const {ClearCommand,Color,Pass}=mars3d__namespace[_0x2a7d15(0x4cc,0x465)];class WindParticleSystem{constructor(_0x14cc26,_0xc78050,_0x28c609,_0x2f2dac,_0x38ea33){function _0x23a8c5(_0x2ae41b,_0x234426){return _0x2a7d15(_0x2ae41b,_0x234426- -0x61f);}this['context']=_0x14cc26,this[_0x1230d4(0x328,0x371)]=_0x28c609,this[_0x23a8c5(-0x14d,-0x13d)]=_0x2f2dac,this['computing']=new WindParticlesComputing(_0x14cc26,_0xc78050,_0x28c609,_0x2f2dac,_0x38ea33),this['rendering']=new WindParticlesRendering(_0x14cc26,_0x28c609,_0x2f2dac,this['computing']);function _0x1230d4(_0x1a1593,_0x17076e){return _0x2a7d15(_0x1a1593,_0x17076e- -0x1b7);}this['clearFramebuffers']();}['getPrimitives'](){function _0x3827a4(_0x359126,_0x17c4cd){return _0x2a7d15(_0x17c4cd,_0x359126-0x1f);}function _0x36facc(_0x2e7754,_0x9d2d37){return _0x2a7d15(_0x9d2d37,_0x2e7754- -0x32e);}const _0x3615b4=[this[_0x36facc(0x14a,0x101)][_0x36facc(0x18d,0x11d)][_0x3827a4(0x557,0x594)],this[_0x3827a4(0x497,0x4fb)]['primitives'][_0x36facc(0x189,0x153)],this['computing']['primitives']['postProcessingPosition'],this['rendering']['primitives']['segments']];return _0x3615b4;}['clearFramebuffers'](){function _0x20ffa4(_0xbe8db8,_0x44e5af){return _0x2a7d15(_0xbe8db8,_0x44e5af- -0x299);}const _0x50e5fd=new ClearCommand({'color':new Color(0x0,0x0,0x0,0x0),'depth':0x1,'framebuffer':undefined,'pass':Pass['OPAQUE']});Object['keys'](this[_0x20ffa4(0x154,0x1bb)]['framebuffers'])['forEach'](_0x103886=>{_0x50e5fd[_0x337440(0x30b,0x387)]=this[_0x337440(0x2ec,0x36c)]['framebuffers'][_0x103886];function _0x337440(_0x1ef35a,_0x4e79f2){return _0x20ffa4(_0x4e79f2,_0x1ef35a-0x131);}function _0x4df262(_0x51b529,_0x24bb7b){return _0x20ffa4(_0x24bb7b,_0x51b529-0x246);}_0x50e5fd[_0x4df262(0x419,0x399)](this['context']);});}[_0x2a7d15(0x498,0x4d3)](_0x3066aa){let _0x4b22f4=![];_0x3066aa[_0x1d3982(0x27b,0x269)]&&this[_0x36d06d(-0x105,-0x9a)]['particlesTextureSize']!==_0x3066aa['particlesTextureSize']&&(_0x4b22f4=!![]);const _0x6ee350=deepMerge(_0x3066aa,this[_0x1d3982(0x2e2,0x308)]);if(_0x6ee350[_0x36d06d(-0x16c,-0x1f3)]<0x1)throw new Error('particlesTextureSize\x20must\x20be\x20greater\x20than\x200');function _0x36d06d(_0x2f5024,_0x2f8d0e){return _0x2a7d15(_0x2f8d0e,_0x2f5024- -0x62d);}function _0x1d3982(_0x21d66f,_0x281ea0){return _0x5c10d5(_0x281ea0,_0x21d66f-0x35);}this['options']=_0x6ee350,this['rendering'][_0x36d06d(-0xee,-0x103)](_0x3066aa),this[_0x36d06d(-0x1b5,-0x15b)]['updateOptions'](_0x3066aa),_0x4b22f4&&(this['computing']['destroyParticlesTextures'](),this['computing'][_0x36d06d(-0x159,-0x194)](),this['rendering'][_0x1d3982(0x210,0x1a8)]());}[_0x2a7d15(0x4c7,0x50a)](_0x143ed6){this[_0x57d6c6(-0x25d,-0x24d)]=_0x143ed6,this[_0x57d6c6(-0x2c7,-0x262)][_0x57d6c6(-0x25d,-0x29b)]=_0x143ed6;function _0x57d6c6(_0x3d6bc0,_0x184c5b){return _0x5c10d5(_0x184c5b,_0x3d6bc0- -0x4c4);}function _0x2167ab(_0x34f128,_0xed1474){return _0x5c10d5(_0xed1474,_0x34f128- -0xc0);}this[_0x2167ab(0x119,0x16f)]['viewerParameters']=_0x143ed6;}['destroy'](){this['computing']['destroy'](),this['rendering']['destroy']();}}const Cesium$1=mars3d__namespace['Cesium'],BaseLayer$1=mars3d__namespace['layer'][_0x2a7d15(0x3e2,0x44c)],_0x319f2d={};_0x319f2d['min']=0x1,_0x319f2d['max']=0x2;const _0x5a0473={};_0x5a0473['min']=0x14,_0x5a0473['max']=0x64;const _0x3eb4de={};_0x3eb4de['particlesTextureSize']=0x64,_0x3eb4de[_0x2a7d15(0x50d,0x4f4)]=0x0,_0x3eb4de[_0x5c10d5(0x274,0x2c5)]=_0x319f2d,_0x3eb4de[_0x2a7d15(0x4c4,0x535)]=_0x5a0473,_0x3eb4de['speedFactor']=0x1,_0x3eb4de['dropRate']=0.003,_0x3eb4de[_0x2a7d15(0x47d,0x45c)]=0.001,_0x3eb4de[_0x2a7d15(0x478,0x44e)]=['rgb(206,255,255)'],_0x3eb4de['flipY']=![],_0x3eb4de['dynamic']=!![];const DEF_OPTIONS=_0x3eb4de;class WindLayer extends BaseLayer$1{constructor(_0x49c43a={}){_0x49c43a={...DEF_OPTIONS,..._0x49c43a},super(_0x49c43a),this['_setOptionsHook'](_0x49c43a,_0x49c43a);}get[_0x5c10d5(0x2c4,0x2b1)](){return this['primitives'];}get[_0x2a7d15(0x4e1,0x47e)](){return this['options']['data'];}set[_0x5c10d5(0x26d,0x203)](_0xffa7a5){this['options']['data']=_0xffa7a5,this['setData'](_0xffa7a5);}get['colors'](){function _0x11a09c(_0x4a996d,_0x2012c9){return _0x2a7d15(_0x4a996d,_0x2012c9- -0x5e7);}function _0x1dd6ff(_0x259235,_0x5c67ec){return _0x5c10d5(_0x5c67ec,_0x259235- -0x414);}return this[_0x1dd6ff(-0x167,-0x111)][_0x1dd6ff(-0x241,-0x1fc)];}set['colors'](_0x5db090){function _0x29cf18(_0x3d944b,_0x2f908e){return _0x5c10d5(_0x2f908e,_0x3d944b- -0x48f);}this[_0x29cf18(-0x1e2,-0x228)]['colors']=_0x5db090;function _0x37a6de(_0x521a08,_0x4d51ed){return _0x5c10d5(_0x4d51ed,_0x521a08-0x235);}const _0x17c1df={};_0x17c1df[_0x29cf18(-0x2bc,-0x2dc)]=_0x5db090,this['_setOptionsHook'](this['options'],_0x17c1df);}['_mountedHook'](){}['_addedHook'](){this['scene']=this['_map']['scene'],this['camera']=this['_map']['camera'];this[_0x220930(0x20,0x42)]['data']&&this['setData'](this[_0x220930(-0x11,0x42)]['data']);function _0x220930(_0x5bb373,_0x41d137){return _0x5c10d5(_0x5bb373,_0x41d137- -0x26b);}if(!this['windData'])return;this['viewerParameters']={'lonRange':new Cesium$1['Cartesian2'](-0xb4,0xb4),'latRange':new Cesium$1[(_0x403aa5(-0x104,-0xc6))](-0x5a,0x5a),'pixelSize':0x3e8,'sceneMode':this['scene'][_0x220930(0x5f,0x34)]},this['updateViewerParameters'](),this['particleSystem']=new WindParticleSystem(this['scene'][_0x220930(-0x10,0x31)],this['windData'],this['options'],this['viewerParameters'],this[_0x403aa5(-0x107,-0x130)]),this['primitives']=this[_0x403aa5(-0x8d,-0x3b)]['getPrimitives'](),this['primitives'][_0x220930(-0x44,0x8)](_0x568fbf=>{function _0x4ff409(_0x52e0a1,_0x3bca96){return _0x220930(_0x3bca96,_0x52e0a1-0x4bc);}this[_0x4ff409(0x459,0x440)]['primitives']['add'](_0x568fbf);}),this['camera']['percentageChanged']=0.01;function _0x403aa5(_0x5cd0fc,_0xcf5f3b){return _0x2a7d15(_0xcf5f3b,_0x5cd0fc- -0x58a);}this['camera'][_0x220930(0x66,-0x16)][_0x220930(-0x37,0x4)](this['updateViewerParameters'][_0x403aa5(-0x146,-0x1b0)](this)),this['scene']['morphComplete']['addEventListener'](this[_0x220930(-0x120,-0x99)]['bind'](this)),window['addEventListener']('resize',this[_0x403aa5(-0x13d,-0x103)]['bind'](this));}[_0x2a7d15(0x439,0x45f)](){function _0x1fe19d(_0x1acf9a,_0xad61b9){return _0x2a7d15(_0xad61b9,_0x1acf9a- -0x18e);}this['camera'][_0x2c8167(0x1d7,0x1ec)]['removeEventListener'](this[_0x1fe19d(0x2bf,0x2ac)][_0x1fe19d(0x2b6,0x30c)](this)),this['scene']['morphComplete']['removeEventListener'](this[_0x1fe19d(0x2bf,0x344)]['bind'](this)),window[_0x1fe19d(0x307,0x2af)]('resize',this['updateViewerParameters']['bind'](this));this['primitives']&&(this['primitives'][_0x1fe19d(0x360,0x399)](_0x2a56bb=>{function _0x1a7443(_0x15839e,_0x459e3d){return _0x2c8167(_0x15839e,_0x459e3d- -0x33);}this[_0x1a7443(0x1a7,0x16c)]['primitives']['remove'](_0x2a56bb);}),delete this['primitives']);function _0x2c8167(_0x26fd3e,_0x3d22d8){return _0x5c10d5(_0x26fd3e,_0x3d22d8- -0x69);}this['particleSystem']&&(this[_0x2c8167(0x1e5,0x219)]['destroy'](),delete this['particleSystem']);}['setData'](_0x513192,_0x25a813){this['windData']=this['processWindData'](_0x513192);function _0x54bb49(_0xc3a169,_0x2e4172){return _0x2a7d15(_0x2e4172,_0xc3a169- -0x1de);}if(_0x25a813){this['_removedHook'](),this['_addedHook']();return;}function _0x1ac8a4(_0x1c8473,_0x462a4a){return _0x5c10d5(_0x1c8473,_0x462a4a- -0xf9);}this['particleSystem']?(this[_0x1ac8a4(0x10c,0x189)][_0x1ac8a4(0xba,0x104)][_0x1ac8a4(0x1be,0x1bd)](this['windData']),this['scene']['requestRender']()):this['_addedHook']();}['_setOptionsHook'](_0x3e69ec,_0x5dc9a2){function _0x57719f(_0x36204a,_0x2e7c8d){return _0x2a7d15(_0x2e7c8d,_0x36204a- -0x524);}this['particleSystem']&&(this['particleSystem'][_0x57719f(-0x51,-0x70)](_0x5dc9a2),this['scene']['requestRender']());}['processWindData'](_0x34bbe4){var _0x1d7a6d,_0x4b4d7f;const _0x2c07c6={..._0x34bbe4},_0x4fa621=_0x2c07c6;function _0x4fe5b5(_0x51d959,_0x51eb2e){return _0x2a7d15(_0x51eb2e,_0x51d959- -0x2bb);}function _0x3499e3(_0x5298ee,_0x21764d){return _0x5c10d5(_0x5298ee,_0x21764d-0x18a);}!_0x4fa621[_0x4fe5b5(0x1f7,0x26d)]&&_0x4fa621[_0x4fe5b5(0x24d,0x2b7)]&&(_0x4fa621['height']=_0x4fa621['rows']);!_0x4fa621[_0x3499e3(0x377,0x3f8)]&&_0x4fa621['cols']&&(_0x4fa621['width']=_0x4fa621['cols']);!_0x4fa621['bounds']&&(_0x4fa621['bounds']={'west':_0x4fa621[_0x4fe5b5(0x21d,0x1ad)],'south':_0x4fa621['ymin'],'east':_0x4fa621[_0x4fe5b5(0x1cf,0x253)],'north':_0x4fa621['ymax']});if(!_0x4fa621['u']){const _0x115bd5={};_0x115bd5['array']=_0x34bbe4['udata'],_0x115bd5['min']=_0x34bbe4['umin'],_0x115bd5['max']=_0x34bbe4['umax'],_0x4fa621['u']=_0x115bd5;}if(!_0x4fa621['v']){const _0x19cc2b={};_0x19cc2b[_0x4fe5b5(0x207,0x287)]=_0x34bbe4['vdata'],_0x19cc2b[_0x3499e3(0x355,0x3ae)]=_0x34bbe4[_0x4fe5b5(0x256,0x29a)],_0x19cc2b[_0x4fe5b5(0x198,0x160)]=_0x34bbe4['vmax'],_0x4fa621['v']=_0x19cc2b;}if(((_0x1d7a6d=_0x4fa621['speed'])===null||_0x1d7a6d===void 0x0?void 0x0:_0x1d7a6d['min'])===undefined||((_0x4b4d7f=_0x4fa621[_0x3499e3(0x3d1,0x43c)])===null||_0x4b4d7f===void 0x0?void 0x0:_0x4b4d7f['max'])===undefined||_0x4fa621[_0x3499e3(0x484,0x43c)][_0x4fe5b5(0x207,0x1da)]===undefined){const _0x1e0501={'array':new Float32Array(_0x4fa621['u']['array']['length']),'min':Number['MAX_VALUE'],'max':Number[_0x3499e3(0x3cb,0x443)]};for(let _0x35140b=0x0;_0x35140b<_0x4fa621['u'][_0x3499e3(0x3a4,0x3d1)][_0x4fe5b5(0x25e,0x2a1)];_0x35140b++){_0x1e0501['array'][_0x35140b]=Math[_0x3499e3(0x2fc,0x37d)](_0x4fa621['u'][_0x4fe5b5(0x207,0x221)][_0x35140b]*_0x4fa621['u']['array'][_0x35140b]+_0x4fa621['v'][_0x4fe5b5(0x207,0x1af)][_0x35140b]*_0x4fa621['v'][_0x4fe5b5(0x207,0x1a9)][_0x35140b]),_0x1e0501['array'][_0x35140b]!==0x0&&(_0x1e0501['min']=Math[_0x4fe5b5(0x1e4,0x1d5)](_0x1e0501['min'],_0x1e0501[_0x3499e3(0x3e8,0x3d1)][_0x35140b]),_0x1e0501[_0x3499e3(0x372,0x362)]=Math['max'](_0x1e0501[_0x3499e3(0x33f,0x362)],_0x1e0501['array'][_0x35140b]));}_0x4fa621['speed']=_0x1e0501;}return _0x4fa621;}['updateViewerParameters'](){var _0x58fe60;const _0x2a552c=this[_0xf962e7(0x51,0x89)],_0x313b48=_0x2a552c['canvas'],_0x4bd23b={};_0x4bd23b['x']=0x0,_0x4bd23b['y']=0x0;const _0xa49e61={};_0xa49e61['x']=0x0,_0xa49e61['y']=_0x313b48[_0xf962e7(0x7d,0x71)];function _0xf962e7(_0x41c574,_0x312b77){return _0x5c10d5(_0x41c574,_0x312b77- -0x17f);}const _0xed696a={};_0xed696a['x']=_0x313b48['clientWidth'],_0xed696a['y']=0x0;const _0x1eecc7={};_0x1eecc7['x']=_0x313b48['clientWidth'],_0x1eecc7['y']=_0x313b48['clientHeight'];const _0x553fdd=[_0x4bd23b,_0xa49e61,_0xed696a,_0x1eecc7];let _0x5f4797=0xb4,_0x3a33f0=-0xb4,_0x23c901=0x5a;function _0x1838a9(_0x40f9f0,_0x50c396){return _0x2a7d15(_0x40f9f0,_0x50c396- -0x5e7);}let _0x16494e=-0x5a,_0x552d19=![];for(const _0x1c27b5 of _0x553fdd){const _0x1c30a4=_0x2a552c['camera'][_0xf962e7(0x125,0xf1)](new Cesium$1['Cartesian2'](_0x1c27b5['x'],_0x1c27b5['y']),_0x2a552c[_0x1838a9(-0x12e,-0x147)]['ellipsoid']);if(!_0x1c30a4){_0x552d19=!![];break;}const _0x38da8f=_0x2a552c['globe'][_0x1838a9(-0x17f,-0x196)]['cartesianToCartographic'](_0x1c30a4),_0x408854=Cesium$1[_0xf962e7(0xc3,0x9e)][_0x1838a9(-0x143,-0x17e)](_0x38da8f['longitude']),_0x4f0042=Cesium$1['Math']['toDegrees'](_0x38da8f[_0x1838a9(-0x189,-0x16a)]);_0x5f4797=Math['min'](_0x5f4797,_0x408854),_0x3a33f0=Math[_0x1838a9(-0x19b,-0x194)](_0x3a33f0,_0x408854),_0x23c901=Math['min'](_0x23c901,_0x4f0042),_0x16494e=Math[_0x1838a9(-0x18b,-0x194)](_0x16494e,_0x4f0042);}if(!_0x552d19){const _0x1af38d=new Cesium$1['Cartesian2'](Math['max'](this['windData'][_0x1838a9(-0x69,-0xc3)]['west'],_0x5f4797),Math['min'](this['windData'][_0xf962e7(0x16b,0x12a)]['east'],_0x3a33f0)),_0x139f0c=new Cesium$1[(_0xf962e7(0xd9,0x8c))](Math[_0xf962e7(-0x2d,0x59)](this['windData']['bounds'][_0xf962e7(0xc8,0xcd)],_0x23c901),Math['min'](this['windData']['bounds']['north'],_0x16494e)),_0x5c321c=(_0x1af38d['y']-_0x1af38d['x'])*0.05,_0x5ebd57=(_0x139f0c['y']-_0x139f0c['x'])*0.05;_0x1af38d['x']=Math['max'](this['windData']['bounds']['west'],_0x1af38d['x']-_0x5c321c),_0x1af38d['y']=Math['min'](this['windData']['bounds']['east'],_0x1af38d['y']+_0x5c321c),_0x139f0c['x']=Math['max'](this[_0xf962e7(0xee,0x123)]['bounds']['south'],_0x139f0c['x']-_0x5ebd57),_0x139f0c['y']=Math['min'](this['windData']['bounds']['north'],_0x139f0c['y']+_0x5ebd57),this[_0xf962e7(0x12c,0xe8)]['lonRange']=_0x1af38d,this[_0xf962e7(0x169,0xe8)]['latRange']=_0x139f0c;const _0x44664b=this['windData'][_0xf962e7(0x129,0x12a)]['east']-this['windData']['bounds'][_0x1838a9(-0x1a8,-0x176)],_0x5ea74b=this['windData'][_0x1838a9(-0xe8,-0xc3)]['north']-this['windData']['bounds']['south'],_0x59a81a=(_0x1af38d['y']-_0x1af38d['x'])/_0x44664b,_0x4727d1=(_0x139f0c['y']-_0x139f0c['x'])/_0x5ea74b,_0x1a8860=Math['min'](_0x59a81a,_0x4727d1),_0x1b997c=0x3e8*_0x1a8860;_0x1b997c>0x0&&(this[_0xf962e7(0x13c,0xe8)][_0x1838a9(-0x15e,-0x192)]=Math[_0xf962e7(0xc3,0x59)](0x0,Math['min'](0x3e8,_0x1b997c)));}this[_0x1838a9(-0x100,-0x105)][_0xf962e7(0x38,0xba)]=this['scene'][_0xf962e7(0x110,0x120)],(_0x58fe60=this[_0xf962e7(0x159,0x103)])===null||_0x58fe60===void 0x0||_0x58fe60[_0x1838a9(-0x74,-0xdd)](this['viewerParameters']);}[_0x2a7d15(0x4f9,0x4b1)](_0x4670af,_0x1d7718){const {bounds:_0x4e9bd5,width:_0x1f5b16,height:_0x236aee,u:_0x5a916a,v:_0x2dff37,speed:_0x37c877}=this[_0x339e8e(0x38b,0x3b3)],{flipY:_0xd96405}=this[_0x339e8e(0x3cf,0x3be)];if(_0x4670af<_0x4e9bd5['west']||_0x4670af>_0x4e9bd5['east']||_0x1d7718<_0x4e9bd5[_0x339e8e(0x376,0x35d)]||_0x1d7718>_0x4e9bd5['north'])return null;function _0x339e8e(_0x38d4b7,_0x195583){return _0x5c10d5(_0x38d4b7,_0x195583-0x111);}const _0x581584=(_0x4670af-_0x4e9bd5['west'])/(_0x4e9bd5[_0x32e6b1(-0x122,-0xdc)]-_0x4e9bd5['west'])*(_0x1f5b16-0x1);let _0x2e1559=(_0x1d7718-_0x4e9bd5['south'])/(_0x4e9bd5[_0x339e8e(0x296,0x30f)]-_0x4e9bd5[_0x339e8e(0x3c2,0x35d)])*(_0x236aee-0x1);_0xd96405&&(_0x2e1559=_0x236aee-0x1-_0x2e1559);const _0x2d1ad5=Math[_0x339e8e(0x2cd,0x2e5)](_0x581584),_0x2aa578=Math['floor'](_0x2e1559),_0xb08056=Math['floor'](_0x581584),_0x4af6f1=Math[_0x32e6b1(-0x132,-0x110)](_0xb08056+0x1,_0x1f5b16-0x1),_0x35d120=Math[_0x32e6b1(-0x182,-0x15a)](_0x2e1559),_0xa481f0=Math[_0x32e6b1(-0x132,-0xe3)](_0x35d120+0x1,_0x236aee-0x1),_0x2a58cc=_0x581584-_0xb08056,_0x5844e5=_0x2e1559-_0x35d120,_0x2f21cd=_0x2aa578*_0x1f5b16+_0x2d1ad5,_0x1635c2=_0x35d120*_0x1f5b16+_0xb08056,_0x449c0d=_0x35d120*_0x1f5b16+_0x4af6f1,_0x41a2bf=_0xa481f0*_0x1f5b16+_0xb08056,_0x19c2a1=_0xa481f0*_0x1f5b16+_0x4af6f1,_0x239d58=_0x5a916a['array'][_0x1635c2],_0x565620=_0x5a916a['array'][_0x449c0d],_0x47d21e=_0x5a916a[_0x339e8e(0x388,0x358)][_0x41a2bf],_0x20c1b1=_0x5a916a[_0x32e6b1(-0x10f,-0xe5)][_0x19c2a1],_0x315e9c=(0x1-_0x2a58cc)*(0x1-_0x5844e5)*_0x239d58+_0x2a58cc*(0x1-_0x5844e5)*_0x565620+(0x1-_0x2a58cc)*_0x5844e5*_0x47d21e+_0x2a58cc*_0x5844e5*_0x20c1b1,_0x1ace0d=_0x2dff37['array'][_0x1635c2],_0x96c96a=_0x2dff37['array'][_0x449c0d],_0x15a8c7=_0x2dff37['array'][_0x41a2bf],_0x42f7e4=_0x2dff37[_0x32e6b1(-0x10f,-0xdc)][_0x19c2a1],_0x18cff9=(0x1-_0x2a58cc)*(0x1-_0x5844e5)*_0x1ace0d+_0x2a58cc*(0x1-_0x5844e5)*_0x96c96a+(0x1-_0x2a58cc)*_0x5844e5*_0x15a8c7+_0x2a58cc*_0x5844e5*_0x42f7e4,_0x70b13e=Math[_0x339e8e(0x324,0x304)](_0x315e9c*_0x315e9c+_0x18cff9*_0x18cff9),_0x5f4641={};_0x5f4641['u']=_0x5a916a['array'][_0x2f21cd],_0x5f4641['v']=_0x2dff37[_0x339e8e(0x326,0x358)][_0x2f21cd],_0x5f4641['speed']=_0x37c877[_0x32e6b1(-0x10f,-0xe3)][_0x2f21cd];function _0x32e6b1(_0x49bd54,_0x4b029d){return _0x2a7d15(_0x4b029d,_0x49bd54- -0x5d1);}const _0x1a759d={};_0x1a759d['u']=_0x315e9c,_0x1a759d['v']=_0x18cff9,_0x1a759d['speed']=_0x70b13e;const _0x11ade2={};return _0x11ade2['original']=_0x5f4641,_0x11ade2['interpolated']=_0x1a759d,_0x11ade2;}}mars3d__namespace['LayerUtil']['register']('wind',WindLayer),mars3d__namespace['layer'][_0x2a7d15(0x51f,0x523)]=WindLayer;class CanvasParticle{constructor(){function _0x4085b7(_0x2534e7,_0x20f8ac){return _0x5c10d5(_0x20f8ac,_0x2534e7-0x119);}function _0x488623(_0xa2545e,_0x1ca83d){return _0x5c10d5(_0xa2545e,_0x1ca83d- -0x1d4);}this[_0x488623(0x6d,0x12)]=null,this[_0x488623(0x158,0xf2)]=null,this['tlng']=null,this[_0x4085b7(0x339,0x374)]=null,this['age']=null,this['speed']=null;}['destroy'](){for(const _0x1b16a4 in this){delete this[_0x1b16a4];}}}class CanvasWindField{constructor(_0x404c3f){this['setOptions'](_0x404c3f);}get['speedRate'](){return this['_speedRate'];}set['speedRate'](_0x157b1b){this['_speedRate']=(0x64-(_0x157b1b>0x63?0x63:_0x157b1b))*0x64;function _0x5ba964(_0x198e99,_0x513891){return _0x5c10d5(_0x513891,_0x198e99-0x20d);}function _0x437c31(_0x2d2ab4,_0x745d90){return _0x5c10d5(_0x745d90,_0x2d2ab4- -0x386);}this['_calc_speedRate']=[(this[_0x437c31(-0x177,-0x19b)]-this[_0x5ba964(0x46a,0x3e3)])/this['_speedRate'],(this['ymax']-this[_0x437c31(-0x168,-0x1db)])/this['_speedRate']];}get['maxAge'](){return this['_maxAge'];}set['maxAge'](_0x52bd28){function _0x404fb4(_0x3a619b,_0x51bfff){return _0x5c10d5(_0x51bfff,_0x3a619b-0x9a);}this[_0x404fb4(0x26f,0x2c8)]=_0x52bd28;}[_0x5c10d5(0x2d5,0x2a0)](_0x1e5899){this['options']=_0x1e5899,this[_0x278c5b(0x22a,0x1e7)]=_0x1e5899[_0x278c5b(0x264,0x1e7)]||0x78,this['speedRate']=_0x1e5899[_0x278c5b(0x1fc,0x179)]||0x32,this['particles']=[];function _0x4e5ca2(_0x2cd7d0,_0x46dbd1){return _0x2a7d15(_0x46dbd1,_0x2cd7d0- -0x17a);}function _0x278c5b(_0x549340,_0x1057d2){return _0x2a7d15(_0x549340,_0x1057d2- -0x2f9);}const _0x59e8c1=_0x1e5899['particlesNumber']||0x1000;for(let _0x46d7e2=0x0;_0x46d7e2<_0x59e8c1;_0x46d7e2++){const _0x12337a=this[_0x278c5b(0x1b8,0x16f)](new CanvasParticle());this[_0x278c5b(0x2af,0x232)]['push'](_0x12337a);}}['setDate'](_0x514ace){this['rows']=_0x514ace['rows'],this[_0x2a6082(0x277,0x219)]=_0x514ace[_0x2a6082(0x233,0x219)],this['xmin']=_0x514ace[_0x2a6082(0x281,0x231)],this['xmax']=_0x514ace['xmax'],this[_0x36a7e3(0x481,0x441)]=_0x514ace['ymin'],this[_0x36a7e3(0x417,0x40f)]=_0x514ace[_0x36a7e3(0x46a,0x40f)],this[_0x36a7e3(0x4da,0x4d8)]=[];const _0x1b8138=_0x514ace['udata'],_0x603b85=_0x514ace[_0x2a6082(0x246,0x207)];let _0x570b26=![];_0x1b8138[_0x2a6082(0x2b9,0x272)]===this['rows']&&_0x1b8138[0x0][_0x2a6082(0x1fb,0x272)]===this[_0x2a6082(0x24f,0x219)]&&(_0x570b26=!![]);let _0x545fc0=0x0;function _0x2a6082(_0x557f46,_0x240155){return _0x5c10d5(_0x557f46,_0x240155- -0x2c);}let _0x42697e=null,_0x3a2b01=null;function _0x36a7e3(_0x270621,_0x3174c3){return _0x2a7d15(_0x270621,_0x3174c3- -0x58);}for(let _0x2c2188=0x0;_0x2c2188<this[_0x36a7e3(0x452,0x4b0)];_0x2c2188++){_0x42697e=[];for(let _0x278ff8=0x0;_0x278ff8<this['cols'];_0x278ff8++,_0x545fc0++){_0x570b26?_0x3a2b01=this[_0x36a7e3(0x3e4,0x406)](_0x1b8138[_0x2c2188][_0x278ff8],_0x603b85[_0x2c2188][_0x278ff8]):_0x3a2b01=this[_0x2a6082(0x1bc,0x1b7)](_0x1b8138[_0x545fc0],_0x603b85[_0x545fc0]),_0x42697e[_0x36a7e3(0x424,0x43f)](_0x3a2b01);}this['grid']['push'](_0x42697e);}!this['options']['flipY']&&this[_0x36a7e3(0x4a0,0x4d8)][_0x2a6082(0x277,0x23a)]();}['clear'](){delete this['rows'],delete this['cols'];function _0x2568e9(_0x4007d4,_0x13e55a){return _0x5c10d5(_0x13e55a,_0x4007d4-0x18c);}delete this[_0x2568e9(0x3e9,0x40a)],delete this['xmax'],delete this['ymin'],delete this[_0x2568e9(0x378,0x394)];function _0x554dff(_0x57efa2,_0x28ecd){return _0x5c10d5(_0x57efa2,_0x28ecd- -0x388);}delete this[_0x2568e9(0x441,0x467)],delete this[_0x554dff(-0xbd,-0xd8)];}['toGridXY'](_0x59148c,_0x1f832d){const _0x3050e4=(_0x59148c-this['xmin'])/(this[_0x4d0a1a(0x29c,0x21c)]-this['xmin'])*(this['cols']-0x1),_0x97d4c=(this['ymax']-_0x1f832d)/(this['ymax']-this['ymin'])*(this['rows']-0x1);function _0x4d0a1a(_0x27c473,_0x580485){return _0x2a7d15(_0x27c473,_0x580485- -0x26e);}return[_0x3050e4,_0x97d4c];}['getUVByXY'](_0x212332,_0x3b3b8d){if(_0x212332<0x0||_0x212332>=this['cols']||_0x3b3b8d>=this['rows'])return[0x0,0x0,0x0];function _0x2e6557(_0xeb8e06,_0x3325f5){return _0x5c10d5(_0x3325f5,_0xeb8e06- -0x1d3);}const _0x3f9087=Math['floor'](_0x212332);function _0xf174e0(_0x56cc92,_0x5cf479){return _0x2a7d15(_0x5cf479,_0x56cc92- -0x199);}const _0x3716b9=Math['floor'](_0x3b3b8d);if(_0x3f9087===_0x212332&&_0x3716b9===_0x3b3b8d)return this[_0x2e6557(0xe2,0x72)][_0x3b3b8d][_0x212332];const _0x588ab7=_0x3f9087+0x1,_0x22c8a3=_0x3716b9+0x1,_0x5460bc=this['getUVByXY'](_0x3f9087,_0x3716b9),_0x3057fe=this[_0xf174e0(0x2e7,0x268)](_0x588ab7,_0x3716b9),_0x1dc9b1=this[_0xf174e0(0x2e7,0x28a)](_0x3f9087,_0x22c8a3),_0x28c6d6=this['getUVByXY'](_0x588ab7,_0x22c8a3);let _0x4d94a1=null;try{_0x4d94a1=this['_bilinearInterpolation'](_0x212332-_0x3f9087,_0x3b3b8d-_0x3716b9,_0x5460bc,_0x3057fe,_0x1dc9b1,_0x28c6d6);}catch(_0x171e36){console['log'](_0x212332,_0x3b3b8d);}return _0x4d94a1;}['_bilinearInterpolation'](_0x186e85,_0x4a41e1,_0x1dfbb1,_0x235cbb,_0x3c5cd1,_0x47f2d6){const _0x8bfe49=0x1-_0x186e85,_0x56a9f=0x1-_0x4a41e1,_0x10c6af=_0x8bfe49*_0x56a9f,_0x48e6a1=_0x186e85*_0x56a9f,_0x14f5a8=_0x8bfe49*_0x4a41e1,_0x17591b=_0x186e85*_0x4a41e1,_0x186913=_0x1dfbb1[0x0]*_0x10c6af+_0x235cbb[0x0]*_0x48e6a1+_0x3c5cd1[0x0]*_0x14f5a8+_0x47f2d6[0x0]*_0x17591b,_0x6f59d5=_0x1dfbb1[0x1]*_0x10c6af+_0x235cbb[0x1]*_0x48e6a1+_0x3c5cd1[0x1]*_0x14f5a8+_0x47f2d6[0x1]*_0x17591b;return this['_calcUV'](_0x186913,_0x6f59d5);}[_0x5c10d5(0x1b8,0x1e3)](_0x2079d0,_0x581816){return[+_0x2079d0,+_0x581816,Math['sqrt'](_0x2079d0*_0x2079d0+_0x581816*_0x581816)];}[_0x5c10d5(0x1ee,0x200)](_0x28f2e0,_0x119117){if(!this[_0x2aec2a(-0x1e8,-0x19c)](_0x28f2e0,_0x119117))return null;function _0x2aec2a(_0x32d8cb,_0xe79e1d){return _0x5c10d5(_0x32d8cb,_0xe79e1d- -0x390);}function _0x175ba7(_0x220296,_0x1e76fc){return _0x5c10d5(_0x1e76fc,_0x220296-0xfe);}const _0xbff8d0=this[_0x175ba7(0x2e5,0x272)](_0x28f2e0,_0x119117),_0x2b61e6=this['getUVByXY'](_0xbff8d0[0x0],_0xbff8d0[0x1]);return _0x2b61e6;}['isInExtent'](_0x46f05e,_0x549352){function _0xe02f7d(_0x507d73,_0x43874b){return _0x2a7d15(_0x507d73,_0x43874b- -0x684);}return _0x46f05e>=this['xmin']&&_0x46f05e<=this[_0xe02f7d(-0x1e8,-0x1fa)]&&_0x549352>=this['ymin']&&_0x549352<=this['ymax']?!![]:![];}[_0x2a7d15(0x4aa,0x4d6)](){const _0xce7cd2=fRandomByfloat(this[_0x55d6c2(0x20e,0x23f)],this[_0x55d6c2(0x1c0,0x162)]);function _0x55d6c2(_0x42f931,_0x5513f9){return _0x2a7d15(_0x5513f9,_0x42f931- -0x2ca);}const _0x3d56ca=fRandomByfloat(this[_0x23418d(0x50b,0x4a0)],this[_0x23418d(0x410,0x46e)]),_0x273f29={};function _0x23418d(_0x2205fe,_0xd81457){return _0x5c10d5(_0x2205fe,_0xd81457-0x282);}return _0x273f29[_0x23418d(0x5c5,0x548)]=_0x3d56ca,_0x273f29['lng']=_0xce7cd2,_0x273f29;}[_0x5c10d5(0x21e,0x231)](){function _0x306dd2(_0x1f4fce,_0x4e1e6a){return _0x2a7d15(_0x4e1e6a,_0x1f4fce- -0x292);}let _0x2e78d1,_0x41cfe7,_0x312024;function _0x1b99bd(_0xd3ab28,_0x46a5dc){return _0x2a7d15(_0x46a5dc,_0xd3ab28- -0x231);}for(let _0x407112=0x0,_0x53e8cc=this[_0x1b99bd(0x2fa,0x287)]['length'];_0x407112<_0x53e8cc;_0x407112++){let _0x268046=this['particles'][_0x407112];_0x268046[_0x1b99bd(0x24b,0x255)]<=0x0&&(_0x268046=this[_0x1b99bd(0x237,0x249)](_0x268046));if(_0x268046['age']>0x0){const _0x3d3602=_0x268046['tlng'],_0x3bb407=_0x268046['tlat'];_0x312024=this['getUVByPoint'](_0x3d3602,_0x3bb407),_0x312024?(_0x2e78d1=_0x3d3602+this['_calc_speedRate'][0x0]*_0x312024[0x0],_0x41cfe7=_0x3bb407+this['_calc_speedRate'][0x1]*_0x312024[0x1],_0x268046['lng']=_0x3d3602,_0x268046[_0x1b99bd(0x310,0x325)]=_0x3bb407,_0x268046['tlng']=_0x2e78d1,_0x268046[_0x306dd2(0x209,0x270)]=_0x41cfe7,_0x268046[_0x306dd2(0x29b,0x283)]=_0x312024[0x2],_0x268046['age']--):_0x268046[_0x306dd2(0x1ea,0x181)]=0x0;}}return this['particles'];}['_randomParticle'](_0x24e7c0){let _0x2e3242,_0x2eb100;for(let _0x40e582=0x0;_0x40e582<0x1e;_0x40e582++){_0x2e3242=this['getRandomLatLng'](),_0x2eb100=this['getUVByPoint'](_0x2e3242['lng'],_0x2e3242[_0x1aaff6(0x157,0x1aa)]);if(_0x2eb100&&_0x2eb100[0x2]>0x0)break;}if(!_0x2eb100)return _0x24e7c0;const _0xd059ab=_0x2e3242[_0x1aaff6(0x77,0xb6)]+this['_calc_speedRate'][0x0]*_0x2eb100[0x0],_0x4a547b=_0x2e3242[_0x1aaff6(0x157,0xf6)]+this['_calc_speedRate'][0x1]*_0x2eb100[0x1];_0x24e7c0[_0x1a8134(-0x247,-0x1ce)]=_0x2e3242['lng'],_0x24e7c0['lat']=_0x2e3242['lat'];function _0x1a8134(_0x44d7dc,_0x19428f){return _0x2a7d15(_0x19428f,_0x44d7dc- -0x6a8);}_0x24e7c0[_0x1aaff6(0x10c,0x143)]=_0xd059ab,_0x24e7c0['tlat']=_0x4a547b,_0x24e7c0['age']=Math['round'](0xa+Math[_0x1a8134(-0x190,-0x130)]()*this[_0x1a8134(-0x1c8,-0x1b1)]);function _0x1aaff6(_0x321482,_0x205856){return _0x2a7d15(_0x205856,_0x321482- -0x3ea);}return _0x24e7c0['speed']=_0x2eb100[0x2],_0x24e7c0;}['destroy'](){for(const _0x3b36be in this){delete this[_0x3b36be];}}}function _0x5768(_0x12e4d5,_0x1bd0e6){const _0x1a8259=_0x1a82();return _0x5768=function(_0x5768ff,_0x2ef202){_0x5768ff=_0x5768ff-0xbe;let _0xbb7929=_0x1a8259[_0x5768ff];return _0xbb7929;},_0x5768(_0x12e4d5,_0x1bd0e6);}function fRandomByfloat(_0x52dfbb,_0x4e4b8b){return _0x52dfbb+Math['random']()*(_0x4e4b8b-_0x52dfbb);}const Cesium=mars3d__namespace[_0x5c10d5(0x229,0x1ea)],BaseLayer=mars3d__namespace[_0x2a7d15(0x50b,0x52c)][_0x5c10d5(0x243,0x1d1)];function _0x5c10d5(_0x1276e3,_0x5408c5){return _0x5768(_0x5408c5-0xff,_0x1276e3);}class CanvasWindLayer extends BaseLayer{constructor(_0x323a04={}){function _0x2b4a8d(_0x491097,_0xa81e03){return _0x2a7d15(_0x491097,_0xa81e03- -0x473);}function _0x50c2cf(_0x59c75a,_0x3fce63){return _0x5c10d5(_0x3fce63,_0x59c75a-0xe1);}super(_0x323a04),this[_0x2b4a8d(-0x21,-0x9)](_0x323a04),this['canvas']=null,_0x323a04['colors']&&_0x323a04['steps']&&(this[_0x2b4a8d(0x2,0x57)]=new mars3d__namespace[(_0x2b4a8d(-0x1c,0x1f))](_0x323a04));}[_0x2a7d15(0x4d6,0x46a)](_0x27cb1f,_0x4ecc6f){this['frameTime']=0x3e8/(_0x27cb1f['frameRate']||0xa);function _0x1dab2a(_0x3af683,_0x28f24d){return _0x5c10d5(_0x28f24d,_0x3af683-0x2dd);}this[_0x5573ea(0x1f8,0x177)]=this['options']['pointerEvents']??![],this[_0x1dab2a(0x526,0x599)]=_0x27cb1f['color']||_0x1dab2a(0x594,0x5cd),this[_0x5573ea(0x25d,0x298)]=_0x27cb1f['lineWidth']||0x1;function _0x5573ea(_0x292252,_0x2b7c86){return _0x2a7d15(_0x2b7c86,_0x292252- -0x2e3);}this[_0x5573ea(0x211,0x244)]=_0x27cb1f[_0x1dab2a(0x556,0x52f)]??0x0,this[_0x5573ea(0x22d,0x246)]=_0x27cb1f['flipY']??![],this['windField']&&this[_0x5573ea(0x23b,0x20a)][_0x5573ea(0x238,0x1e4)](_0x27cb1f);}get[_0x5c10d5(0x26b,0x2b1)](){function _0x43b3e0(_0x170a6f,_0xa67aef){return _0x2a7d15(_0xa67aef,_0x170a6f- -0x163);}return this[_0x43b3e0(0x382,0x366)];}get['canvasWidth'](){function _0x4bd80a(_0x5e7fe0,_0x1ba8cf){return _0x5c10d5(_0x5e7fe0,_0x1ba8cf- -0x152);}return this[_0x4bd80a(0x81,0xb7)]['scene']['canvas']['clientWidth'];}get['canvasHeight'](){function _0x302ab1(_0x3a32f3,_0x52ee15){return _0x5c10d5(_0x52ee15,_0x3a32f3- -0x3b0);}return this[_0x302ab1(-0x1a7,-0x1c5)]['scene']['canvas']['clientHeight'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x22d398){this['_pointerEvents']=_0x22d398;if(!this['canvas'])return;function _0x270047(_0xad4d8e,_0x1014a3){return _0x5c10d5(_0xad4d8e,_0x1014a3-0x107);}function _0x17e451(_0x2be573,_0x235be1){return _0x5c10d5(_0x2be573,_0x235be1- -0x3c);}_0x22d398?this['canvas'][_0x17e451(0x1b4,0x21e)]['pointer-events']='all':this[_0x17e451(0x1f5,0x22e)]['style'][_0x17e451(0x25f,0x247)]=_0x270047(0x3a0,0x349);}get[_0x2a7d15(0x4de,0x4f1)](){return this['options']['particlesNumber'];}set[_0x5c10d5(0x2fb,0x276)](_0x379d8c){function _0x387a30(_0x32ff6a,_0x38186c){return _0x2a7d15(_0x32ff6a,_0x38186c- -0x57a);}this['options']['particlesNumber']=_0x379d8c;function _0x383480(_0x312299,_0x17653a){return _0x5c10d5(_0x312299,_0x17653a-0x98);}clearTimeout(this[_0x387a30(-0x106,-0x140)]),this[_0x387a30(-0xc2,-0x140)]=setTimeout(()=>{function _0x1db8bc(_0x51a48c,_0x2c40a6){return _0x383480(_0x2c40a6,_0x51a48c- -0x388);}this[_0x1db8bc(-0xa3,-0xe8)]();},0x1f4);}get['speedRate'](){return this['options']['speedRate'];}set['speedRate'](_0x10dba0){this['options']['speedRate']=_0x10dba0;function _0x274f17(_0x4ed6af,_0x5b225f){return _0x5c10d5(_0x5b225f,_0x4ed6af- -0x67);}this['windField']&&(this['windField'][_0x274f17(0x190,0x19f)]=_0x10dba0);}get['maxAge'](){function _0x3da1e5(_0x1eb23a,_0x267daa){return _0x5c10d5(_0x267daa,_0x1eb23a- -0x146);}return this['options'][_0x3da1e5(0x11f,0x152)];}set['maxAge'](_0x1c415f){function _0x358c02(_0x46889b,_0x2e098a){return _0x2a7d15(_0x46889b,_0x2e098a- -0x6e9);}this[_0x358c02(-0x1ab,-0x1c1)]['maxAge']=_0x1c415f,this['windField']&&(this['windField']['maxAge']=_0x1c415f);}get[_0x5c10d5(0x1ad,0x203)](){function _0x92eaa3(_0x3bd0b2,_0x59d5fe){return _0x5c10d5(_0x3bd0b2,_0x59d5fe-0xb0);}return this[_0x92eaa3(0x3ce,0x352)];}set['data'](_0x2dd2ea){this['setData'](_0x2dd2ea);}get['rectangle'](){let _0x1074fb=this[_0x39db86(0x1a8,0x146)]['xmin'],_0x232561=this['windData']['xmax'];function _0x39db86(_0x4eedf3,_0x35deea){return _0x2a7d15(_0x35deea,_0x4eedf3- -0x375);}let _0x46cda2=this[_0x95ada7(0x256,0x2af)][_0x95ada7(0x1d2,0x179)],_0x1cf3ae=this['windData']['ymax'];_0x232561>=0x167&&_0x1074fb===0x0&&(_0x1074fb=-0xb4,_0x232561=0xb4);_0x1074fb=Math[_0x39db86(0xde,0x10a)](_0x1074fb,-0xb4),_0x232561=Math['min'](_0x232561,0xb4),_0x46cda2=Math['max'](_0x46cda2,-0x5a),_0x1cf3ae=Math['min'](_0x1cf3ae,0x5a);function _0x95ada7(_0x304274,_0x34fe61){return _0x5c10d5(_0x34fe61,_0x304274- -0x4c);}return Cesium[_0x95ada7(0x24d,0x251)][_0x39db86(0x117,0x118)](_0x1074fb,_0x46cda2,_0x232561,_0x1cf3ae);}[_0x5c10d5(0x2aa,0x27d)](_0x10ac4b){function _0x2b7323(_0x2b111f,_0xeca550){return _0x2a7d15(_0x2b111f,_0xeca550- -0x1d5);}_0x10ac4b?this['_addedHook']():(this['windData']&&(this['options'][_0x2b7323(0x288,0x2a9)]=this['windData']),this['_removedHook']());}['_mountedHook'](){function _0x3527f0(_0x3fda01,_0x16fd18){return _0x2a7d15(_0x16fd18,_0x3fda01- -0x6ef);}this['options']['worker']?this['initWorker']():this[_0x3527f0(-0x1d1,-0x218)]=new CanvasWindField(this['options']);}['_addedHook'](){this['canvas']=this[_0x1ef265(-0x19d,-0x1a7)]();const _0x15c77f={};_0x15c77f['willReadFrequently']=!![],this[_0x1ef265(-0x1cf,-0x1f5)]=this[_0x1ef265(-0x157,-0x1bd)]['getContext']('2d',_0x15c77f);function _0x1ef265(_0x1eabd5,_0xf05f12){return _0x5c10d5(_0x1eabd5,_0xf05f12- -0x427);}this[_0x1ef265(-0x1ed,-0x228)]();function _0x34a33e(_0x55247d,_0x5e2ba3){return _0x2a7d15(_0x55247d,_0x5e2ba3- -0x333);}this['options']['data']&&this[_0x34a33e(0x201,0x1cc)](this[_0x34a33e(0x251,0x1f5)]['data']);}['_removedHook'](){this[_0x176655(0x1ad,0x134)](),this['unbindEvent']();function _0x1b6b84(_0x8ef407,_0x595a9c){return _0x2a7d15(_0x8ef407,_0x595a9c- -0x672);}function _0x176655(_0x58bd7d,_0x22b4da){return _0x5c10d5(_0x58bd7d,_0x22b4da- -0x93);}this[_0x1b6b84(-0x16a,-0x18d)]&&(this[_0x176655(0x101,0x176)][_0x176655(0x19b,0x173)][_0x1b6b84(-0x200,-0x1d1)](this[_0x176655(0x20f,0x1d7)]),delete this['canvas']);}[_0x2a7d15(0x4a2,0x4fb)](){const _0x46de87=mars3d__namespace['DomUtil']['create'](_0x4da02d(-0x11e,-0xac),'mars3d-canvasWind',this['_map']['container']);function _0xfc34eb(_0x2ad5a7,_0x4d8e40){return _0x5c10d5(_0x4d8e40,_0x2ad5a7- -0x352);}_0x46de87[_0xfc34eb(-0xf8,-0xc7)]['position']='absolute',_0x46de87['style']['top']='0px',_0x46de87[_0x4da02d(-0x12e,-0x12e)]['left']='0px',_0x46de87['style'][_0x4da02d(-0x11a,-0x173)]=this[_0xfc34eb(-0x149,-0x136)]['scene'][_0xfc34eb(-0xe8,-0x150)]['clientWidth']+'px',_0x46de87['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px';function _0x4da02d(_0x38edc6,_0x1c7f0f){return _0x5c10d5(_0x1c7f0f,_0x38edc6- -0x388);}return _0x46de87['style']['pointerEvents']=this[_0xfc34eb(-0xf2,-0x8f)]?_0x4da02d(-0x181,-0x1c9):'none',_0x46de87['style'][_0x4da02d(-0xc1,-0x72)]=this[_0xfc34eb(-0xa5,-0xea)][_0x4da02d(-0xc1,-0x107)]??0x9,_0x46de87['width']=this[_0x4da02d(-0x17f,-0x178)]['scene']['canvas']['clientWidth'],_0x46de87[_0x4da02d(-0x151,-0x19c)]=this['_map']['scene']['canvas'][_0x4da02d(-0x198,-0x1d4)],_0x46de87;}[_0x2a7d15(0x4e7,0x4a3)](){function _0x44e43a(_0x36accf,_0x54c687){return _0x5c10d5(_0x36accf,_0x54c687-0x25f);}function _0x1452d0(_0x56ff64,_0x389a57){return _0x5c10d5(_0x389a57,_0x56ff64- -0x470);}this['canvas']&&(this['canvas'][_0x44e43a(0x529,0x4b9)][_0x44e43a(0x526,0x4cd)]=this['_map']['scene'][_0x44e43a(0x526,0x4c9)][_0x1452d0(-0x1dc,-0x255)]+'px',this['canvas'][_0x44e43a(0x520,0x4b9)]['height']=this['_map'][_0x44e43a(0x443,0x467)]['canvas'][_0x44e43a(0x4c2,0x44f)]+'px',this['canvas'][_0x44e43a(0x4cf,0x4cd)]=this['_map']['scene'][_0x1452d0(-0x206,-0x284)][_0x44e43a(0x4e4,0x4f3)],this['canvas'][_0x1452d0(-0x239,-0x205)]=this['_map']['scene'][_0x1452d0(-0x206,-0x1af)][_0x44e43a(0x3cb,0x44f)]);}[_0x2a7d15(0x3ff,0x47a)](){function _0x538856(_0x5d2dfe,_0x511f72){return _0x2a7d15(_0x511f72,_0x5d2dfe- -0x4e2);}const _0x3aa8a7=this;let _0x6bab6c=Date[_0x2b85b1(0x292,0x2be)]();function _0x2b85b1(_0x3552af,_0x37a3dc){return _0x5c10d5(_0x3552af,_0x37a3dc-0xf);}(function _0x3a4cb6(){function _0x31e279(_0x3bb355,_0xbcc68e){return _0x2b85b1(_0x3bb355,_0xbcc68e-0x0);}if(_0x3aa8a7[_0x31e279(0x237,0x2aa)])return;function _0x575490(_0x250885,_0x4a0fe2){return _0x2b85b1(_0x250885,_0x4a0fe2- -0xaa);}_0x3aa8a7[_0x575490(0x164,0x1ec)]=window['requestAnimationFrame'](_0x3a4cb6);if(_0x3aa8a7['show']&&_0x3aa8a7['windField']){const _0xc648ae=Date['now'](),_0x272a0d=_0xc648ae-_0x6bab6c;_0x272a0d>_0x3aa8a7[_0x31e279(0x23e,0x277)]&&(_0x6bab6c=_0xc648ae-_0x272a0d%_0x3aa8a7['frameTime'],_0x3aa8a7['update']());}}(),window[_0x2b85b1(0x2ed,0x27e)]('resize',this['resize'][_0x538856(-0x9e,-0xc1)](this),![]),this['mouse_down']=![],this['mouse_move']=![],this['options'][_0x2b85b1(0x2de,0x2b3)]&&(this[_0x2b85b1(0x27f,0x218)]['on'](mars3d__namespace['EventType'][_0x538856(-0xa7,-0x53)],this[_0x2b85b1(0x197,0x1d7)],this),this['_map']['on'](mars3d__namespace['EventType']['mouseDown'],this[_0x538856(0x62,0xa)],this),this[_0x538856(-0x5e,-0x13)]['on'](mars3d__namespace['EventType']['mouseUp'],this['_onMouseUpEvent'],this)));}['unbindEvent'](){window[_0x8e5743(-0x1ad,-0x1f7)](this[_0x8e5743(-0x182,-0x118)]);function _0x8e5743(_0x1d8f5c,_0xf9be9){return _0x5c10d5(_0xf9be9,_0x1d8f5c- -0x409);}delete this['_animateFrame'],window['removeEventListener'](_0x51098e(0x26c,0x2c7),this[_0x8e5743(-0x1e1,-0x23e)]);function _0x51098e(_0x40ee1c,_0x9ac6ff){return _0x2a7d15(_0x9ac6ff,_0x40ee1c- -0x237);}this[_0x8e5743(-0x15c,-0x160)]['mouseHidden']&&(this[_0x8e5743(-0x200,-0x180)][_0x8e5743(-0x1fc,-0x1d0)](mars3d__namespace[_0x8e5743(-0x181,-0x16d)]['wheel'],this['_onMapWhellEvent'],this),this['_map'][_0x8e5743(-0x1fc,-0x261)](mars3d__namespace[_0x8e5743(-0x181,-0x15b)]['mouseDown'],this[_0x51098e(0x30d,0x378)],this),this[_0x51098e(0x24d,0x1d1)]['off'](mars3d__namespace[_0x8e5743(-0x181,-0x202)]['mouseUp'],this[_0x8e5743(-0x247,-0x1f5)],this),this[_0x51098e(0x24d,0x2c1)]['off'](mars3d__namespace['EventType'][_0x8e5743(-0x1b7,-0x170)],this['_onMouseMoveEvent'],this));}[_0x5c10d5(0x14d,0x1c8)](_0x158626){clearTimeout(this[_0xacaf7d(0x3cb,0x390)]);function _0xacaf7d(_0x221194,_0x39943c){return _0x2a7d15(_0x221194,_0x39943c- -0x15d);}if(!this['show']||!this['canvas'])return;this['canvas']['style']['visibility']='hidden',this['refreshTimer']=setTimeout(()=>{function _0x475e71(_0x2fe46c,_0x3c1a45){return _0xacaf7d(_0x2fe46c,_0x3c1a45- -0x2f7);}if(!this[_0x475e71(0xc1,0xea)])return;this['redraw']();function _0x40e092(_0x5ad7de,_0x3ae003){return _0xacaf7d(_0x5ad7de,_0x3ae003-0x1a0);}this[_0x475e71(0x6e,0x91)]['style']['visibility']='visible';},0xc8);}['_onMouseDownEvent'](_0x132bd6){this['mouse_down']=!![];function _0x353ba9(_0x1543b9,_0x51f60e){return _0x2a7d15(_0x1543b9,_0x51f60e- -0x16a);}function _0x1dd81a(_0x519e1e,_0x3ac31a){return _0x5c10d5(_0x519e1e,_0x3ac31a-0x2ad);}this['_map']['off'](mars3d__namespace[_0x1dd81a(0x538,0x535)]['mouseMove'],this['_onMouseMoveEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x1dd81a(0x565,0x4ff)],this[_0x1dd81a(0x4f2,0x524)],this);}['_onMouseMoveEvent'](_0x4271e1){if(!this['show']||!this['canvas'])return;function _0x23310e(_0x59f17c,_0x3b521c){return _0x2a7d15(_0x3b521c,_0x59f17c- -0x722);}this['mouse_down']&&(this['canvas']['style']['visibility']=_0x23310e(-0x2d7,-0x329),this['mouse_move']=!![]);}['_onMouseUpEvent'](_0x2d079e){if(!this['show']||!this[_0x578602(0x3f4,0x3cf)])return;this[_0x578602(0x355,0x36e)][_0x578602(0x303,0x372)](mars3d__namespace[_0x578602(0x408,0x3ed)][_0x578602(0x3e9,0x3b7)],this['_onMouseMoveEvent'],this);this['mouse_down']&&this['mouse_move']&&this['redraw']();function _0x3027a4(_0x4d1e64,_0x1cc114){return _0x2a7d15(_0x1cc114,_0x4d1e64- -0x4e2);}this['canvas'][_0x3027a4(-0xd,-0x1e)]['visibility']='visible';function _0x578602(_0xa52fa7,_0x1e31db){return _0x5c10d5(_0xa52fa7,_0x1e31db-0x165);}this['mouse_down']=![],this[_0x3027a4(0x23,-0x24)]=![];}['setData'](_0x159b4b){function _0x14968d(_0x443e95,_0x27896f){return _0x2a7d15(_0x27896f,_0x443e95- -0x5ee);}function _0x179121(_0xfd4be7,_0x52b380){return _0x5c10d5(_0x52b380,_0xfd4be7-0xc0);}this[_0x179121(0x287,0x20f)](),this['windData']=_0x159b4b,this[_0x14968d(-0xd0,-0xe4)][_0x179121(0x29c,0x2e0)](_0x159b4b),this['redraw']();}[_0x2a7d15(0x54c,0x4c8)](){if(!this['show'])return;function _0x4a10c2(_0x535eb9,_0x10d04c){return _0x2a7d15(_0x535eb9,_0x10d04c- -0x5ec);}function _0xea04f5(_0x4d64ef,_0x37fa98){return _0x2a7d15(_0x37fa98,_0x4d64ef- -0x655);}this['windField'][_0x4a10c2(-0xef,-0xd1)](this[_0x4a10c2(-0x136,-0xc4)]),this['update']();}[_0x2a7d15(0x3e6,0x448)](){function _0x2237e4(_0x380058,_0xc67837){return _0x5c10d5(_0xc67837,_0x380058- -0x306);}function _0x3a5f9a(_0x250718,_0x25fd92){return _0x2a7d15(_0x25fd92,_0x250718- -0x71);}if(this['_updateIng'])return;this[_0x3a5f9a(0x3d0,0x3e3)]=!![];if(this['worker'])this[_0x2237e4(-0x63,-0x42)][_0x3a5f9a(0x3d7,0x3a7)]();else{const _0x5e6267=this['windField']['getParticles']();this['_drawLines'](_0x5e6267);}this['_updateIng']=![];}[_0x2a7d15(0x4a8,0x458)](_0x572add){function _0x1039ba(_0xb61630,_0x523fe1){return _0x5c10d5(_0xb61630,_0x523fe1- -0x329);}this[_0x1039ba(-0xc1,-0x100)]=_0x572add,this[_0x1039ba(-0x76,-0xf7)]['globalCompositeOperation']=_0x1039ba(-0x8,-0x7b),this['canvasContext'][_0x1039ba(-0x148,-0x119)](0x0,0x0,this[_0x3acd86(0x268,0x286)],this['canvasHeight']),this['canvasContext']['globalCompositeOperation']='lighter',this['canvasContext'][_0x1039ba(-0xe1,-0x14a)]=0.9;const _0x3526fe=this[_0x1039ba(-0x121,-0x120)][_0x1039ba(-0x133,-0x121)][_0x1039ba(-0x79,-0x8a)]!==Cesium['SceneMode'][_0x3acd86(0x244,0x1ee)];function _0x3acd86(_0x229d68,_0x374f1d){return _0x5c10d5(_0x229d68,_0x374f1d-0xc);}const _0x574eb7=this['canvasWidth']*0.25;if(this['_colorRamp'])for(let _0x377c1b=0x0,_0x476b65=_0x572add['length'];_0x377c1b<_0x476b65;_0x377c1b++){const _0x1e0d08=_0x572add[_0x377c1b],_0x50696e=this[_0x1039ba(-0x103,-0xfa)](_0x1e0d08,_0x1e0d08['lng'],_0x1e0d08['lat'],_0x1e0d08[_0x3acd86(0x21d,0x1f7)]),_0x38b9bf=this['_tomap'](_0x1e0d08,_0x1e0d08['tlng'],_0x1e0d08['tlat'],_0x1e0d08['talt']);if(!_0x50696e||!_0x38b9bf)continue;if(_0x3526fe&&Math['abs'](_0x50696e[0x0]-_0x38b9bf[0x0])>=_0x574eb7)continue;this[_0x3acd86(0x2c1,0x23e)]['beginPath'](),this['canvasContext']['lineWidth']=this['lineWidth'],this['canvasContext'][_0x1039ba(-0x191,-0x137)]=this['_colorRamp']['getColor'](_0x1e0d08[_0x3acd86(0x2fe,0x2be)]),this['canvasContext'][_0x1039ba(-0x143,-0x144)](_0x50696e[0x0],_0x50696e[0x1]),this[_0x3acd86(0x25f,0x23e)][_0x1039ba(-0x72,-0xca)](_0x38b9bf[0x0],_0x38b9bf[0x1]),this['canvasContext'][_0x3acd86(0x245,0x28b)]();}else{this['canvasContext']['beginPath'](),this[_0x1039ba(-0x153,-0xf7)]['lineWidth']=this['lineWidth'],this[_0x1039ba(-0x15a,-0xf7)]['strokeStyle']=this[_0x3acd86(0x23d,0x255)];for(let _0x476652=0x0,_0x55212f=_0x572add[_0x1039ba(-0xad,-0x8b)];_0x476652<_0x55212f;_0x476652++){const _0xd1dc63=_0x572add[_0x476652],_0x110503=this[_0x3acd86(0x1e3,0x23b)](_0xd1dc63,_0xd1dc63['lng'],_0xd1dc63[_0x1039ba(0x17,-0x63)],_0xd1dc63['alt']),_0x14ff6e=this['_tomap'](_0xd1dc63,_0xd1dc63['tlng'],_0xd1dc63['tlat'],_0xd1dc63[_0x3acd86(0x32a,0x2d4)]);if(!_0x110503||!_0x14ff6e)continue;if(_0x3526fe&&Math[_0x3acd86(0x245,0x238)](_0x110503[0x0]-_0x14ff6e[0x0])>=_0x574eb7)continue;this['canvasContext']['moveTo'](_0x110503[0x0],_0x110503[0x1]),this[_0x3acd86(0x210,0x23e)]['lineTo'](_0x14ff6e[0x0],_0x14ff6e[0x1]);}this['canvasContext']['stroke']();}}['_tomap'](_0x3633ee,_0x15c826,_0x3da031,_0x161c5b){const _0x3d6457=Cesium['Cartesian3']['fromDegrees'](_0x15c826,_0x3da031,_0x161c5b??this[_0xd0de21(0x329,0x364)]);function _0xf1ebc4(_0x4dbdde,_0x1f26ba){return _0x5c10d5(_0x1f26ba,_0x4dbdde- -0x44d);}const _0x308e6a=this[_0xd0de21(0x2f3,0x2f4)]['scene'];function _0xd0de21(_0x9ce3b3,_0x37f5a9){return _0x2a7d15(_0x9ce3b3,_0x37f5a9- -0x190);}if(_0x308e6a['mode']===Cesium['SceneMode'][_0xd0de21(0x263,0x2cd)]){const _0x3faf12=new Cesium[(_0xd0de21(0x246,0x2ac))](_0x308e6a[_0xd0de21(0x308,0x310)][_0xf1ebc4(-0x277,-0x284)],_0x308e6a[_0xd0de21(0x267,0x2b6)]['positionWC']),_0x41e149=_0x3faf12[_0xf1ebc4(-0x1bf,-0x1e4)](_0x3d6457);if(!_0x41e149)return _0x3633ee['age']=0x0,null;}const _0x4bd299=mars3d__namespace[_0xf1ebc4(-0x18b,-0x155)]['toWindowCoordinates'](this['_map'][_0xd0de21(0x33b,0x2f3)],_0x3d6457);return _0x4bd299?[_0x4bd299['x'],_0x4bd299['y']]:null;}['clear'](){function _0x2876e3(_0xf84e4d,_0x233a10){return _0x5c10d5(_0xf84e4d,_0x233a10- -0x151);}function _0x4b39d5(_0x383587,_0xe75f45){return _0x2a7d15(_0x383587,_0xe75f45- -0x126);}this[_0x4b39d5(0x3ec,0x3f8)][_0x4b39d5(0x347,0x31c)](),delete this['windData'];}['initWorker'](){function _0xffa15c(_0x29b786,_0x586332){return _0x5c10d5(_0x29b786,_0x586332- -0x34b);}this['worker']=new Worker(this[_0x1308ac(0x3b2,0x32d)]['worker']),this['worker'][_0xffa15c(-0x1b3,-0x13d)]=_0xdbe3ff=>{this[_0x39a1e8(0x15,-0x9)](_0xdbe3ff['data']['particles']);function _0x43cff8(_0x5058ce,_0x375ae6){return _0x1308ac(_0x375ae6,_0x5058ce-0x1a0);}function _0x39a1e8(_0x32792c,_0x467599){return _0x1308ac(_0x467599,_0x32792c- -0x248);}this[_0x39a1e8(0x4,0x27)]=![];};function _0x1308ac(_0x2fd8b1,_0x47aea8){return _0x2a7d15(_0x2fd8b1,_0x47aea8- -0x1fb);}this['windField']={'init':_0x195d60=>{const _0x23f9af={};_0x23f9af['type']='init',_0x23f9af['options']=_0x195d60,this['worker']['postMessage'](_0x23f9af);},'setOptions':_0x51ad0e=>{function _0x47cf90(_0x1f06dc,_0x46f261){return _0xffa15c(_0x46f261,_0x1f06dc-0x439);}const _0x5089bc={};_0x5089bc['type']='setOptions',_0x5089bc['options']=_0x51ad0e,this[_0x47cf90(0x34f,0x3c2)]['postMessage'](_0x5089bc);},'setDate':_0x35e038=>{const _0x2d62e8={};function _0x5a5e65(_0x320a83,_0x57be6b){return _0x1308ac(_0x320a83,_0x57be6b-0x262);}_0x2d62e8[_0x1f23c2(-0x285,-0x2be)]=_0x5a5e65(0x43b,0x4be),_0x2d62e8['data']=_0x35e038;function _0x1f23c2(_0x4bbd1a,_0x124ec7){return _0x1308ac(_0x4bbd1a,_0x124ec7- -0x508);}this['worker']['postMessage'](_0x2d62e8);},'update':()=>{if(this['_updateIng2'])return;this['_updateIng2']=!![];const _0x401d32={};_0x401d32['type']='update',this['worker']['postMessage'](_0x401d32);},'clear':()=>{const _0x38d829={};function _0x10693c(_0xc6ee4,_0x53dafb){return _0x1308ac(_0x53dafb,_0xc6ee4- -0x53d);}function _0x162e0f(_0x50f25e,_0x594470){return _0x1308ac(_0x594470,_0x50f25e-0x57);}_0x38d829[_0x10693c(-0x2f3,-0x2f1)]='clear',this[_0x162e0f(0x338,0x383)]['postMessage'](_0x38d829);}},this[_0x1308ac(0x3ab,0x323)]['init'](this[_0xffa15c(-0x73,-0x9e)]);}}mars3d__namespace[_0x2a7d15(0x533,0x4e8)][_0x5c10d5(0x295,0x2bb)]('canvasWind',CanvasWindLayer),mars3d__namespace['layer']['CanvasWindLayer']=CanvasWindLayer,mars3d__namespace[_0x5c10d5(0x28f,0x2b3)]=CanvasWindField,mars3d__namespace['WindUtil']=WindUtil,exports['CanvasWindField']=CanvasWindField,exports['CanvasWindLayer']=CanvasWindLayer,exports[_0x5c10d5(0x265,0x2a8)]=WindLayer,exports[_0x5c10d5(0x27f,0x230)]=WindUtil;const _0xe3280f={};_0xe3280f['value']=!![],Object['defineProperty'](exports,'__esModule',_0xe3280f);
}));
