/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.11
 * 编译日期：2023-11-04 00:01:25
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x491624=_0x3978;(function(_0x4d2c4b,_0xaddf12){const _0x31fefa={_0xa8dd4e:0x1ce,_0x544a32:0x1e4,_0x4950ed:0x1b8},_0xbf5187=_0x3978,_0x1c2fda=_0x4d2c4b();while(!![]){try{const _0x39d423=-parseInt(_0xbf5187(0x1b3))/0x1+-parseInt(_0xbf5187(_0x31fefa._0xa8dd4e))/0x2*(parseInt(_0xbf5187(0x1e7))/0x3)+-parseInt(_0xbf5187(0x1af))/0x4*(parseInt(_0xbf5187(_0x31fefa._0x544a32))/0x5)+-parseInt(_0xbf5187(0x1cc))/0x6+-parseInt(_0xbf5187(0x1c6))/0x7+parseInt(_0xbf5187(0x1e3))/0x8*(-parseInt(_0xbf5187(0x1ae))/0x9)+-parseInt(_0xbf5187(0x1d7))/0xa*(-parseInt(_0xbf5187(_0x31fefa._0x4950ed))/0xb);if(_0x39d423===_0xaddf12)break;else _0x1c2fda['push'](_0x1c2fda['shift']());}catch(_0x1deb6d){_0x1c2fda['push'](_0x1c2fda['shift']());}}}(_0x39c6,0xea527));function _interopNamespace(_0x4890e4){const _0x4d54c8={_0x404af9:0x1d9,_0x102ed9:0x1a9},_0x520c48=_0x3978;if(_0x4890e4&&_0x4890e4['__esModule'])return _0x4890e4;var _0xc4d72e=Object['create'](null);return _0x4890e4&&Object[_0x520c48(_0x4d54c8._0x404af9)](_0x4890e4)[_0x520c48(_0x4d54c8._0x102ed9)](function(_0x256a72){if(_0x256a72!=='default'){var _0x4d2e6e=Object['getOwnPropertyDescriptor'](_0x4890e4,_0x256a72);Object['defineProperty'](_0xc4d72e,_0x256a72,_0x4d2e6e['get']?_0x4d2e6e:{'enumerable':!![],'get':function(){return _0x4890e4[_0x256a72];}});}}),_0xc4d72e['default']=_0x4890e4,_0xc4d72e;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x53daed,_0x4cf973){const _0x3ac9c4={_0x2059d4:0x1e9},_0x5e8217=_0x3978;this[_0x5e8217(0x1be)]=_0x53daed,this['dimensions']=['lng',_0x5e8217(_0x3ac9c4._0x2059d4)],this['_mapOffset']=[0x0,0x0],this['_api']=_0x4cf973;}['setMapOffset'](_0x248a0e){this['_mapOffset']=_0x248a0e;}[_0x491624(0x1a7)](){return this['_mars3d_scene'];}['dataToPoint'](_0x127947){const _0x1025ae={_0x3f1809:0x1b4,_0x548ad3:0x1b9},_0x437f17=_0x491624,_0x476984=this[_0x437f17(0x1be)],_0x177296=[NaN,NaN];let _0x12aa74=_0x476984['echartsFixedHeight'];_0x476984['echartsAutoHeight']&&(_0x12aa74=_0x476984['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x127947[0x0],_0x127947[0x1])));const _0x489e05=Cesium$1[_0x437f17(_0x1025ae._0x3f1809)]['fromDegrees'](_0x127947[0x0],_0x127947[0x1],_0x12aa74);if(!_0x489e05)return _0x177296;const _0x536072=Cesium$1['SceneTransforms'][_0x437f17(_0x1025ae._0x548ad3)](_0x476984,_0x489e05);if(!_0x536072)return _0x177296;if(_0x476984[_0x437f17(0x1e8)]&&_0x476984['mode']===Cesium$1['SceneMode'][_0x437f17(0x1bf)]){const _0x3a675c=new Cesium$1['EllipsoidalOccluder'](_0x476984['globe']['ellipsoid'],_0x476984['camera']['positionWC']),_0x5bd940=_0x3a675c['isPointVisible'](_0x489e05);if(!_0x5bd940)return _0x177296;}return[_0x536072['x']-this['_mapOffset'][0x0],_0x536072['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x1488a={_0x188245:0x1b1,_0x51d5e8:0x1b2},_0x4326f7=_0x491624,_0x140ee5=this[_0x4326f7(_0x1488a._0x188245)];return new echarts__namespace['graphic'][(_0x4326f7(0x1bc))](0x0,0x0,_0x140ee5[_0x4326f7(_0x1488a._0x51d5e8)](),_0x140ee5['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}function _0x3978(_0x31113c,_0x2e5a38){const _0x39c625=_0x39c6();return _0x3978=function(_0x397878,_0xad0866){_0x397878=_0x397878-0x1a6;let _0x22f904=_0x39c625[_0x397878];return _0x22f904;},_0x3978(_0x31113c,_0x2e5a38);}CompositeCoordinateSystem[_0x491624(0x1e6)]=[_0x491624(0x1c1),_0x491624(0x1e9)],CompositeCoordinateSystem['create']=function(_0x5155dd,_0x34639c){const _0x316d1c={_0x1fed0e:0x1ab},_0x2a5cdc={_0x3c5237:0x1d1,_0x297d94:0x1d3,_0x46e3d8:0x1d4},_0x48b929=_0x491624;let _0x3392be;const _0x3257f2=_0x5155dd[_0x48b929(_0x316d1c._0x1fed0e)]['ecInstance'][_0x48b929(0x1be)];_0x5155dd['eachComponent'](_0x48b929(0x1a6),function(_0x31337e){const _0xfe7e41=_0x48b929,_0x1b855e=_0x34639c[_0xfe7e41(_0x2a5cdc._0x3c5237)]()[_0xfe7e41(0x1b7)];if(!_0x1b855e)return;!_0x3392be&&(_0x3392be=new CompositeCoordinateSystem(_0x3257f2,_0x34639c)),_0x31337e[_0xfe7e41(_0x2a5cdc._0x297d94)]=_0x3392be,_0x3392be['setMapOffset'](_0x31337e[_0xfe7e41(_0x2a5cdc._0x46e3d8)]||[0x0,0x0]);}),_0x5155dd['eachSeries'](function(_0x14f306){const _0x2e0c83=_0x48b929;_0x14f306['get'](_0x2e0c83(0x1d3))==='mars3dMap'&&(!_0x3392be&&(_0x3392be=new CompositeCoordinateSystem(_0x3257f2,_0x34639c)),_0x14f306['coordinateSystem']=_0x3392be);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x491624(0x1ba)]('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':_0x491624(0x1ad),'event':_0x491624(0x1ad),'update':_0x491624(0x1bb)},function(_0x2a4108,_0x5ab175){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x491624(0x1d5)]({'type':_0x491624(0x1a6),'init':function(_0x5d16d5,_0x4138b6){const _0x19ded2={_0x3faafd:0x1cb},_0x1651fb=_0x491624;this['api']=_0x4138b6,this['scene']=_0x5d16d5['scheduler']['ecInstance']['_mars3d_scene'],this['scene'][_0x1651fb(_0x19ded2._0x3faafd)]['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x546b24,_0x3d0481){const _0x386410={_0x401520:0x1cd},_0x626a16=_0x491624;this['api'][_0x626a16(_0x386410._0x401520)]({'type':'mars3dMapRoam'});},'render':function(_0x1f3253,_0x112fd4,_0x564fe0){},'dispose':function(_0x29d997){const _0xa0791c={_0x54f8d0:0x1c5},_0x175e8d=_0x491624;this['scene']['postRender'][_0x175e8d(_0xa0791c._0x54f8d0)](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer'][_0x491624(0x1e2)];class EchartsLayer extends BaseLayer{constructor(_0x1e7f25={}){const _0x58731d=_0x491624;super(_0x1e7f25),this[_0x58731d(0x1c9)]=this['options'][_0x58731d(0x1de)];}get['layer'](){const _0x4a24a6={_0x8f053a:0x1e1},_0x45f700=_0x491624;return this[_0x45f700(_0x4a24a6._0x8f053a)];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x491624(0x1de)](_0x229081){const _0x11c5e3={_0x4607f9:0x1c9,_0x24aeac:0x1d8},_0x14f991=_0x491624;this[_0x14f991(_0x11c5e3._0x4607f9)]=_0x229081,this['_echartsContainer']&&(_0x229081?this['_echartsContainer']['style']['pointerEvents']=_0x14f991(0x1df):this['_echartsContainer']['style']['pointerEvents']=_0x14f991(_0x11c5e3._0x24aeac));}['_setOptionsHook'](_0x345fc7,_0x1e5e54){const _0x49e036={_0x140bcb:0x1c3},_0x9d4886=_0x491624;this[_0x9d4886(_0x49e036._0x140bcb)](_0x345fc7);}['_showHook'](_0x3ef4ee){const _0x265610=_0x491624;_0x3ef4ee?this[_0x265610(0x1db)]['style']['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}[_0x491624(0x1c0)](){const _0x462111={_0x40da4b:0x1bd,_0x3499ea:0x1b5},_0x24518=_0x491624;this['_map'][_0x24518(_0x462111._0x40da4b)][_0x24518(0x1e8)]=this['options']['depthTest']??!![],this['_map']['scene'][_0x24518(_0x462111._0x3499ea)]=this[_0x24518(0x1dc)]['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x3e6ef6=_0x491624;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance'][_0x3e6ef6(0x1be)]=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x4981e5={_0x3fed4d:0x1c7},_0x3c95aa=_0x491624;this['_echartsInstance']&&(this[_0x3c95aa(0x1e1)][_0x3c95aa(0x1b0)](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map'][_0x3c95aa(_0x4981e5._0x3fed4d)]['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}[_0x491624(0x1c4)](){const _0x3367ae={_0x4e1907:0x1aa,_0x405328:0x1e5,_0x578152:0x1a8,_0x1b1fe1:0x1dd},_0x222010=_0x491624,_0x2a341c=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map']['container']);return _0x2a341c['id']=this['id'],_0x2a341c['style']['position']=_0x222010(_0x3367ae._0x4e1907),_0x2a341c[_0x222010(_0x3367ae._0x405328)]['top']='0px',_0x2a341c[_0x222010(0x1e5)]['left']='0px',_0x2a341c['style']['width']=this[_0x222010(_0x3367ae._0x578152)]['scene']['canvas'][_0x222010(0x1ca)]+'px',_0x2a341c['style'][_0x222010(_0x3367ae._0x1b1fe1)]=this['_map']['scene']['canvas']['clientHeight']+'px',_0x2a341c['style'][_0x222010(0x1de)]=this['_pointerEvents']?'all':'none',_0x2a341c['style'][_0x222010(0x1b6)]=this['options']['zIndex']??0x9,_0x2a341c;}['resize'](){const _0x2f6e1c={_0x233e87:0x1ca},_0x1e23fa=_0x491624;if(!this[_0x1e23fa(0x1e1)])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas'][_0x1e23fa(_0x2f6e1c._0x233e87)]+'px',this['_echartsContainer']['style']['height']=this['_map']['scene']['canvas']['clientHeight']+'px',this[_0x1e23fa(0x1e1)][_0x1e23fa(0x1cf)]();}['setEchartsOption'](_0xc8fb1,_0x5e5611,_0xab93d9){const _0x598587=_0x491624;this['_echartsInstance']&&(_0xc8fb1={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0xc8fb1,{'onlySimpleType':!![]})},delete _0xc8fb1['eventParent'],this[_0x598587(0x1e1)]['setOption'](_0xc8fb1,_0x5e5611,_0xab93d9));}['getRectangle'](_0x157b8c){const _0x9155e8={_0x42e7a8:0x1dc,_0x35eda5:0x1c2},_0x424ca8={_0x14ea87:0x1a9},_0x25227b={_0xb1521e:0x1e0},_0x55ca4e={_0xea7c9b:0x1da},_0x3299a9=_0x491624;let _0x3806fc,_0xba669f,_0x1e3e5a,_0xd1157e;function _0x1f425c(_0x17eaae){const _0x4bcba8=_0x3978;if(!Array['isArray'](_0x17eaae))return;const _0x40d70d=_0x17eaae[0x0]||0x0,_0x537455=_0x17eaae[0x1]||0x0;_0x40d70d!==0x0&&_0x537455!==0x0&&(_0x3806fc===undefined?(_0x3806fc=_0x40d70d,_0xba669f=_0x40d70d,_0x1e3e5a=_0x537455,_0xd1157e=_0x537455):(_0x3806fc=Math['min'](_0x3806fc,_0x40d70d),_0xba669f=Math[_0x4bcba8(_0x55ca4e._0xea7c9b)](_0xba669f,_0x40d70d),_0x1e3e5a=Math['min'](_0x1e3e5a,_0x537455),_0xd1157e=Math['max'](_0xd1157e,_0x537455)));}const _0xd6f2a0=this[_0x3299a9(_0x9155e8._0x42e7a8)]['series'];_0xd6f2a0&&_0xd6f2a0['forEach'](_0x38b7c9=>{const _0x187090=_0x3299a9;_0x38b7c9['data']&&_0x38b7c9['data'][_0x187090(_0x424ca8._0x14ea87)](_0x2716c6=>{const _0x14f9a9=_0x187090;if(_0x2716c6[_0x14f9a9(_0x25227b._0xb1521e)])_0x1f425c(_0x2716c6['value']);else _0x2716c6['coords']&&_0x2716c6['coords']['forEach'](_0x3b94ca=>{_0x1f425c(_0x3b94ca);});});});if(_0x3806fc===0x0&&_0x1e3e5a===0x0&&_0xba669f===0x0&&_0xd1157e===0x0)return null;return _0x157b8c!==null&&_0x157b8c!==void 0x0&&_0x157b8c[_0x3299a9(_0x9155e8._0x35eda5)]?{'xmin':_0x3806fc,'xmax':_0xba669f,'ymin':_0x1e3e5a,'ymax':_0xd1157e}:Cesium['Rectangle']['fromDegrees'](_0x3806fc,_0x1e3e5a,_0xba669f,_0xd1157e);}['on'](_0x30a3e3,_0x372f8a,_0x219b92){return this['_echartsInstance']['on'](_0x30a3e3,_0x372f8a,_0x219b92||this),this;}['onByQuery'](_0x4b9bb1,_0x4c6eaa,_0x5e8b63,_0x4c8aa5){return this['_echartsInstance']['on'](_0x4b9bb1,_0x4c6eaa,_0x5e8b63,_0x4c8aa5||this),this;}[_0x491624(0x1ac)](_0xaa7ceb,_0x5c4477,_0x33cc17){return this['_echartsInstance']['off'](_0xaa7ceb,_0x5c4477,_0x33cc17||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x491624(0x1d2),EchartsLayer),mars3d__namespace['layer'][_0x491624(0x1d0)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x491624(0x1d0)]=EchartsLayer,Object[_0x491624(0x1d9)](echarts)['forEach'](function(_0x545bec){const _0x2e46da={_0x1bf55e:0x1c8,_0x5c6f13:0x1d6},_0x327eed=_0x491624;if(_0x545bec!=='default'&&!exports[_0x327eed(_0x2e46da._0x1bf55e)](_0x545bec))Object[_0x327eed(_0x2e46da._0x5c6f13)](exports,_0x545bec,{'enumerable':!![],'get':function(){return echarts[_0x545bec];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x39c6(){const _0x15de74=['postRender','292218XBokTt','dispatchAction','82630ByuHAK','resize','EchartsLayer','getZr','echarts','coordinateSystem','__mapOffset','extendComponentView','defineProperty','2056030NhBBWD','none','keys','max','_echartsContainer','options','height','pointerEvents','all','value','_echartsInstance','BaseLayer','16AbWXmJ','5IyYlFt','style','dimensions','15izncZS','echartsDepthTest','lat','mars3dMap','getBMap','_map','forEach','absolute','scheduler','off','mars3dMapRoam','1289286rZpSpX','4985612WrlSpM','clear','_api','getWidth','509228TpEbXA','Cartesian3','echartsAutoHeight','zIndex','painter','220XVnPCQ','wgs84ToWindowCoordinates','registerCoordinateSystem','updateLayout','BoundingRect','scene','_mars3d_scene','SCENE3D','_mountedHook','lng','isFormat','setEchartsOption','_createChartOverlay','removeEventListener','5984020QMcMTo','container','hasOwnProperty','_pointerEvents','clientWidth'];_0x39c6=function(){return _0x15de74;};return _0x39c6();}
}));
