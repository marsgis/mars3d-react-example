/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.4
 * 编译日期：2023-09-05 14:31:23
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x46c142=_0xd51d;(function(_0x409d81,_0x3fffc7){const _0x17269f={_0x386505:0xad,_0x512047:0xab,_0x3881f0:0x8d,_0xf33cce:0x82,_0x56489f:0x90,_0x52ce86:0x81,_0x2c43e2:0x80},_0x39aa1f=_0xd51d,_0x4b718e=_0x409d81();while(!![]){try{const _0x1f360f=-parseInt(_0x39aa1f(_0x17269f._0x386505))/0x1+-parseInt(_0x39aa1f(0xb9))/0x2+parseInt(_0x39aa1f(_0x17269f._0x512047))/0x3*(parseInt(_0x39aa1f(0xae))/0x4)+-parseInt(_0x39aa1f(0x84))/0x5*(parseInt(_0x39aa1f(_0x17269f._0x3881f0))/0x6)+parseInt(_0x39aa1f(_0x17269f._0xf33cce))/0x7*(-parseInt(_0x39aa1f(_0x17269f._0x56489f))/0x8)+-parseInt(_0x39aa1f(_0x17269f._0x52ce86))/0x9*(-parseInt(_0x39aa1f(0x9c))/0xa)+parseInt(_0x39aa1f(_0x17269f._0x2c43e2))/0xb;if(_0x1f360f===_0x3fffc7)break;else _0x4b718e['push'](_0x4b718e['shift']());}catch(_0x33e6d7){_0x4b718e['push'](_0x4b718e['shift']());}}}(_0x2b6f,0xdc7ee));function _interopNamespace(_0x229458){const _0x52c22e={_0x89a70c:0x7b},_0x359fd2=_0xd51d;if(_0x229458&&_0x229458[_0x359fd2(0x8e)])return _0x229458;var _0x157c84=Object[_0x359fd2(0x8a)](null);return _0x229458&&Object['keys'](_0x229458)['forEach'](function(_0x31d26d){const _0x1eeae1=_0x359fd2;if(_0x31d26d!==_0x1eeae1(_0x52c22e._0x89a70c)){var _0x3d601b=Object['getOwnPropertyDescriptor'](_0x229458,_0x31d26d);Object['defineProperty'](_0x157c84,_0x31d26d,_0x3d601b['get']?_0x3d601b:{'enumerable':!![],'get':function(){return _0x229458[_0x31d26d];}});}}),_0x157c84['default']=_0x229458,_0x157c84;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0xf51954,_0x3c4091){const _0x30a86a={_0x53e037:0x86},_0x372473=_0xd51d;this[_0x372473(_0x30a86a._0x53e037)]=_0xf51954,this['dimensions']=[_0x372473(0xb8),'lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x3c4091;}['setMapOffset'](_0x1f9e87){this['_mapOffset']=_0x1f9e87;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x3c1e55){const _0x40355b={_0x3fa53d:0x7c,_0x4c3472:0xa1,_0x50c0a8:0xa7},_0x91143e=_0xd51d,_0x25fe78=this['_mars3d_scene'],_0x287f89=[NaN,NaN];let _0x34b017=_0x25fe78['echartsFixedHeight'];_0x25fe78[_0x91143e(_0x40355b._0x3fa53d)]&&(_0x34b017=_0x25fe78['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x3c1e55[0x0],_0x3c1e55[0x1])));const _0x1fc22d=Cesium$1[_0x91143e(0xa0)]['fromDegrees'](_0x3c1e55[0x0],_0x3c1e55[0x1],_0x34b017);if(!_0x1fc22d)return _0x287f89;const _0x52a509=Cesium$1['SceneTransforms'][_0x91143e(0xb2)](_0x25fe78,_0x1fc22d);if(!_0x52a509)return _0x287f89;if(_0x25fe78['echartsDepthTest']&&_0x25fe78['mode']===Cesium$1['SceneMode']['SCENE3D']){const _0x5513c1=new Cesium$1['EllipsoidalOccluder'](_0x25fe78[_0x91143e(0x92)][_0x91143e(_0x40355b._0x4c3472)],_0x25fe78[_0x91143e(_0x40355b._0x50c0a8)]['positionWC']),_0x18881a=_0x5513c1['isPointVisible'](_0x1fc22d);if(!_0x18881a)return _0x287f89;}return[_0x52a509['x']-this[_0x91143e(0x78)][0x0],_0x52a509['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x11f8ef={_0x92030d:0x76},_0x2b9311=_0xd51d,_0x463adb=this['_api'];return new echarts__namespace[(_0x2b9311(_0x11f8ef._0x92030d))][(_0x2b9311(0x9d))](0x0,0x0,_0x463adb['getWidth'](),_0x463adb['getHeight']());}['getRoamTransform'](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng',_0x46c142(0xa8)],CompositeCoordinateSystem['create']=function(_0x136cc9,_0x21badd){const _0x3ab2d5={_0x21932f:0x94},_0x5384bf={_0x31c3f3:0x97},_0x588002=_0x46c142;let _0x49775a;const _0x34aa9d=_0x136cc9['scheduler']['ecInstance']['_mars3d_scene'];_0x136cc9[_0x588002(0x77)]('mars3dMap',function(_0x4c6b8f){const _0x55f3e7=_0x588002,_0x28670a=_0x21badd['getZr']()[_0x55f3e7(0x9b)];if(!_0x28670a)return;!_0x49775a&&(_0x49775a=new CompositeCoordinateSystem(_0x34aa9d,_0x21badd)),_0x4c6b8f[_0x55f3e7(_0x5384bf._0x31c3f3)]=_0x49775a,_0x49775a[_0x55f3e7(0xa4)](_0x4c6b8f['__mapOffset']||[0x0,0x0]);}),_0x136cc9['eachSeries'](function(_0x324755){const _0x498b44=_0x588002;_0x324755['get']('coordinateSystem')===_0x498b44(_0x3ab2d5._0x21932f)&&(!_0x49775a&&(_0x49775a=new CompositeCoordinateSystem(_0x34aa9d,_0x21badd)),_0x324755[_0x498b44(0x97)]=_0x49775a);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x46c142(0x9e)},function(_0x1f114f,_0x34aa91){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':_0x46c142(0x94),'init':function(_0x1cecb4,_0x468828){const _0x3cc984={_0x3ed522:0x79,_0x31c3d0:0x86},_0x43e688=_0x46c142;this['api']=_0x468828,this[_0x43e688(0x8f)]=_0x1cecb4[_0x43e688(_0x3cc984._0x3ed522)]['ecInstance'][_0x43e688(_0x3cc984._0x31c3d0)],this[_0x43e688(0x8f)]['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x1917a4,_0x3abaf8){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x18e4b3,_0x5c1682,_0xf635b6){},'dispose':function(_0x1dae2e){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0xd51d(_0x5f595c,_0x31c0bb){const _0x2b6ffb=_0x2b6f();return _0xd51d=function(_0xd51d5d,_0x448cd8){_0xd51d5d=_0xd51d5d-0x76;let _0x8650a9=_0x2b6ffb[_0xd51d5d];return _0x8650a9;},_0xd51d(_0x5f595c,_0x31c0bb);}class EchartsLayer extends BaseLayer{constructor(_0x316a68={}){const _0x4e68c4=_0x46c142;super(_0x316a68),this[_0x4e68c4(0x7e)]=this[_0x4e68c4(0xb1)]['pointerEvents'];}get['layer'](){const _0x467efd=_0x46c142;return this[_0x467efd(0x96)];}get[_0x46c142(0x83)](){const _0x1b64dc={_0x5dff25:0x7e},_0x2d8661=_0x46c142;return this[_0x2d8661(_0x1b64dc._0x5dff25)];}set['pointerEvents'](_0x248aa1){const _0x344be4={_0x1462a0:0x98},_0x56f2c3=_0x46c142;this['_pointerEvents']=_0x248aa1,this['_echartsContainer']&&(_0x248aa1?this['_echartsContainer']['style']['pointerEvents']='all':this[_0x56f2c3(0xb6)][_0x56f2c3(_0x344be4._0x1462a0)]['pointerEvents']='none');}[_0x46c142(0x89)](_0x267b17,_0x194057){this['setEchartsOption'](_0x267b17);}[_0x46c142(0x7a)](_0x20838d){const _0x450ab8=_0x46c142;_0x20838d?this['_echartsContainer']['style']['visibility']=_0x450ab8(0x9a):this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x45b9ea={_0x12bf36:0x7c},_0x1c0e86=_0x46c142;this['_map']['scene'][_0x1c0e86(0x8b)]=this['options'][_0x1c0e86(0xa5)]??!![],this[_0x1c0e86(0xa2)]['scene'][_0x1c0e86(_0x45b9ea._0x12bf36)]=this['options']['clampToGround']??![],this[_0x1c0e86(0xa2)]['scene']['echartsFixedHeight']=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x2303a3={_0x33d74c:0x91},_0x15657e=_0x46c142;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace[_0x15657e(_0x2303a3._0x33d74c)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map'][_0x15657e(0x8f)],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x1c768b=_0x46c142;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map'][_0x1c768b(0xaa)]['removeChild'](this[_0x1c768b(0xb6)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x5b6730={_0x259791:0x8a,_0x8919a4:0xa2,_0x26a081:0xaf,_0x466a9f:0xaf,_0x22991f:0x7d,_0x1209fa:0xa9,_0x32b8f9:0x7e,_0x2a433e:0xb5},_0x4c2e3b=_0x46c142,_0xbaa51e=mars3d__namespace[_0x4c2e3b(0x88)][_0x4c2e3b(_0x5b6730._0x259791)]('div','mars3d-echarts',this[_0x4c2e3b(_0x5b6730._0x8919a4)]['container']);return _0xbaa51e['id']=this['id'],_0xbaa51e['style']['position']=_0x4c2e3b(0xb4),_0xbaa51e['style']['top']=_0x4c2e3b(_0x5b6730._0x26a081),_0xbaa51e['style'][_0x4c2e3b(0x85)]=_0x4c2e3b(_0x5b6730._0x466a9f),_0xbaa51e['style'][_0x4c2e3b(0x9f)]=this[_0x4c2e3b(_0x5b6730._0x8919a4)]['scene']['canvas'][_0x4c2e3b(_0x5b6730._0x22991f)]+'px',_0xbaa51e['style'][_0x4c2e3b(_0x5b6730._0x1209fa)]=this['_map'][_0x4c2e3b(0x8f)]['canvas']['clientHeight']+'px',_0xbaa51e['style']['pointerEvents']=this[_0x4c2e3b(_0x5b6730._0x32b8f9)]?'all':'none',_0xbaa51e['style'][_0x4c2e3b(0xb5)]=this['options'][_0x4c2e3b(_0x5b6730._0x2a433e)]??0x9,_0xbaa51e;}['resize'](){const _0x286b91={_0x6af56d:0x7d,_0x2a44f9:0x8f,_0x34862b:0xb3,_0xc70c54:0x96},_0x294c3d=_0x46c142;if(!this[_0x294c3d(0x96)])return;this['_echartsContainer']['style']['width']=this['_map']['scene'][_0x294c3d(0xb3)][_0x294c3d(_0x286b91._0x6af56d)]+'px',this['_echartsContainer']['style']['height']=this['_map'][_0x294c3d(_0x286b91._0x2a44f9)][_0x294c3d(_0x286b91._0x34862b)]['clientHeight']+'px',this[_0x294c3d(_0x286b91._0xc70c54)]['resize']();}['setEchartsOption'](_0x4b7f7f,_0x21b58c,_0x57a23d){const _0x285514={_0x587b17:0x87},_0x4267f4=_0x46c142;this['_echartsInstance']&&(_0x4b7f7f['mars3dMap']=_0x4b7f7f['mars3dMap']||{},this[_0x4267f4(0x96)][_0x4267f4(_0x285514._0x587b17)](_0x4b7f7f,_0x21b58c,_0x57a23d));}['getRectangle'](_0x10b774){const _0x3ca277={_0x3c76f4:0xa6},_0x44271b={_0x2ba1e9:0x95},_0x1f4db8=_0x46c142;let _0x5229fc,_0x511d0a,_0x2aa299,_0x419a5f;function _0x34f64f(_0x8d53bd){const _0x155615=_0xd51d;if(!Array['isArray'](_0x8d53bd))return;const _0x2cca20=_0x8d53bd[0x0]||0x0,_0x5d5317=_0x8d53bd[0x1]||0x0;_0x2cca20!==0x0&&_0x5d5317!==0x0&&(_0x5229fc===undefined?(_0x5229fc=_0x2cca20,_0x511d0a=_0x2cca20,_0x2aa299=_0x5d5317,_0x419a5f=_0x5d5317):(_0x5229fc=Math['min'](_0x5229fc,_0x2cca20),_0x511d0a=Math['max'](_0x511d0a,_0x2cca20),_0x2aa299=Math[_0x155615(0xa3)](_0x2aa299,_0x5d5317),_0x419a5f=Math[_0x155615(0x99)](_0x419a5f,_0x5d5317)));}const _0x23213f=this['options'][_0x1f4db8(_0x3ca277._0x3c76f4)];_0x23213f&&_0x23213f['forEach'](_0x38e29e=>{const _0x454fd7=_0x1f4db8;_0x38e29e['data']&&_0x38e29e['data'][_0x454fd7(0x7f)](_0x56faa7=>{const _0x2d0aec=_0x454fd7;if(_0x56faa7[_0x2d0aec(_0x44271b._0x2ba1e9)])_0x34f64f(_0x56faa7['value']);else _0x56faa7['coords']&&_0x56faa7['coords']['forEach'](_0x449700=>{_0x34f64f(_0x449700);});});});if(_0x5229fc===0x0&&_0x2aa299===0x0&&_0x511d0a===0x0&&_0x419a5f===0x0)return null;return _0x10b774!==null&&_0x10b774!==void 0x0&&_0x10b774['isFormat']?{'xmin':_0x5229fc,'xmax':_0x511d0a,'ymin':_0x2aa299,'ymax':_0x419a5f}:Cesium['Rectangle']['fromDegrees'](_0x5229fc,_0x2aa299,_0x511d0a,_0x419a5f);}['on'](_0x22cf73,_0x945713,_0x59fdb3){const _0x2a542f={_0x40c7a6:0x96},_0x248e00=_0x46c142;return this[_0x248e00(_0x2a542f._0x40c7a6)]['on'](_0x22cf73,_0x945713,_0x59fdb3||this),this;}['onByQuery'](_0x5ad9b,_0x6b23c1,_0x556374,_0xe6d6b8){return this['_echartsInstance']['on'](_0x5ad9b,_0x6b23c1,_0x556374,_0xe6d6b8||this),this;}[_0x46c142(0x93)](_0x529655,_0x36a666,_0x403fd6){const _0x4b0959=_0x46c142;return this['_echartsInstance'][_0x4b0959(0x93)](_0x529655,_0x36a666,_0x403fd6||this),this;}}mars3d__namespace[_0x46c142(0xb7)][_0x46c142(0xb0)]('echarts',EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x46c142(0x8c)]=EchartsLayer,Object['keys'](echarts)[_0x46c142(0x7f)](function(_0x504de6){const _0x375b38=_0x46c142;if(_0x504de6!==_0x375b38(0x7b)&&!exports['hasOwnProperty'](_0x504de6))Object['defineProperty'](exports,_0x504de6,{'enumerable':!![],'get':function(){return echarts[_0x504de6];}});}),Object[_0x46c142(0xac)](exports,_0x46c142(0x8e),{'value':!![]});function _0x2b6f(){const _0x367544=['_setOptionsHook','create','echartsDepthTest','EchartsLayer','786xagGax','__esModule','scene','72ccIBfs','init','globe','off','mars3dMap','value','_echartsInstance','coordinateSystem','style','max','visible','painter','891260DbvkQP','BoundingRect','updateLayout','width','Cartesian3','ellipsoid','_map','min','setMapOffset','depthTest','series','camera','lat','height','container','120SXCgiu','defineProperty','361655RKOnxJ','158324lcumnh','0px','register','options','wgs84ToWindowCoordinates','canvas','absolute','zIndex','_echartsContainer','LayerUtil','lng','2772638IAUlqK','graphic','eachComponent','_mapOffset','scheduler','_showHook','default','echartsAutoHeight','clientWidth','_pointerEvents','forEach','28579485xbyIGo','27uBuuFp','4214rvbvGn','pointerEvents','68405axesrd','left','_mars3d_scene','setOption','DomUtil'];_0x2b6f=function(){return _0x367544;};return _0x2b6f();}
}));
