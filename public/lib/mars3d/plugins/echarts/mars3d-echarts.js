/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.8
 * 编译日期：2023-10-08 23:31:33
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x1f307a=_0x1982;function _0x6b7c(){const _0x52fb9a=['init','position','getRoamTransform','lat','canvas','191448qNnWdN','157787kFnAXz','clientHeight','height','_mapOffset','keys','forEach','40hmFkIf','1902rkFhIp','_pointerEvents','echartsDepthTest','_echartsContainer','LayerUtil','SceneMode','layer','create','coords','9tAUWUg','mars3dMapRoam','fromDegrees','clientWidth','left','isArray','ecInstance','hasOwnProperty','dispose','wgs84ToWindowCoordinates','style','depthTest','max','4389370OWrZrb','setEchartsOption','addEventListener','matrix','_mars3d_scene','series','177456vrOZsk','1765UwlkGf','api','dimensions','zIndex','hidden','coordinateSystem','default','width','EchartsLayer','_createChartOverlay','21996VJaBAM','SCENE3D','min','getBMap','scene','_map','value','151945rwGqcp','pointerEvents','all','_setOptionsHook','options','isPointVisible','_echartsInstance','0px','Cesium'];_0x6b7c=function(){return _0x52fb9a;};return _0x6b7c();}(function(_0x369ccd,_0x14cf08){const _0x1c19e9={_0x47f115:0xf4,_0x2bfa4b:0xe2,_0x236fff:0xed,_0x14cbe4:0xe3,_0x87db69:0x113},_0x4ba679=_0x1982,_0x6c844e=_0x369ccd();while(!![]){try{const _0x141986=-parseInt(_0x4ba679(_0x1c19e9._0x47f115))/0x1+-parseInt(_0x4ba679(_0x1c19e9._0x2bfa4b))/0x2+-parseInt(_0x4ba679(0x102))/0x3+parseInt(_0x4ba679(_0x1c19e9._0x236fff))/0x4+parseInt(_0x4ba679(_0x1c19e9._0x14cbe4))/0x5*(parseInt(_0x4ba679(0x10a))/0x6)+-parseInt(_0x4ba679(0x103))/0x7*(parseInt(_0x4ba679(0x109))/0x8)+parseInt(_0x4ba679(_0x1c19e9._0x87db69))/0x9*(parseInt(_0x4ba679(0x120))/0xa);if(_0x141986===_0x14cf08)break;else _0x6c844e['push'](_0x6c844e['shift']());}catch(_0x1ae2f3){_0x6c844e['push'](_0x6c844e['shift']());}}}(_0x6b7c,0x21f87));function _0x1982(_0x6469d7,_0x56dfb1){const _0x6b7c34=_0x6b7c();return _0x1982=function(_0x19824d,_0x14602f){_0x19824d=_0x19824d-0xe0;let _0xefde70=_0x6b7c34[_0x19824d];return _0xefde70;},_0x1982(_0x6469d7,_0x56dfb1);}function _interopNamespace(_0x26a669){const _0x4a02f7={_0x3ed6e9:0x111},_0x4b81af={_0x3a5e76:0xe9},_0x3d8084=_0x1982;if(_0x26a669&&_0x26a669['__esModule'])return _0x26a669;var _0x3daf8f=Object[_0x3d8084(_0x4a02f7._0x3ed6e9)](null);return _0x26a669&&Object[_0x3d8084(0x107)](_0x26a669)[_0x3d8084(0x108)](function(_0x4d6623){const _0x56fc35=_0x3d8084;if(_0x4d6623!==_0x56fc35(_0x4b81af._0x3a5e76)){var _0x217b49=Object['getOwnPropertyDescriptor'](_0x26a669,_0x4d6623);Object['defineProperty'](_0x3daf8f,_0x4d6623,_0x217b49['get']?_0x217b49:{'enumerable':!![],'get':function(){return _0x26a669[_0x4d6623];}});}}),_0x3daf8f['default']=_0x26a669,_0x3daf8f;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x1f307a(0xfc)];class CompositeCoordinateSystem{constructor(_0x7595f3,_0x70e748){const _0x3f6d2f={_0x111368:0xe5,_0x544aff:0x106},_0x15d762=_0x1f307a;this['_mars3d_scene']=_0x7595f3,this[_0x15d762(_0x3f6d2f._0x111368)]=['lng','lat'],this[_0x15d762(_0x3f6d2f._0x544aff)]=[0x0,0x0],this['_api']=_0x70e748;}['setMapOffset'](_0x539126){this['_mapOffset']=_0x539126;}[_0x1f307a(0xf0)](){const _0x1687db={_0x4e6da3:0xe0},_0xba2344=_0x1f307a;return this[_0xba2344(_0x1687db._0x4e6da3)];}['dataToPoint'](_0x58b7bc){const _0x529786={_0x8003eb:0x115,_0x2706f3:0x10f,_0x51ee87:0xf9},_0xf309d0=_0x1f307a,_0x5b7024=this[_0xf309d0(0xe0)],_0x3c877f=[NaN,NaN];let _0xb94c02=_0x5b7024['echartsFixedHeight'];_0x5b7024['echartsAutoHeight']&&(_0xb94c02=_0x5b7024['globe']['getHeight'](Cesium$1['Cartographic'][_0xf309d0(_0x529786._0x8003eb)](_0x58b7bc[0x0],_0x58b7bc[0x1])));const _0x59f947=Cesium$1['Cartesian3']['fromDegrees'](_0x58b7bc[0x0],_0x58b7bc[0x1],_0xb94c02);if(!_0x59f947)return _0x3c877f;const _0x23cabd=Cesium$1['SceneTransforms'][_0xf309d0(0x11c)](_0x5b7024,_0x59f947);if(!_0x23cabd)return _0x3c877f;if(_0x5b7024[_0xf309d0(0x10c)]&&_0x5b7024['mode']===Cesium$1[_0xf309d0(_0x529786._0x2706f3)][_0xf309d0(0xee)]){const _0x3d3a77=new Cesium$1['EllipsoidalOccluder'](_0x5b7024['globe']['ellipsoid'],_0x5b7024['camera']['positionWC']),_0x5380c5=_0x3d3a77[_0xf309d0(_0x529786._0x51ee87)](_0x59f947);if(!_0x5380c5)return _0x3c877f;}return[_0x23cabd['x']-this['_mapOffset'][0x0],_0x23cabd['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x4ce3d1=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x4ce3d1['getWidth'](),_0x4ce3d1['getHeight']());}[_0x1f307a(0xff)](){const _0x254bf3=_0x1f307a;return echarts__namespace[_0x254bf3(0x123)]['create']();}}CompositeCoordinateSystem[_0x1f307a(0xe5)]=['lng',_0x1f307a(0x100)],CompositeCoordinateSystem['create']=function(_0x22fbd9,_0x4f7aa5){const _0x42298a={_0x186bb8:0x119},_0x4c683d={_0x188bbd:0xe8},_0x56fc1d=_0x1f307a;let _0xfa6e45;const _0x2fdeba=_0x22fbd9['scheduler'][_0x56fc1d(_0x42298a._0x186bb8)]['_mars3d_scene'];_0x22fbd9['eachComponent']('mars3dMap',function(_0x5e407a){const _0x366e5c=_0x56fc1d,_0x1cb64b=_0x4f7aa5['getZr']()['painter'];if(!_0x1cb64b)return;!_0xfa6e45&&(_0xfa6e45=new CompositeCoordinateSystem(_0x2fdeba,_0x4f7aa5)),_0x5e407a[_0x366e5c(0xe8)]=_0xfa6e45,_0xfa6e45['setMapOffset'](_0x5e407a['__mapOffset']||[0x0,0x0]);}),_0x22fbd9['eachSeries'](function(_0x17b7cf){const _0xaad370=_0x56fc1d;_0x17b7cf['get']('coordinateSystem')==='mars3dMap'&&(!_0xfa6e45&&(_0xfa6e45=new CompositeCoordinateSystem(_0x2fdeba,_0x4f7aa5)),_0x17b7cf[_0xaad370(_0x4c683d._0x188bbd)]=_0xfa6e45);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x1f307a(0xfd)])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':_0x1f307a(0x114),'update':'updateLayout'},function(_0x558b52,_0x1b87e9){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x3cc775,_0x44fd40){const _0x2bf14b={_0x3f778f:0xe0,_0xcad5dd:0xf1},_0x4ac51c=_0x1f307a;this[_0x4ac51c(0xe4)]=_0x44fd40,this['scene']=_0x3cc775['scheduler']['ecInstance'][_0x4ac51c(_0x2bf14b._0x3f778f)],this[_0x4ac51c(_0x2bf14b._0xcad5dd)]['postRender'][_0x4ac51c(0x122)](this['moveHandler'],this);},'moveHandler':function(_0x1a6d25,_0xf3bcc1){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x5e711e,_0x4b87c5,_0x6dc9be){},'dispose':function(_0x1b400b){this['scene']['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x1f307a(0xfc)],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x367efe={}){super(_0x367efe),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x1f307a(0xf5)](_0x4ef843){const _0x4e06cc={_0x320bd1:0x10d,_0x38e1fe:0xf5},_0x1ddf07=_0x1f307a;this[_0x1ddf07(0x10b)]=_0x4ef843,this[_0x1ddf07(_0x4e06cc._0x320bd1)]&&(_0x4ef843?this['_echartsContainer']['style'][_0x1ddf07(_0x4e06cc._0x38e1fe)]='all':this['_echartsContainer']['style']['pointerEvents']='none');}[_0x1f307a(0xf7)](_0x4fb4a9,_0x3e6019){this['setEchartsOption'](_0x4fb4a9);}['_showHook'](_0x2d7014){const _0x28c091={_0x263e7b:0x10d,_0x6342fc:0x11d,_0x39493d:0xe7},_0x3bc823=_0x1f307a;_0x2d7014?this[_0x3bc823(_0x28c091._0x263e7b)]['style']['visibility']='visible':this['_echartsContainer'][_0x3bc823(_0x28c091._0x6342fc)]['visibility']=_0x3bc823(_0x28c091._0x39493d);}['_mountedHook'](){const _0x5bcacc={_0x576efb:0x11e,_0x5deae3:0xf1},_0x1feeea=_0x1f307a;this['_map']['scene']['echartsDepthTest']=this['options'][_0x1feeea(_0x5bcacc._0x576efb)]??!![],this['_map'][_0x1feeea(0xf1)]['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x1feeea(_0x5bcacc._0x5deae3)]['echartsFixedHeight']=this[_0x1feeea(0xf8)]['fixedHeight']??0x0;}['_addedHook'](){const _0x48d82d={_0x47f1e7:0xec,_0x10f77f:0xf1},_0x1d5a34=_0x1f307a;this[_0x1d5a34(0x10d)]=this[_0x1d5a34(_0x48d82d._0x47f1e7)](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this[_0x1d5a34(0xf2)][_0x1d5a34(_0x48d82d._0x10f77f)],this[_0x1d5a34(0x121)](this[_0x1d5a34(0xf8)]);}['_removedHook'](){const _0x550223={_0x1e3455:0xfa,_0x2d9d8e:0x11b},_0x2dac16=_0x1f307a;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x2dac16(_0x550223._0x1e3455)][_0x2dac16(_0x550223._0x2d9d8e)](),delete this['_echartsInstance']),this[_0x2dac16(0x10d)]&&(this['_map']['container']['removeChild'](this[_0x2dac16(0x10d)]),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x299729={_0x54c77b:0xfe,_0x18da53:0xfb,_0x1e14d2:0x11d,_0x2d97b0:0xf2,_0x11a376:0x104,_0x2c3d64:0xf6,_0x2d3a51:0xe6},_0x30f40d=_0x1f307a,_0x423232=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map']['container']);return _0x423232['id']=this['id'],_0x423232[_0x30f40d(0x11d)][_0x30f40d(_0x299729._0x54c77b)]='absolute',_0x423232[_0x30f40d(0x11d)]['top']=_0x30f40d(_0x299729._0x18da53),_0x423232['style'][_0x30f40d(0x117)]='0px',_0x423232[_0x30f40d(_0x299729._0x1e14d2)]['width']=this[_0x30f40d(_0x299729._0x2d97b0)]['scene']['canvas']['clientWidth']+'px',_0x423232['style'][_0x30f40d(0x105)]=this['_map']['scene']['canvas'][_0x30f40d(_0x299729._0x11a376)]+'px',_0x423232['style']['pointerEvents']=this['_pointerEvents']?_0x30f40d(_0x299729._0x2c3d64):'none',_0x423232['style'][_0x30f40d(_0x299729._0x2d3a51)]=this['options']['zIndex']??0x9,_0x423232;}['resize'](){const _0x4b003f={_0x1a8df7:0x10d,_0x273e1e:0xf1,_0x415d8d:0x101},_0x39d76f=_0x1f307a;if(!this['_echartsInstance'])return;this['_echartsContainer']['style'][_0x39d76f(0xea)]=this['_map']['scene']['canvas'][_0x39d76f(0x116)]+'px',this[_0x39d76f(_0x4b003f._0x1a8df7)]['style']['height']=this['_map'][_0x39d76f(_0x4b003f._0x273e1e)][_0x39d76f(_0x4b003f._0x415d8d)][_0x39d76f(0x104)]+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x1605cf,_0x12ff69,_0x1f56ec){this['_echartsInstance']&&(_0x1605cf['mars3dMap']=_0x1605cf['mars3dMap']||{},this['_echartsInstance']['setOption'](_0x1605cf,_0x12ff69,_0x1f56ec));}['getRectangle'](_0x467eec){const _0x200e38={_0x271feb:0x112,_0x572cd4:0x108},_0x56b882={_0x527718:0x118,_0x3884f9:0xef},_0x461deb=_0x1f307a;let _0x64db61,_0x3d5b1b,_0x8943d2,_0xc487f7;function _0x242284(_0x3eac0b){const _0x188b65=_0x1982;if(!Array[_0x188b65(_0x56b882._0x527718)](_0x3eac0b))return;const _0x5972c8=_0x3eac0b[0x0]||0x0,_0x5954f2=_0x3eac0b[0x1]||0x0;_0x5972c8!==0x0&&_0x5954f2!==0x0&&(_0x64db61===undefined?(_0x64db61=_0x5972c8,_0x3d5b1b=_0x5972c8,_0x8943d2=_0x5954f2,_0xc487f7=_0x5954f2):(_0x64db61=Math['min'](_0x64db61,_0x5972c8),_0x3d5b1b=Math['max'](_0x3d5b1b,_0x5972c8),_0x8943d2=Math[_0x188b65(_0x56b882._0x3884f9)](_0x8943d2,_0x5954f2),_0xc487f7=Math[_0x188b65(0x11f)](_0xc487f7,_0x5954f2)));}const _0x81a1bb=this[_0x461deb(0xf8)][_0x461deb(0xe1)];_0x81a1bb&&_0x81a1bb['forEach'](_0x760568=>{_0x760568['data']&&_0x760568['data']['forEach'](_0x23a67b=>{const _0x3ae016=_0x1982;if(_0x23a67b[_0x3ae016(0xf3)])_0x242284(_0x23a67b['value']);else _0x23a67b['coords']&&_0x23a67b[_0x3ae016(_0x200e38._0x271feb)][_0x3ae016(_0x200e38._0x572cd4)](_0x1ebaa0=>{_0x242284(_0x1ebaa0);});});});if(_0x64db61===0x0&&_0x8943d2===0x0&&_0x3d5b1b===0x0&&_0xc487f7===0x0)return null;return _0x467eec!==null&&_0x467eec!==void 0x0&&_0x467eec['isFormat']?{'xmin':_0x64db61,'xmax':_0x3d5b1b,'ymin':_0x8943d2,'ymax':_0xc487f7}:Cesium['Rectangle']['fromDegrees'](_0x64db61,_0x8943d2,_0x3d5b1b,_0xc487f7);}['on'](_0x478e02,_0x17e3b3,_0x309b72){return this['_echartsInstance']['on'](_0x478e02,_0x17e3b3,_0x309b72||this),this;}['onByQuery'](_0x1c1ef7,_0x44b71c,_0x542b40,_0x55ed23){const _0x5071f0=_0x1f307a;return this[_0x5071f0(0xfa)]['on'](_0x1c1ef7,_0x44b71c,_0x542b40,_0x55ed23||this),this;}['off'](_0x43e63b,_0x3aad04,_0x4f95bc){return this['_echartsInstance']['off'](_0x43e63b,_0x3aad04,_0x4f95bc||this),this;}}mars3d__namespace[_0x1f307a(0x10e)]['register']('echarts',EchartsLayer),mars3d__namespace[_0x1f307a(0x110)][_0x1f307a(0xeb)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x1f307a(0xeb)]=EchartsLayer,Object['keys'](echarts)[_0x1f307a(0x108)](function(_0x117618){const _0x3e5d0c=_0x1f307a;if(_0x117618!=='default'&&!exports[_0x3e5d0c(0x11a)](_0x117618))Object['defineProperty'](exports,_0x117618,{'enumerable':!![],'get':function(){return echarts[_0x117618];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
