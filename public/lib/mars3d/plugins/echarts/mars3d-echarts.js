/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.5
 * 编译日期：2023-09-12 12:42:17
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x36bd43=_0x53ec;(function(_0x24289b,_0x1faff5){const _0x3f218d={_0xc4f009:0x88,_0x208de3:0xa9,_0x40d32d:0x6a,_0x14c154:0x9c},_0x25f296=_0x53ec,_0x4b4a60=_0x24289b();while(!![]){try{const _0x1b80c2=-parseInt(_0x25f296(0x6e))/0x1*(-parseInt(_0x25f296(_0x3f218d._0xc4f009))/0x2)+-parseInt(_0x25f296(0xa8))/0x3*(-parseInt(_0x25f296(0x8e))/0x4)+parseInt(_0x25f296(0x77))/0x5+parseInt(_0x25f296(_0x3f218d._0x208de3))/0x6*(-parseInt(_0x25f296(_0x3f218d._0x40d32d))/0x7)+-parseInt(_0x25f296(0x73))/0x8+parseInt(_0x25f296(0x9e))/0x9+parseInt(_0x25f296(_0x3f218d._0x14c154))/0xa;if(_0x1b80c2===_0x1faff5)break;else _0x4b4a60['push'](_0x4b4a60['shift']());}catch(_0x3b127f){_0x4b4a60['push'](_0x4b4a60['shift']());}}}(_0x5c6f,0x74da3));function _0x5c6f(){const _0x837e50=['create','EllipsoidalOccluder','__esModule','_api','api','height','clientWidth','lat','3176420gFZCZs','_echartsContainer','3487545WAeNee','left','_pointerEvents','hasOwnProperty','width','setMapOffset','zIndex','visibility','coordinateSystem','coords','3XpWmnU','48ZmAclG','style','_showHook','_mars3d_scene','extendComponentView','all','get','711326IKrTDC','fixedHeight','fromDegrees','value','19xMTtNs','SceneMode','options','eachComponent','scene','1720632hikrNt','echartsDepthTest','isPointVisible','mars3dMap','3289380SiLzqu','EchartsLayer','clear','keys','painter','请引入\x20echarts\x20库\x20','LayerUtil','default','off','postRender','forEach','dimensions','isArray','container','_echartsInstance','BoundingRect','getRoamTransform','8852rfPcJP','globe','ecInstance','echarts','canvas','_map','238132tCQbkX','_mapOffset','_createChartOverlay','dataToPoint','pointerEvents','updateLayout'];_0x5c6f=function(){return _0x837e50;};return _0x5c6f();}function _interopNamespace(_0x28b4ba){const _0x436b4c={_0x2a147c:0x94,_0x2cd236:0x7a},_0x46faa0=_0x53ec;if(_0x28b4ba&&_0x28b4ba['__esModule'])return _0x28b4ba;var _0x2255db=Object[_0x46faa0(_0x436b4c._0x2a147c)](null);return _0x28b4ba&&Object[_0x46faa0(_0x436b4c._0x2cd236)](_0x28b4ba)['forEach'](function(_0x36f66b){const _0x2fa248=_0x46faa0;if(_0x36f66b!==_0x2fa248(0x7e)){var _0x512957=Object['getOwnPropertyDescriptor'](_0x28b4ba,_0x36f66b);Object['defineProperty'](_0x2255db,_0x36f66b,_0x512957[_0x2fa248(0x69)]?_0x512957:{'enumerable':!![],'get':function(){return _0x28b4ba[_0x36f66b];}});}}),_0x2255db['default']=_0x28b4ba,_0x2255db;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x2cf6b7,_0x244ca5){const _0x38e153={_0x217044:0x82,_0x26a7fe:0x9b},_0x33a89c=_0x53ec;this['_mars3d_scene']=_0x2cf6b7,this[_0x33a89c(_0x38e153._0x217044)]=['lng',_0x33a89c(_0x38e153._0x26a7fe)],this['_mapOffset']=[0x0,0x0],this['_api']=_0x244ca5;}['setMapOffset'](_0x172c5b){this['_mapOffset']=_0x172c5b;}['getBMap'](){return this['_mars3d_scene'];}[_0x36bd43(0x91)](_0xb57b40){const _0x24a395={_0x339982:0xac,_0x541f5a:0x6f,_0x6b52b5:0x95,_0x34ce28:0x8f},_0x4831ff=_0x36bd43,_0x307c7f=this[_0x4831ff(_0x24a395._0x339982)],_0xb96db4=[NaN,NaN];let _0x20d4dc=_0x307c7f['echartsFixedHeight'];_0x307c7f['echartsAutoHeight']&&(_0x20d4dc=_0x307c7f['globe']['getHeight'](Cesium$1['Cartographic'][_0x4831ff(0x6c)](_0xb57b40[0x0],_0xb57b40[0x1])));const _0x2f2028=Cesium$1['Cartesian3'][_0x4831ff(0x6c)](_0xb57b40[0x0],_0xb57b40[0x1],_0x20d4dc);if(!_0x2f2028)return _0xb96db4;const _0x4b2744=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x307c7f,_0x2f2028);if(!_0x4b2744)return _0xb96db4;if(_0x307c7f['echartsDepthTest']&&_0x307c7f['mode']===Cesium$1[_0x4831ff(_0x24a395._0x541f5a)]['SCENE3D']){const _0x5f4bb3=new Cesium$1[(_0x4831ff(_0x24a395._0x6b52b5))](_0x307c7f[_0x4831ff(0x89)]['ellipsoid'],_0x307c7f['camera']['positionWC']),_0xc6d28a=_0x5f4bb3[_0x4831ff(0x75)](_0x2f2028);if(!_0xc6d28a)return _0xb96db4;}return[_0x4b2744['x']-this[_0x4831ff(_0x24a395._0x34ce28)][0x0],_0x4b2744['y']-this[_0x4831ff(0x8f)][0x1]];}['getViewRect'](){const _0x187ffe={_0x269111:0x97,_0x4ec34d:0x86},_0x33172a=_0x36bd43,_0x30f63b=this[_0x33172a(_0x187ffe._0x269111)];return new echarts__namespace['graphic'][(_0x33172a(_0x187ffe._0x4ec34d))](0x0,0x0,_0x30f63b['getWidth'](),_0x30f63b['getHeight']());}[_0x36bd43(0x87)](){return echarts__namespace['matrix']['create']();}}CompositeCoordinateSystem['dimensions']=['lng',_0x36bd43(0x9b)],CompositeCoordinateSystem[_0x36bd43(0x94)]=function(_0x459eb5,_0x590b5e){const _0x4b9fcf={_0x545989:0x71},_0x381c12={_0x440a80:0xa6},_0x4efaee={_0x5befa9:0xa3},_0x5b59e1=_0x36bd43;let _0x57acb4;const _0x51cdb0=_0x459eb5['scheduler']['ecInstance']['_mars3d_scene'];_0x459eb5[_0x5b59e1(_0x4b9fcf._0x545989)]('mars3dMap',function(_0xf5f293){const _0x2ceb40=_0x5b59e1,_0x365297=_0x590b5e['getZr']()[_0x2ceb40(0x7b)];if(!_0x365297)return;!_0x57acb4&&(_0x57acb4=new CompositeCoordinateSystem(_0x51cdb0,_0x590b5e)),_0xf5f293['coordinateSystem']=_0x57acb4,_0x57acb4[_0x2ceb40(_0x4efaee._0x5befa9)](_0xf5f293['__mapOffset']||[0x0,0x0]);}),_0x459eb5['eachSeries'](function(_0x2a52cd){const _0x51b135=_0x5b59e1;_0x2a52cd['get'](_0x51b135(_0x381c12._0x440a80))==='mars3dMap'&&(!_0x57acb4&&(_0x57acb4=new CompositeCoordinateSystem(_0x51cdb0,_0x590b5e)),_0x2a52cd[_0x51b135(0xa6)]=_0x57acb4);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x36bd43(0x93)},function(_0x8a3526,_0x440eed){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x36bd43(0xad)]({'type':_0x36bd43(0x76),'init':function(_0x376947,_0x3b3d9f){const _0x325baf={_0x2370c1:0x8a},_0x4395d0=_0x36bd43;this[_0x4395d0(0x98)]=_0x3b3d9f,this['scene']=_0x376947['scheduler'][_0x4395d0(_0x325baf._0x2370c1)][_0x4395d0(0xac)],this['scene'][_0x4395d0(0x80)]['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x39853a,_0x3f8016){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x3ba3ee,_0x16f29b,_0x2b2167){},'dispose':function(_0x20d42f){const _0x29c820=_0x36bd43;this[_0x29c820(0x72)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x36bd43(0x7c));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];function _0x53ec(_0x3c26d5,_0x240a12){const _0x5c6fe4=_0x5c6f();return _0x53ec=function(_0x53ecc7,_0x41db54){_0x53ecc7=_0x53ecc7-0x69;let _0x1ea493=_0x5c6fe4[_0x53ecc7];return _0x1ea493;},_0x53ec(_0x3c26d5,_0x240a12);}class EchartsLayer extends BaseLayer{constructor(_0x1cd2e7={}){const _0x3faacc={_0x2a4aae:0xa0},_0x40c17b=_0x36bd43;super(_0x1cd2e7),this[_0x40c17b(_0x3faacc._0x2a4aae)]=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set[_0x36bd43(0x92)](_0x3ae888){const _0x2c51af={_0x5f30eb:0x92,_0x661a0:0x9d,_0x2a3b64:0xaa},_0x1be388=_0x36bd43;this['_pointerEvents']=_0x3ae888,this['_echartsContainer']&&(_0x3ae888?this[_0x1be388(0x9d)][_0x1be388(0xaa)][_0x1be388(_0x2c51af._0x5f30eb)]=_0x1be388(0xae):this[_0x1be388(_0x2c51af._0x661a0)][_0x1be388(_0x2c51af._0x2a3b64)]['pointerEvents']='none');}['_setOptionsHook'](_0x16ce7f,_0x1200f2){this['setEchartsOption'](_0x16ce7f);}[_0x36bd43(0xab)](_0x1612c2){const _0x26703c={_0x2ac336:0xa5},_0x10952c=_0x36bd43;_0x1612c2?this['_echartsContainer'][_0x10952c(0xaa)][_0x10952c(_0x26703c._0x2ac336)]='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x293f52={_0x39a619:0x74,_0xe4d34a:0x6b},_0x2f16ba=_0x36bd43;this['_map']['scene'][_0x2f16ba(_0x293f52._0x39a619)]=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map']['scene']['echartsFixedHeight']=this['options'][_0x2f16ba(_0x293f52._0xe4d34a)]??0x0;}['_addedHook'](){const _0x41a4b3={_0x1c06ac:0x8d},_0x24bb37=_0x36bd43;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this[_0x24bb37(_0x41a4b3._0x1c06ac)]['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x3d995a={_0x23ad6d:0x79,_0x32447c:0x9d},_0x136055=_0x36bd43;this[_0x136055(0x85)]&&(this['_echartsInstance'][_0x136055(_0x3d995a._0x23ad6d)](),this[_0x136055(0x85)]['dispose'](),delete this['_echartsInstance']),this[_0x136055(_0x3d995a._0x32447c)]&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}[_0x36bd43(0x90)](){const _0x1ddffc={_0x2aa0e2:0x94,_0x1008d6:0x84,_0x335eaf:0xaa,_0x30492a:0x9f,_0x3b762a:0xa2,_0x1815eb:0x9a,_0x34d234:0x8d,_0x22be1f:0x8c,_0x180f15:0xae},_0x5e8dbe=_0x36bd43,_0x2cf999=mars3d__namespace['DomUtil'][_0x5e8dbe(_0x1ddffc._0x2aa0e2)]('div','mars3d-echarts',this['_map'][_0x5e8dbe(_0x1ddffc._0x1008d6)]);return _0x2cf999['id']=this['id'],_0x2cf999[_0x5e8dbe(0xaa)]['position']='absolute',_0x2cf999[_0x5e8dbe(_0x1ddffc._0x335eaf)]['top']='0px',_0x2cf999['style'][_0x5e8dbe(_0x1ddffc._0x30492a)]='0px',_0x2cf999['style'][_0x5e8dbe(_0x1ddffc._0x3b762a)]=this['_map']['scene']['canvas'][_0x5e8dbe(_0x1ddffc._0x1815eb)]+'px',_0x2cf999['style']['height']=this[_0x5e8dbe(_0x1ddffc._0x34d234)]['scene'][_0x5e8dbe(_0x1ddffc._0x22be1f)]['clientHeight']+'px',_0x2cf999['style']['pointerEvents']=this['_pointerEvents']?_0x5e8dbe(_0x1ddffc._0x180f15):'none',_0x2cf999['style'][_0x5e8dbe(0xa4)]=this['options']['zIndex']??0x9,_0x2cf999;}['resize'](){const _0x472192={_0x10fd27:0x85,_0x19c56e:0x99},_0x8a97c3=_0x36bd43;if(!this[_0x8a97c3(_0x472192._0x10fd27)])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas']['clientWidth']+'px',this[_0x8a97c3(0x9d)]['style'][_0x8a97c3(_0x472192._0x19c56e)]=this['_map']['scene'][_0x8a97c3(0x8c)]['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x41b7a8,_0x1fe086,_0x4b7c0a){const _0x528780={_0x2260ec:0x85},_0x4d7be1=_0x36bd43;this['_echartsInstance']&&(_0x41b7a8[_0x4d7be1(0x76)]=_0x41b7a8[_0x4d7be1(0x76)]||{},this[_0x4d7be1(_0x528780._0x2260ec)]['setOption'](_0x41b7a8,_0x1fe086,_0x4b7c0a));}['getRectangle'](_0x388505){const _0x19ad4f={_0x403ed8:0x6d},_0x2f1944=_0x36bd43;let _0x52d8eb,_0x389e23,_0x4b2d19,_0x57cf0e;function _0x4b6a35(_0x5b5207){const _0xe2adf2=_0x53ec;if(!Array[_0xe2adf2(0x83)](_0x5b5207))return;const _0x4ec1da=_0x5b5207[0x0]||0x0,_0x4242c8=_0x5b5207[0x1]||0x0;_0x4ec1da!==0x0&&_0x4242c8!==0x0&&(_0x52d8eb===undefined?(_0x52d8eb=_0x4ec1da,_0x389e23=_0x4ec1da,_0x4b2d19=_0x4242c8,_0x57cf0e=_0x4242c8):(_0x52d8eb=Math['min'](_0x52d8eb,_0x4ec1da),_0x389e23=Math['max'](_0x389e23,_0x4ec1da),_0x4b2d19=Math['min'](_0x4b2d19,_0x4242c8),_0x57cf0e=Math['max'](_0x57cf0e,_0x4242c8)));}const _0x298787=this[_0x2f1944(0x70)]['series'];_0x298787&&_0x298787['forEach'](_0x3ea1e5=>{_0x3ea1e5['data']&&_0x3ea1e5['data']['forEach'](_0x459915=>{const _0x5d398a=_0x53ec;if(_0x459915[_0x5d398a(_0x19ad4f._0x403ed8)])_0x4b6a35(_0x459915['value']);else _0x459915['coords']&&_0x459915[_0x5d398a(0xa7)]['forEach'](_0x1bb915=>{_0x4b6a35(_0x1bb915);});});});if(_0x52d8eb===0x0&&_0x4b2d19===0x0&&_0x389e23===0x0&&_0x57cf0e===0x0)return null;return _0x388505!==null&&_0x388505!==void 0x0&&_0x388505['isFormat']?{'xmin':_0x52d8eb,'xmax':_0x389e23,'ymin':_0x4b2d19,'ymax':_0x57cf0e}:Cesium['Rectangle'][_0x2f1944(0x6c)](_0x52d8eb,_0x4b2d19,_0x389e23,_0x57cf0e);}['on'](_0x45e9d5,_0x2c95ba,_0x39378a){return this['_echartsInstance']['on'](_0x45e9d5,_0x2c95ba,_0x39378a||this),this;}['onByQuery'](_0xf33f5f,_0x45908d,_0x1c3f80,_0x283531){return this['_echartsInstance']['on'](_0xf33f5f,_0x45908d,_0x1c3f80,_0x283531||this),this;}[_0x36bd43(0x7f)](_0x2f99c2,_0x50020d,_0x2006a0){return this['_echartsInstance']['off'](_0x2f99c2,_0x50020d,_0x2006a0||this),this;}}mars3d__namespace[_0x36bd43(0x7d)]['register'](_0x36bd43(0x8b),EchartsLayer),mars3d__namespace['layer']['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x36bd43(0x78)]=EchartsLayer,Object[_0x36bd43(0x7a)](echarts)[_0x36bd43(0x81)](function(_0x4ba476){const _0x528e4f={_0x5aafd3:0xa1},_0x2d48c6=_0x36bd43;if(_0x4ba476!=='default'&&!exports[_0x2d48c6(_0x528e4f._0x5aafd3)](_0x4ba476))Object['defineProperty'](exports,_0x4ba476,{'enumerable':!![],'get':function(){return echarts[_0x4ba476];}});}),Object['defineProperty'](exports,_0x36bd43(0x96),{'value':!![]});
}));
